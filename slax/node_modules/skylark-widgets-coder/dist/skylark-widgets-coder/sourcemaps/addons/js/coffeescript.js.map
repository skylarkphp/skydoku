{"version":3,"sources":["addons/js/coffeescript.js"],"names":["define","langx","Addon","util","Coder","AddonCoffeeScript","[object Object]","super","_init","coder","this","options","window","CoffeeScript","$container","querySelector","innerHTML","on","change","bind","params","type","file","indexOf","e","data","isCoffee","content","compile","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,eACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBACMC,UAA2BH,EAG7BI,QACIC,MAAMC,QACN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,aAGgB,IAAxBC,OAAOC,eAGlBJ,EAAMK,WAAWC,cAAc,2BAA2BC,UAAY,eACtEP,EAAMQ,GAAG,SAAUP,KAAKQ,OAAOC,KAAKT,MALrB,KAOnBJ,SAASc,GACL,MAAoB,OAAhBA,EAAOC,QAGgC,IAApCD,EAAOE,KAAKC,QAAQ,YAAqC,KAAhBH,EAAOE,MAE3DhB,OAAOkB,GACH,IAAIJ,EAASI,EAAEC,KACf,GAAIf,KAAKgB,SAASN,GACd,IACIA,EAAOO,QAAUf,OAAOC,aAAae,QAAQR,EAAOO,SACtD,MAAOE,GACL,OAAOC,SAASD,EAAKT,IAMjCW,0BACI,MAAO,KAGXC,uBACI,MAAO,gBAOf,OAFA3B,EAAkB4B,SAAS7B,GAEpBC","file":"../../../addons/js/coffeescript.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../Addon\",\n    '../../util',\n    \"../../Coder\"\n], function (langx,Addon,util,Coder) {\n    'use strict';\n    class AddonCoffeeScript  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n            var coder = this.coder,\n                options = this.options;\n            \n            var priority = 20;\n            if (typeof window.CoffeeScript === 'undefined') {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"js\"]').innerHTML = 'CoffeeScript';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        isCoffee(params) {\n            if (params.type !== 'js') {\n                return false;\n            }\n            return params.file.indexOf('.coffee') !== -1 || params.file === '';\n        }\n        change(e) {\n            var params = e.data;\n            if (this.isCoffee(params)) {\n                try {\n                    params.content = window.CoffeeScript.compile(params.content);\n                } catch (err) {\n                    return callback(err, params);\n                }\n            }\n            //callback(null, params);\n        }\n\n        static get categoryName() {\n            return \"js\";\n        }\n\n        static get addonName(){\n            return \"coffeescript\";\n        }\n\n    };\n\n    AddonCoffeeScript.register(Coder);\n\n    return AddonCoffeeScript;\n});"]}