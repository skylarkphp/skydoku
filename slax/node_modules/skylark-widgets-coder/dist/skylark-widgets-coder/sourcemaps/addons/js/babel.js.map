{"version":3,"sources":["addons/js/babel.js"],"names":["define","langx","Addon","util","Coder","AddonBabel","[object Object]","super","_init","coder","this","options","window","Babel","babel","transform","$container","querySelector","innerHTML","on","change","bind","e","params","data","type","content","code","err","callback","categoryName","addonName","register"],"mappings":";;;;;;;AAAAA,QACI,sBACA,cACA,aACA,eACD,SAAUC,EAAMC,EAAMC,EAAKC,GAC1B,mBAEMC,UAAoBH,EAGtBI,QACIC,MAAMC,QAEN,IAAIC,EAAQC,KAAKD,MACHC,KAAKC,QAInB,QAA4B,IAAjBC,OAAOC,MACdH,KAAKI,MAAQF,OAAOC,UACjB,CAAA,QAA4B,IAAjBD,OAAOE,MAGrB,OAFAJ,KAAKI,OAAUC,UAAWH,OAAOE,OAIrCL,EAAMO,WAAWC,cAAc,2BAA2BC,UAAY,SACtET,EAAMU,GAAG,SAAUT,KAAKU,OAAOC,KAAKX,MAVrB,IAYnBJ,OAAOgB,GACH,IAAIC,EAASD,EAAEE,KACf,GAAoB,OAAhBD,EAAOE,KACP,IACIF,EAAOG,QAAUhB,KAAKI,MAAMC,UAAUQ,EAAOG,QAAShB,KAAKC,SAASgB,KACtE,MAAOC,GACL,OAAOC,SAASD,EAAKL,IAQjCO,0BACI,MAAO,KAGXC,uBACI,MAAO,SAOf,OAFA1B,EAAW2B,SAAS5B,GAEbC","file":"../../../addons/js/babel.js","sourcesContent":["define([\n    'skylark-langx/langx',\n    \"../../Addon\",\n    '../../util',\n    \"../../Coder\"\n], function (langx,Addon,util,Coder) {\n    'use strict';\n    \n    class AddonBabel  extends Addon{\n        //constructor(coder, options) \n\n        _init() {\n            super._init();\n\n            var coder = this.coder,\n                options = this.options;\n\n            var priority = 20;\n            //this.options = langx.clone(options);\n            if (typeof window.Babel !== 'undefined') {\n                this.babel = window.Babel;\n            } else if (typeof window.babel !== 'undefined') {\n                this.babel = { transform: window.babel };\n            } else {\n                return;\n            }\n            coder.$container.querySelector('a[data-coder-type=\"js\"]').innerHTML = 'ES2015';\n            coder.on('change', this.change.bind(this), priority);\n        }\n        change(e) {\n            var params = e.data;\n            if (params.type === 'js') {\n                try {\n                    params.content = this.babel.transform(params.content, this.options).code;\n                } catch (err) {\n                    return callback(err, params);\n                }\n                //callback(null, params);\n            } else {\n                //callback(null, params);\n            }\n        }\n\n        static get categoryName() {\n            return \"js\";\n        }\n\n        static get addonName(){\n            return \"babel\";\n        }\n\n    };\n\n    AddonBabel.register(Coder);\n\n    return AddonBabel;\n});"]}