/**
 * skylark-domx-images - The skylark image library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,e){var o=e.define,n=e.require,i="function"==typeof o&&o.amd,t=!i&&"undefined"!=typeof exports;if(!i&&!o){var s={};o=e.define=function(r,e,o){"function"==typeof o?(s[r]={factory:o,deps:e.map(function(e){return function(r,e){if("."!==r[0])return r;var o=e.split("/"),n=r.split("/");o.pop();for(var i=0;i<n.length;i++)"."!=n[i]&&(".."==n[i]?o.pop():o.push(n[i]));return o.join("/")}(e,r)}),resolved:!1,exports:null},n(r)):s[r]={factory:null,resolved:!0,exports:o}},n=e.require=function(r){if(!s.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var o=s[r];if(!o.resolved){var i=[];o.deps.forEach(function(r){i.push(n(r))}),o.exports=o.factory.apply(e,i)||null,o.resolved=!0}return o.exports}}if(!o)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,e){r("skylark-domx-images/images",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-eventer","skylark-domx-noder","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-data","skylark-domx-transforms","skylark-domx-query"],function(r,e,o,n,i,t,s,a,l,u){function f(r){e.isArray(r)||(r=[r]);var n=r.length,i=0,t=0,s=0,a=new e.Deferred;function l(){a.resolve({total:n,successed:t,failered:s,imgs:r})}function u(e,o){i++,o?t++:s++,a.progress({img:e,isLoaded:o,progressed:i,total:n,imgs:r}),i==n&&l()}return e.defer(function(){if(!r.length)return void l();r.forEach(function(r){d(r)?u(r,c(r)):o.on(r,{load:function(){u(r,!0)},error:function(){u(r,!1)}})})}),a.promise.totalCount=n,a.promise}function d(r){return r.complete&&void 0!==r.naturalWidth}function c(r){return r.complete&&0!==r.naturalWidth}function m(r,e){var o=[];function n(r){var e=/url\((['"])?(.*?)\1\)/gi.exec(s.css(r,"background-image")),n=e&&e[2];if(n){var i=new Image;i.src=n,o.push(i)}}if(e=e||{},"IMG"==r.nodeName)o.push(r);else{for(var t=i.findAll(r,"img"),a=0;a<t.length;a++)o.push(t[a]);if(!0===e.background)n(r);else if("string"==typeof e.background){var l=i.findAll(r,e.background);for(a=0;a<l.length;a++)n(l[a])}}return f(o)}function p(r,o){var i,a={},u=t.clientSize(r),f=o.loaded;o.failered;function d(){s.css(i,{top:(u.height-i.offsetHeight)/2+"px",left:(u.width-i.offsetWidth)/2+"px"}),l.reset(i),s.css(i,{visibility:"visible"}),f&&f()}function c(){}function m(r){i.style.visibility="hidden",i.src=r}!function(){"relative"!=(a=s.css(r,["position","overflow"])).position&&"absolute"!=a.position&&s.css(r,"position","relative");s.css(r,"overflow","hidden"),i=new Image,s.css(i,{position:"absolute",border:0,padding:0,margin:0,width:"auto",height:"auto",visibility:"hidden"}),i.onload=d,i.onerror=c,n.append(r,i),o.url&&m(o.url)}();var p={load:m,dispose:function(){n.remove(i),s.css(r,a),i=i.onload=i.onerror=null}};return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(r){p[r]=function(){var o=e.makeArray(arguments);o.unshift(i),l[r].apply(null,o)}}),p}function g(){return g}return u.fn.imagesLoaded=function(r){return m(this,r)},u.fn.imagesViewer=function(r){return p(this,r)},g.transform=function(r,e){},["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(r){g.transform[r]=l[r]}),e.mixin(g,{isCompleted:d,isLoaded:c,loaded:m,preload:function(r,o){e.isString(r)&&(r=[r]);var n=[];return r.forEach(function(r){var e=new Image;e.src=r,n.push(e)}),f(n)},viewer:p}),r.attach("domx.images",g)}),r("skylark-domx-images/main",["./images"],function(r){return r}),r("skylark-domx-images",["skylark-domx-images/main"],function(r){return r})}(o),!i){var a=n("skylark-langx/skylark");t?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-images.js.map
