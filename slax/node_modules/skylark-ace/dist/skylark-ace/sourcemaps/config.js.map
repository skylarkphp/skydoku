{"version":3,"sources":["config.js"],"names":["define","require","exports","module","lang","net","AppConfig","global","this","window","options","packaged","workerPath","modePath","themePath","basePath","suffix","$moduleUrls","loadWorkerFromBlob","get","key","hasOwnProperty","Error","set","value","all","copyObject","$modes","moduleUrl","name","component","parts","split","sep","length","base","re","RegExp","replace","path","slice","setModuleUrl","subst","$loading","loadModule","moduleName","onLoad","moduleType","Array","isArray","e","push","afterLoad","_emit","listeners","forEach","loadScript","reportErrorIfPathIsNotConfigured","Object","keys","console","error","init","document","str","scriptOptions","scriptUrl","currentScript","_currentScript","scripts","ownerDocument","getElementsByTagName","i","script","src","getAttribute","attributes","j","l","attr","indexOf","m","m1","toUpperCase","match"],"mappings":"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","file":"../config.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"no use strict\";\r\n\r\nvar lang = require(\"./lib/lang\");\r\nvar oop = require(\"./lib/oop\");\r\nvar net = require(\"./lib/net\");\r\nvar AppConfig = require(\"./lib/app_config\").AppConfig;\r\n\r\nmodule.exports = exports = new AppConfig();\r\n\r\nvar global = (function() {\r\n    return this || typeof window != \"undefined\" && window;\r\n})();\r\n\r\nvar options = {\r\n    packaged: false,\r\n    workerPath: null,\r\n    modePath: null,\r\n    themePath: null,\r\n    basePath: \"\",\r\n    suffix: \".js\",\r\n    $moduleUrls: {},\r\n    loadWorkerFromBlob: true\r\n};\r\n\r\nexports.get = function(key) {\r\n    if (!options.hasOwnProperty(key))\r\n        throw new Error(\"Unknown config key: \" + key);\r\n\r\n    return options[key];\r\n};\r\n\r\nexports.set = function(key, value) {\r\n    if (!options.hasOwnProperty(key))\r\n        throw new Error(\"Unknown config key: \" + key);\r\n\r\n    options[key] = value;\r\n};\r\n\r\nexports.all = function() {\r\n    return lang.copyObject(options);\r\n};\r\n\r\nexports.$modes = {};\r\n\r\n// module loading\r\nexports.moduleUrl = function(name, component) {\r\n    if (options.$moduleUrls[name])\r\n        return options.$moduleUrls[name];\r\n\r\n    var parts = name.split(\"/\");\r\n    component = component || parts[parts.length - 2] || \"\";\r\n    \r\n    // todo make this configurable or get rid of '-'\r\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\r\n    var base = parts[parts.length - 1];\r\n    if (component == \"worker\" && sep == \"-\") {\r\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\r\n        base = base.replace(re, \"\");\r\n    }\r\n\r\n    if ((!base || base == component) && parts.length > 1)\r\n        base = parts[parts.length - 2];\r\n    var path = options[component + \"Path\"];\r\n    if (path == null) {\r\n        path = options.basePath;\r\n    } else if (sep == \"/\") {\r\n        component = sep = \"\";\r\n    }\r\n    if (path && path.slice(-1) != \"/\")\r\n        path += \"/\";\r\n    return path + component + sep + base + this.get(\"suffix\");\r\n};\r\n\r\nexports.setModuleUrl = function(name, subst) {\r\n    return options.$moduleUrls[name] = subst;\r\n};\r\n\r\nexports.$loading = {};\r\nexports.loadModule = function(moduleName, onLoad) {\r\n    var module, moduleType;\r\n    if (Array.isArray(moduleName)) {\r\n        moduleType = moduleName[0];\r\n        moduleName = moduleName[1];\r\n    }\r\n\r\n    try {\r\n        module = require(moduleName);\r\n    } catch (e) {}\r\n    // require(moduleName) can return empty object if called after require([moduleName], callback)\r\n    if (module && !exports.$loading[moduleName])\r\n        return onLoad && onLoad(module);\r\n\r\n    if (!exports.$loading[moduleName])\r\n        exports.$loading[moduleName] = [];\r\n\r\n    exports.$loading[moduleName].push(onLoad);\r\n\r\n    if (exports.$loading[moduleName].length > 1)\r\n        return;\r\n\r\n    var afterLoad = function() {\r\n        require([moduleName], function(module) {\r\n            exports._emit(\"load.module\", {name: moduleName, module: module});\r\n            var listeners = exports.$loading[moduleName];\r\n            exports.$loading[moduleName] = null;\r\n            listeners.forEach(function(onLoad) {\r\n                onLoad && onLoad(module);\r\n            });\r\n        });\r\n    };\r\n\r\n    if (!exports.get(\"packaged\"))\r\n        return afterLoad();\r\n    \r\n    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\r\n    reportErrorIfPathIsNotConfigured();\r\n};\r\n\r\nvar reportErrorIfPathIsNotConfigured = function() {\r\n    if (\r\n        !options.basePath && !options.workerPath \r\n        && !options.modePath && !options.themePath\r\n        && !Object.keys(options.$moduleUrls).length\r\n    ) {\r\n        console.error(\r\n            \"Unable to infer path to ace from script src,\",\r\n            \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\",\r\n            \"or with webpack use ace/webpack-resolver\"\r\n        );\r\n        reportErrorIfPathIsNotConfigured = function() {};\r\n    }\r\n};\r\n\r\n// initialization\r\nfunction init(packaged) {\r\n    if (!global || !global.document)\r\n        return;\r\n    \r\n    options.packaged = packaged || require.packaged || module.packaged || (global.define && define.packaged);\r\n\r\n    var scriptOptions = {};\r\n    var scriptUrl = \"\";\r\n\r\n    // Use currentScript.ownerDocument in case this file was loaded from imported document. (HTML Imports)\r\n    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill\r\n    var currentDocument = currentScript && currentScript.ownerDocument || document;\r\n    \r\n    var scripts = currentDocument.getElementsByTagName(\"script\");\r\n    for (var i=0; i<scripts.length; i++) {\r\n        var script = scripts[i];\r\n\r\n        var src = script.src || script.getAttribute(\"src\");\r\n        if (!src)\r\n            continue;\r\n\r\n        var attributes = script.attributes;\r\n        for (var j=0, l=attributes.length; j < l; j++) {\r\n            var attr = attributes[j];\r\n            if (attr.name.indexOf(\"data-ace-\") === 0) {\r\n                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, \"\"))] = attr.value;\r\n            }\r\n        }\r\n\r\n        var m = src.match(/^(.*)\\/ace(\\-\\w+)?\\.js(\\?|$)/);\r\n        if (m)\r\n            scriptUrl = m[1];\r\n    }\r\n\r\n    if (scriptUrl) {\r\n        scriptOptions.base = scriptOptions.base || scriptUrl;\r\n        scriptOptions.packaged = true;\r\n    }\r\n\r\n    scriptOptions.basePath = scriptOptions.base;\r\n    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;\r\n    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;\r\n    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;\r\n    delete scriptOptions.base;\r\n\r\n    for (var key in scriptOptions)\r\n        if (typeof scriptOptions[key] !== \"undefined\")\r\n            exports.set(key, scriptOptions[key]);\r\n}\r\n\r\nexports.init = init;\r\n\r\nfunction deHyphenate(str) {\r\n    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });\r\n}\r\n\r\n});\r\n"]}