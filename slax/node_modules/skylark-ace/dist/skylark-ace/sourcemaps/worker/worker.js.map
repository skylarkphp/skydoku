{"version":3,"sources":["worker/worker.js"],"names":["window","document","require","define","console","msgs","Array","prototype","slice","call","arguments","postMessage","type","data","error","warn","log","trace","ace","onerror","message","file","line","col","err","stack","normalizeModule","parentId","moduleName","indexOf","chunks","split","charAt","base","join","previous","replace","id","Error","module","modules","initialized","exports","factory","tlns","path","paths","testPath","tail","alias","location","main","name","i","lastIndexOf","substr","resolveModuleId","importScripts","deps","length","req","childId","this","returnExports","apply","map","dep","amd","initBaseUrls","topLevelNamespaces","initSender","EventEmitter","oop","Sender","implement","callback","callbackId","emit","sender","onmessage","e","msg","event","_signal","command","args","init","clazz","classname"],"mappings":";;;;;;;AAAA,iBACC,SAAUA,GACX,UAA4B,IAAjBA,EAAOA,QAAyBA,EAAOC,UAE9CD,EAAOE,SAAWF,EAAOG,QAA7B,CAGKH,EAAOI,UACRJ,EAAOI,QAAU,WACb,IAAIC,EAAOC,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,GACjDC,aAAaC,KAAM,MAAOC,KAAMR,KAEpCL,EAAOI,QAAQU,MACfd,EAAOI,QAAQW,KACff,EAAOI,QAAQY,IACfhB,EAAOI,QAAQa,MAAQjB,EAAOI,SAElCJ,EAAOA,OAASA,EAChBA,EAAOkB,IAAMlB,EAEbA,EAAOmB,QAAU,SAASC,EAASC,EAAMC,EAAMC,EAAKC,GAChDb,aAAaC,KAAM,QAASC,MACxBO,QAASA,EACTP,KAAMW,EAAIX,KACVQ,KAAMA,EACNC,KAAMA,EACNC,IAAKA,EACLE,MAAOD,EAAIC,UAInBzB,EAAO0B,gBAAkB,SAASC,EAAUC,GAExC,IAAiC,IAA7BA,EAAWC,QAAQ,KAAa,CAChC,IAAIC,EAASF,EAAWG,MAAM,KAC9B,OAAO/B,EAAO0B,gBAAgBC,EAAUG,EAAO,IAAM,IAAM9B,EAAO0B,gBAAgBC,EAAUG,EAAO,IAGvG,GAA4B,KAAxBF,EAAWI,OAAO,GAAW,CAC7B,IAAIC,EAAON,EAASI,MAAM,KAAKvB,MAAM,GAAI,GAAG0B,KAAK,KAGjD,IAFAN,GAAcK,EAAOA,EAAO,IAAM,IAAML,GAEJ,IAA7BA,EAAWC,QAAQ,MAAeM,GAAYP,GAAY,CAC7D,IAAIO,EAAWP,EACfA,EAAaA,EAAWQ,QAAQ,QAAS,IAAIA,QAAQ,SAAU,KAAKA,QAAQ,iBAAkB,KAItG,OAAOR,GAGX5B,EAAOE,QAAU,SAAiByB,EAAUU,GAKxC,GAJKA,IACDA,EAAKV,EACLA,EAAW,OAEVU,EAAGL,OACJ,MAAM,IAAIM,MAAM,gEAEpBD,EAAKrC,EAAO0B,gBAAgBC,EAAUU,GAEtC,IAAIE,EAASvC,EAAOE,QAAQsC,QAAQH,GACpC,GAAIE,EAKA,OAJKA,EAAOE,cACRF,EAAOE,aAAc,EACrBF,EAAOG,QAAUH,EAAOI,UAAUD,SAE/BH,EAAOG,QAGlB,IAAK1C,EAAOE,QAAQ0C,KAChB,OAAOxC,QAAQY,IAAI,kBAAoBqB,GAE3C,IAAIQ,EAQR,SAAyBR,EAAIS,GACzB,IAAIC,EAAWV,EAAIW,EAAO,GAC1B,KAAOD,GAAU,CACb,IAAIE,EAAQH,EAAMC,GAClB,GAAoB,iBAATE,EACP,OAAOA,EAAQD,EACZ,GAAIC,EACP,OAAQA,EAAMC,SAASd,QAAQ,OAAQ,MAAQY,GAAQC,EAAME,MAAQF,EAAMG,MACxE,IAAc,IAAVH,EACP,MAAO,GAEX,IAAII,EAAIN,EAASO,YAAY,KAC7B,IAAW,IAAPD,EAAU,MACdL,EAAOD,EAASQ,OAAOF,GAAKL,EAC5BD,EAAWA,EAASvC,MAAM,EAAG6C,GAEjC,OAAOhB,EAxBImB,CAAgBnB,EAAIrC,EAAOE,QAAQ0C,MAM9C,MALsB,OAAlBC,EAAKrC,OAAO,KAAaqC,GAAQ,OAErC7C,EAAOE,QAAQmC,GAAKA,EACpBrC,EAAOE,QAAQsC,QAAQH,MACvBoB,cAAcZ,GACP7C,EAAOE,QAAQyB,EAAUU,IAoBpCrC,EAAOE,QAAQsC,WACfxC,EAAOE,QAAQ0C,QAEf5C,EAAOG,OAAS,SAASkC,EAAIqB,EAAMf,GAa/B,GAZwB,GAApBjC,UAAUiD,QACVhB,EAAUe,EACO,iBAANrB,IACPqB,EAAOrB,EACPA,EAAKrC,EAAOE,QAAQmC,KAEG,GAApB3B,UAAUiD,SACjBhB,EAAUN,EACVqB,KACArB,EAAKrC,EAAOE,QAAQmC,IAGF,mBAAXM,EAAX,CAQKe,EAAKC,SAGND,GAAQ,UAAW,UAAW,WAElC,IAAIE,EAAM,SAASC,GACf,OAAO7D,EAAOE,QAAQmC,EAAIwB,IAG9B7D,EAAOE,QAAQsC,QAAQH,IACnBK,WACAC,QAAS,WACL,IAAIJ,EAASuB,KACTC,EAAgBpB,EAAQqB,MAAMF,KAAMJ,EAAKlD,MAAM,EAAGmC,EAAQgB,QAAQM,IAAI,SAASC,GAC/E,OAAQA,GAGJ,IAAK,UAAW,OAAON,EACvB,IAAK,UAAW,OAAOrB,EAAOG,QAC9B,IAAK,SAAW,OAAOH,EAGvB,QAAgB,OAAOqB,EAAIM,OAKnC,OAFIH,IACAxB,EAAOG,QAAUqB,GACdxB,SAlCXvC,EAAOE,QAAQsC,QAAQH,IACnBK,QAASC,EACTF,aAAa,IAoCzBzC,EAAOG,OAAOgE,OACdjE,QAAQ0C,QACR5C,EAAOoE,aAAgB,SAAsBC,GACzC,IAAK,IAAIhB,KAAKgB,EACVnE,QAAQ0C,KAAKS,GAAKgB,EAAmBhB,IAG7CrD,EAAOsE,WAAa,WAEhB,IAAIC,EAAevE,EAAOE,QAAQ,yBAAyBqE,aACvDC,EAAMxE,EAAOE,QAAQ,eAErBuE,EAAS,aAwBb,OAtBA,WAEID,EAAIE,UAAUZ,KAAMS,GAEpBT,KAAKa,SAAW,SAAS9D,EAAM+D,GAC3BjE,aACIC,KAAM,OACNyB,GAAIuC,EACJ/D,KAAMA,KAIdiD,KAAKe,KAAO,SAASzB,EAAMvC,GACvBF,aACIC,KAAM,QACNwC,KAAMA,EACNvC,KAAMA,MAIfJ,KAAKgE,EAAOlE,WAER,IAAIkE,GAGf,IAAItB,EAAOnD,EAAOmD,KAAO,KACrB2B,EAAS9E,EAAO8E,OAAS,KAE7B9E,EAAO+E,UAAY,SAASC,GACxB,IAAIC,EAAMD,EAAEnE,KACZ,GAAIoE,EAAIC,OAASJ,EACbA,EAAOK,QAAQF,EAAIC,MAAOD,EAAIpE,WAE7B,GAAIoE,EAAIG,QACT,GAAIjC,EAAK8B,EAAIG,SACTjC,EAAK8B,EAAIG,SAASpB,MAAMb,EAAM8B,EAAII,UACjC,CAAA,IAAIrF,EAAOiF,EAAIG,SAGhB,MAAM,IAAI9C,MAAM,mBAAqB2C,EAAIG,SAFzCpF,EAAOiF,EAAIG,SAASpB,MAAMhE,EAAQiF,EAAII,WAIzC,GAAIJ,EAAIK,KAAM,CACftF,EAAOoE,aAAaa,EAAIrC,MACxB1C,QAAQ,oBACR4E,EAAS9E,EAAO8E,OAAS9E,EAAOsE,aAChC,IAAIiB,EAAQrF,QAAQ+E,EAAI1C,QAAQ0C,EAAIO,WACpCrC,EAAOnD,EAAOmD,KAAO,IAAIoC,EAAMT,MArNtC,CAwNEhB","file":"../../worker/worker.js","sourcesContent":["\"no use strict\";\r\n!(function(window) {\r\nif (typeof window.window != \"undefined\" && window.document)\r\n    return;\r\nif (window.require && window.define)\r\n    return;\r\n\r\nif (!window.console) {\r\n    window.console = function() {\r\n        var msgs = Array.prototype.slice.call(arguments, 0);\r\n        postMessage({type: \"log\", data: msgs});\r\n    };\r\n    window.console.error =\r\n    window.console.warn = \r\n    window.console.log =\r\n    window.console.trace = window.console;\r\n}\r\nwindow.window = window;\r\nwindow.ace = window;\r\n\r\nwindow.onerror = function(message, file, line, col, err) {\r\n    postMessage({type: \"error\", data: {\r\n        message: message,\r\n        data: err.data,\r\n        file: file,\r\n        line: line, \r\n        col: col,\r\n        stack: err.stack\r\n    }});\r\n};\r\n\r\nwindow.normalizeModule = function(parentId, moduleName) {\r\n    // normalize plugin requires\r\n    if (moduleName.indexOf(\"!\") !== -1) {\r\n        var chunks = moduleName.split(\"!\");\r\n        return window.normalizeModule(parentId, chunks[0]) + \"!\" + window.normalizeModule(parentId, chunks[1]);\r\n    }\r\n    // normalize relative requires\r\n    if (moduleName.charAt(0) == \".\") {\r\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\r\n        moduleName = (base ? base + \"/\" : \"\") + moduleName;\r\n        \r\n        while (moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\r\n            var previous = moduleName;\r\n            moduleName = moduleName.replace(/^\\.\\//, \"\").replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\r\n        }\r\n    }\r\n    \r\n    return moduleName;\r\n};\r\n\r\nwindow.require = function require(parentId, id) {\r\n    if (!id) {\r\n        id = parentId;\r\n        parentId = null;\r\n    }\r\n    if (!id.charAt)\r\n        throw new Error(\"worker.js require() accepts only (parentId, id) as arguments\");\r\n\r\n    id = window.normalizeModule(parentId, id);\r\n\r\n    var module = window.require.modules[id];\r\n    if (module) {\r\n        if (!module.initialized) {\r\n            module.initialized = true;\r\n            module.exports = module.factory().exports;\r\n        }\r\n        return module.exports;\r\n    }\r\n   \r\n    if (!window.require.tlns)\r\n        return console.log(\"unable to load \" + id);\r\n    \r\n    var path = resolveModuleId(id, window.require.tlns);\r\n    if (path.slice(-3) != \".js\") path += \".js\";\r\n    \r\n    window.require.id = id;\r\n    window.require.modules[id] = {}; // prevent infinite loop on broken modules\r\n    importScripts(path);\r\n    return window.require(parentId, id);\r\n};\r\nfunction resolveModuleId(id, paths) {\r\n    var testPath = id, tail = \"\";\r\n    while (testPath) {\r\n        var alias = paths[testPath];\r\n        if (typeof alias == \"string\") {\r\n            return alias + tail;\r\n        } else if (alias) {\r\n            return  alias.location.replace(/\\/*$/, \"/\") + (tail || alias.main || alias.name);\r\n        } else if (alias === false) {\r\n            return \"\";\r\n        }\r\n        var i = testPath.lastIndexOf(\"/\");\r\n        if (i === -1) break;\r\n        tail = testPath.substr(i) + tail;\r\n        testPath = testPath.slice(0, i);\r\n    }\r\n    return id;\r\n}\r\nwindow.require.modules = {};\r\nwindow.require.tlns = {};\r\n\r\nwindow.define = function(id, deps, factory) {\r\n    if (arguments.length == 2) {\r\n        factory = deps;\r\n        if (typeof id != \"string\") {\r\n            deps = id;\r\n            id = window.require.id;\r\n        }\r\n    } else if (arguments.length == 1) {\r\n        factory = id;\r\n        deps = [];\r\n        id = window.require.id;\r\n    }\r\n    \r\n    if (typeof factory != \"function\") {\r\n        window.require.modules[id] = {\r\n            exports: factory,\r\n            initialized: true\r\n        };\r\n        return;\r\n    }\r\n\r\n    if (!deps.length)\r\n        // If there is no dependencies, we inject \"require\", \"exports\" and\r\n        // \"module\" as dependencies, to provide CommonJS compatibility.\r\n        deps = [\"require\", \"exports\", \"module\"];\r\n\r\n    var req = function(childId) {\r\n        return window.require(id, childId);\r\n    };\r\n\r\n    window.require.modules[id] = {\r\n        exports: {},\r\n        factory: function() {\r\n            var module = this;\r\n            var returnExports = factory.apply(this, deps.slice(0, factory.length).map(function(dep) {\r\n                switch (dep) {\r\n                    // Because \"require\", \"exports\" and \"module\" aren't actual\r\n                    // dependencies, we must handle them seperately.\r\n                    case \"require\": return req;\r\n                    case \"exports\": return module.exports;\r\n                    case \"module\":  return module;\r\n                    // But for all other dependencies, we can just go ahead and\r\n                    // require them.\r\n                    default:        return req(dep);\r\n                }\r\n            }));\r\n            if (returnExports)\r\n                module.exports = returnExports;\r\n            return module;\r\n        }\r\n    };\r\n};\r\nwindow.define.amd = {};\r\nrequire.tlns = {};\r\nwindow.initBaseUrls  = function initBaseUrls(topLevelNamespaces) {\r\n    for (var i in topLevelNamespaces)\r\n        require.tlns[i] = topLevelNamespaces[i];\r\n};\r\n\r\nwindow.initSender = function initSender() {\r\n\r\n    var EventEmitter = window.require(\"ace/lib/event_emitter\").EventEmitter;\r\n    var oop = window.require(\"ace/lib/oop\");\r\n    \r\n    var Sender = function() {};\r\n    \r\n    (function() {\r\n        \r\n        oop.implement(this, EventEmitter);\r\n                \r\n        this.callback = function(data, callbackId) {\r\n            postMessage({\r\n                type: \"call\",\r\n                id: callbackId,\r\n                data: data\r\n            });\r\n        };\r\n    \r\n        this.emit = function(name, data) {\r\n            postMessage({\r\n                type: \"event\",\r\n                name: name,\r\n                data: data\r\n            });\r\n        };\r\n        \r\n    }).call(Sender.prototype);\r\n    \r\n    return new Sender();\r\n};\r\n\r\nvar main = window.main = null;\r\nvar sender = window.sender = null;\r\n\r\nwindow.onmessage = function(e) {\r\n    var msg = e.data;\r\n    if (msg.event && sender) {\r\n        sender._signal(msg.event, msg.data);\r\n    }\r\n    else if (msg.command) {\r\n        if (main[msg.command])\r\n            main[msg.command].apply(main, msg.args);\r\n        else if (window[msg.command])\r\n            window[msg.command].apply(window, msg.args);\r\n        else\r\n            throw new Error(\"Unknown command:\" + msg.command);\r\n    }\r\n    else if (msg.init) {\r\n        window.initBaseUrls(msg.tlns);\r\n        require(\"ace/lib/es5-shim\");\r\n        sender = window.sender = window.initSender();\r\n        var clazz = require(msg.module)[msg.classname];\r\n        main = window.main = new clazz(sender);\r\n    }\r\n};\r\n})(this);"]}