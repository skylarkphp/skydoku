{"version":3,"sources":["mouse/mouse_event.js"],"names":["define","require","exports","module","event","useragent","MouseEvent","domEvent","editor","this","x","clientX","y","clientY","$pos","$inSelection","propagationStopped","defaultPrevented","stopPropagation","preventDefault","stop","getDocumentPosition","renderer","screenToTextCoordinates","inSelection","selectionRange","getSelectionRange","isEmpty","pos","contains","row","column","getButton","getShiftKey","shiftKey","getAccelKey","isMac","metaKey","ctrlKey","call","prototype"],"mappings":";;;;;;;AA8BAA,OAAO,SAASC,QAASC,QAASC,QAClC,aAEA,IAAIC,EAAQH,QAAQ,gBAChBI,EAAYJ,QAAQ,oBAKpBK,EAAaJ,QAAQI,WAAa,SAASC,EAAUC,GACrDC,KAAKF,SAAWA,EAChBE,KAAKD,OAASA,EAEdC,KAAKC,EAAID,KAAKE,QAAUJ,EAASI,QACjCF,KAAKG,EAAIH,KAAKI,QAAUN,EAASM,QAEjCJ,KAAKK,KAAO,KACZL,KAAKM,aAAe,KAEpBN,KAAKO,oBAAqB,EAC1BP,KAAKQ,kBAAmB,IAG5B,WAEIR,KAAKS,gBAAkB,WACnBd,EAAMc,gBAAgBT,KAAKF,UAC3BE,KAAKO,oBAAqB,GAG9BP,KAAKU,eAAiB,WAClBf,EAAMe,eAAeV,KAAKF,UAC1BE,KAAKQ,kBAAmB,GAG5BR,KAAKW,KAAO,WACRX,KAAKS,kBACLT,KAAKU,kBAQTV,KAAKY,oBAAsB,WACvB,OAAIZ,KAAKK,KACEL,KAAKK,MAEhBL,KAAKK,KAAOL,KAAKD,OAAOc,SAASC,wBAAwBd,KAAKE,QAASF,KAAKI,SACrEJ,KAAKK,OAQhBL,KAAKe,YAAc,WACf,GAA0B,OAAtBf,KAAKM,aACL,OAAON,KAAKM,aAEhB,IAGIU,EAHShB,KAAKD,OAGUkB,oBAC5B,GAAID,EAAeE,UACflB,KAAKM,cAAe,MACnB,CACD,IAAIa,EAAMnB,KAAKY,sBACfZ,KAAKM,aAAeU,EAAeI,SAASD,EAAIE,IAAKF,EAAIG,QAG7D,OAAOtB,KAAKM,cAQhBN,KAAKuB,UAAY,WACb,OAAO5B,EAAM4B,UAAUvB,KAAKF,WAMhCE,KAAKwB,YAAc,WACf,OAAOxB,KAAKF,SAAS2B,UAGzBzB,KAAK0B,YAAc9B,EAAU+B,MACvB,WAAa,OAAO3B,KAAKF,SAAS8B,SAClC,WAAa,OAAO5B,KAAKF,SAAS+B,WAEzCC,KAAKjC,EAAWkC","file":"../../mouse/mouse_event.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar event = require(\"../lib/event\");\r\nvar useragent = require(\"../lib/useragent\");\r\n\r\n/*\r\n * Custom Ace mouse event\r\n */\r\nvar MouseEvent = exports.MouseEvent = function(domEvent, editor) {\r\n    this.domEvent = domEvent;\r\n    this.editor = editor;\r\n    \r\n    this.x = this.clientX = domEvent.clientX;\r\n    this.y = this.clientY = domEvent.clientY;\r\n\r\n    this.$pos = null;\r\n    this.$inSelection = null;\r\n    \r\n    this.propagationStopped = false;\r\n    this.defaultPrevented = false;\r\n};\r\n\r\n(function() {  \r\n    \r\n    this.stopPropagation = function() {\r\n        event.stopPropagation(this.domEvent);\r\n        this.propagationStopped = true;\r\n    };\r\n    \r\n    this.preventDefault = function() {\r\n        event.preventDefault(this.domEvent);\r\n        this.defaultPrevented = true;\r\n    };\r\n    \r\n    this.stop = function() {\r\n        this.stopPropagation();\r\n        this.preventDefault();\r\n    };\r\n\r\n    /*\r\n     * Get the document position below the mouse cursor\r\n     * \r\n     * @return {Object} 'row' and 'column' of the document position\r\n     */\r\n    this.getDocumentPosition = function() {\r\n        if (this.$pos)\r\n            return this.$pos;\r\n        \r\n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\r\n        return this.$pos;\r\n    };\r\n    \r\n    /*\r\n     * Check if the mouse cursor is inside of the text selection\r\n     * \r\n     * @return {Boolean} whether the mouse cursor is inside of the selection\r\n     */\r\n    this.inSelection = function() {\r\n        if (this.$inSelection !== null)\r\n            return this.$inSelection;\r\n            \r\n        var editor = this.editor;\r\n        \r\n\r\n        var selectionRange = editor.getSelectionRange();\r\n        if (selectionRange.isEmpty())\r\n            this.$inSelection = false;\r\n        else {\r\n            var pos = this.getDocumentPosition();\r\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\r\n        }\r\n\r\n        return this.$inSelection;\r\n    };\r\n    \r\n    /*\r\n     * Get the clicked mouse button\r\n     * \r\n     * @return {Number} 0 for left button, 1 for middle button, 2 for right button\r\n     */\r\n    this.getButton = function() {\r\n        return event.getButton(this.domEvent);\r\n    };\r\n    \r\n    /*\r\n     * @return {Boolean} whether the shift key was pressed when the event was emitted\r\n     */\r\n    this.getShiftKey = function() {\r\n        return this.domEvent.shiftKey;\r\n    };\r\n    \r\n    this.getAccelKey = useragent.isMac\r\n        ? function() { return this.domEvent.metaKey; }\r\n        : function() { return this.domEvent.ctrlKey; };\r\n    \r\n}).call(MouseEvent.prototype);\r\n\r\n});\r\n"]}