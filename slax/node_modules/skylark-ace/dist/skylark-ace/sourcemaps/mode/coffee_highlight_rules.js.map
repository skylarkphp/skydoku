{"version":3,"sources":["mode/coffee_highlight_rules.js"],"names":["define","require","exports","module","oop","TextHighlightRules","CoffeeHighlightRules","identifier","illegal","keywordMapper","this","createKeywordMapper","keyword","constant.language","invalid.illegal","language.support.class","language.support.function","variable.language","functionRule","token","regex","source","stringEscape","$rules","start","stateName","next","defaultToken","push","onMatch","val","state","stack","length","unshift","shift","indexOf","concat","heregex","comment","normalizeRules","inherits"],"mappings":";;;;;;;AA8BAA,OAAO,SAASC,QAASC,QAASC,QAClC,aAEI,IAAIC,EAAMH,QAAQ,cACdI,EAAqBJ,QAAQ,0BAA0BI,mBAI3D,SAASC,IACL,IAAIC,EAAa,8CAabC,EAAU,0GAsBVC,EAAgBC,KAAKC,qBACrBC,QAlCW,0PAmCXC,oBA5Be,yCA6BfC,kBAAmBN,EACnBO,yBArBe,ySAsBfC,4BAdkB,iHAelBC,oBAVmB,uCAWpB,cAECC,GACAC,OAAQ,eAAgB,qBAAsB,eAAgB,OAAQ,gBACtEC,MAAO,+EAA+EC,QAGtFC,EAAe,4FAEnBZ,KAAKa,QACDC,QAEQL,MAAQ,mBACRC,MAAQ,sEAERK,UAAW,OACXN,MAAQ,SAAUC,MAAQ,MAAOM,OAC5BP,MAAQ,SAAUC,MAAQ,MAAOM,KAAO,UACxCP,MAAQ,2BAA4BC,MAAQE,IAC5CK,aAAc,aAGnBF,UAAW,QACXN,MAAQ,SACRC,MAAQ,MACRM,OACKP,MAAQ,SAAUC,MAAQ,MAAOM,KAAO,UACxCP,MAAQ,eAAgBC,MAAQ,KAAMQ,KAAO,UAC7CT,MAAQ,2BAA4BC,MAAQE,IAC5CK,aAAc,aAGnBF,UAAW,UACXN,MAAQ,SAAUC,MAAQ,IAAKM,OAC1BP,MAAQ,SAAUC,MAAQ,IAAKM,KAAO,UACtCP,MAAQ,2BAA4BC,MAAQE,IAC5CK,aAAc,aAGnBF,UAAW,WACXN,MAAQ,eAAgBC,MAAQ,IAAKM,OAChCP,MAAQ,aAAcC,MAAQ,IAAKM,KAAO,UAC1CP,MAAQ,eAAgBC,MAAQ,KAAMQ,KAAO,UAC7CT,MAAQ,2BAA4BC,MAAQE,IAC5CK,aAAc,aAGnBF,UAAW,KACXN,MAAQ,SAAUC,MAAQ,IAAKM,OAC1BP,MAAQ,SAAUC,MAAQ,IAAKM,KAAO,UACtCP,MAAQ,2BAA4BC,MAAQE,IAC5CK,aAAc,aAGnBP,MAAO,OAAQS,QAAS,SAASC,EAAKC,EAAOC,GAEzC,OADAtB,KAAKgB,KAAO,GACD,KAAPI,GAAcE,EAAMC,QACpBD,EAAME,QAAQ,QAASH,GAChB,SAEA,KAAPD,GAAcE,EAAMC,SACpBD,EAAMG,QACNzB,KAAKgB,KAAOM,EAAMG,SAAW,IACO,GAAhCzB,KAAKgB,KAAKU,QAAQ,WACX,eAER,WAGXjB,MAAQ,eACRC,MAAQ,MACRM,KAAO,YAEPP,MAAQ,eACRC,MAAQ,uHAERD,MAAQ,UACRC,MAAQ,WACRM,KAAO,YAEPP,MAAQ,UACRC,MAAQ,QAERD,OAAS,uBAAwB,OAAQ,cACzCC,MAAQ,eAAiBZ,EAAU,MAEnCW,MAAQ,uBACRC,MAAQ,aAGRD,OAAS,UAAW,OAAQ,yBAC3B,OAAQ,UAAW,OAAQ,0BAC5BC,MAAQ,iBAAmBb,EAAa,6BAA+BA,EAAa,QAGpFY,OAAS,uBAAwB,OAAQ,mBAAoB,QAAQkB,OAAOnB,EAAaC,OACzFC,MAAQ,IAAMb,EAAa,sBAAwBW,EAAaE,OAEpEF,GAEIC,MAAQ,WACRC,MAAQ,OAASb,EAAa,OAE9BY,MAAOV,EACPW,MAAQb,IAERY,MAAQ,uBACRC,MAAQ,YAERD,MAAQ,eACRC,MAAQ,YAERD,MAAQ,mBACRC,MAAQ,8FAERD,MAAQ,eACRC,MAAQ,UAERD,MAAQ,eACRC,MAAQ,YAERD,MAAQ,OACRC,MAAQ,SAIhBkB,UACInB,MAAQ,eACRC,MAAQ,oBACRM,KAAO,UAEPP,MAAQ,gBACRC,MAAQ,iBAERD,MAAQ,eACRC,MAAQ,SAGZmB,UACIpB,MAAQ,UACRC,MAAQ,MACRM,KAAO,UAEPC,aAAe,aAGvBjB,KAAK8B,iBA/LTpC,EAAIqC,SAASnC,EAAsBD,GAkMnCH,QAAQI,qBAAuBA","file":"../../mode/coffee_highlight_rules.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\n    var oop = require(\"../lib/oop\");\r\n    var TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\r\n\r\n    oop.inherits(CoffeeHighlightRules, TextHighlightRules);\r\n\r\n    function CoffeeHighlightRules() {\r\n        var identifier = \"[$A-Za-z_\\\\x7f-\\\\uffff][$\\\\w\\\\x7f-\\\\uffff]*\";\r\n\r\n        var keywords = (\r\n            \"this|throw|then|try|typeof|super|switch|return|break|by|continue|\" +\r\n            \"catch|class|in|instanceof|is|isnt|if|else|extends|for|own|\" +\r\n            \"finally|function|while|when|new|no|not|delete|debugger|do|loop|of|off|\" +\r\n            \"or|on|unless|until|and|yes|yield|export|import|default\"\r\n        );\r\n\r\n        var langConstant = (\r\n            \"true|false|null|undefined|NaN|Infinity\"\r\n        );\r\n\r\n        var illegal = (\r\n            \"case|const|function|var|void|with|enum|implements|\" +\r\n            \"interface|let|package|private|protected|public|static\"\r\n        );\r\n\r\n        var supportClass = (\r\n            \"Array|Boolean|Date|Function|Number|Object|RegExp|ReferenceError|String|\" +\r\n            \"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|\" +\r\n            \"SyntaxError|TypeError|URIError|\"  +\r\n            \"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|\" +\r\n            \"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray\"\r\n        );\r\n\r\n        var supportFunction = (\r\n            \"Math|JSON|isNaN|isFinite|parseInt|parseFloat|encodeURI|\" +\r\n            \"encodeURIComponent|decodeURI|decodeURIComponent|String|\"\r\n        );\r\n\r\n        var variableLanguage = (\r\n            \"window|arguments|prototype|document\"\r\n        );\r\n\r\n        var keywordMapper = this.createKeywordMapper({\r\n            \"keyword\": keywords,\r\n            \"constant.language\": langConstant,\r\n            \"invalid.illegal\": illegal,\r\n            \"language.support.class\": supportClass,\r\n            \"language.support.function\": supportFunction,\r\n            \"variable.language\": variableLanguage\r\n        }, \"identifier\");\r\n\r\n        var functionRule = {\r\n            token: [\"paren.lparen\", \"variable.parameter\", \"paren.rparen\", \"text\", \"storage.type\"],\r\n            regex: /(?:(\\()((?:\"[^\")]*?\"|'[^')]*?'|\\/[^\\/)]*?\\/|[^()\"'\\/])*?)(\\))(\\s*))?([\\-=]>)/.source\r\n        };\r\n\r\n        var stringEscape = /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)/;\r\n\r\n        this.$rules = {\r\n            start : [\r\n                {\r\n                    token : \"constant.numeric\",\r\n                    regex : \"(?:0x[\\\\da-fA-F]+|(?:\\\\d+(?:\\\\.\\\\d+)?|\\\\.\\\\d+)(?:[eE][+-]?\\\\d+)?)\"\r\n                }, {\r\n                    stateName: \"qdoc\",\r\n                    token : \"string\", regex : \"'''\", next : [\r\n                        {token : \"string\", regex : \"'''\", next : \"start\"},\r\n                        {token : \"constant.language.escape\", regex : stringEscape},\r\n                        {defaultToken: \"string\"}\r\n                    ]\r\n                }, {\r\n                    stateName: \"qqdoc\",\r\n                    token : \"string\",\r\n                    regex : '\"\"\"',\r\n                    next : [\r\n                        {token : \"string\", regex : '\"\"\"', next : \"start\"},\r\n                        {token : \"paren.string\", regex : '#{', push : \"start\"},\r\n                        {token : \"constant.language.escape\", regex : stringEscape},\r\n                        {defaultToken: \"string\"}\r\n                    ]\r\n                }, {\r\n                    stateName: \"qstring\",\r\n                    token : \"string\", regex : \"'\", next : [\r\n                        {token : \"string\", regex : \"'\", next : \"start\"},\r\n                        {token : \"constant.language.escape\", regex : stringEscape},\r\n                        {defaultToken: \"string\"}\r\n                    ]\r\n                }, {\r\n                    stateName: \"qqstring\",\r\n                    token : \"string.start\", regex : '\"', next : [\r\n                        {token : \"string.end\", regex : '\"', next : \"start\"},\r\n                        {token : \"paren.string\", regex : '#{', push : \"start\"},\r\n                        {token : \"constant.language.escape\", regex : stringEscape},\r\n                        {defaultToken: \"string\"}\r\n                    ]\r\n                }, {\r\n                    stateName: \"js\",\r\n                    token : \"string\", regex : \"`\", next : [\r\n                        {token : \"string\", regex : \"`\", next : \"start\"},\r\n                        {token : \"constant.language.escape\", regex : stringEscape},\r\n                        {defaultToken: \"string\"}\r\n                    ]\r\n                }, {\r\n                    regex: \"[{}]\", onMatch: function(val, state, stack) {\r\n                        this.next = \"\";\r\n                        if (val == \"{\" && stack.length) {\r\n                            stack.unshift(\"start\", state);\r\n                            return \"paren\";\r\n                        }\r\n                        if (val == \"}\" && stack.length) {\r\n                            stack.shift();\r\n                            this.next = stack.shift() || \"\";\r\n                            if (this.next.indexOf(\"string\") != -1)\r\n                                return \"paren.string\";\r\n                        }\r\n                        return \"paren\";\r\n                    }\r\n                }, {\r\n                    token : \"string.regex\",\r\n                    regex : \"///\",\r\n                    next : \"heregex\"\r\n                }, {\r\n                    token : \"string.regex\",\r\n                    regex : /(?:\\/(?![\\s=])[^[\\/\\n\\\\]*(?:(?:\\\\[\\s\\S]|\\[[^\\]\\n\\\\]*(?:\\\\[\\s\\S][^\\]\\n\\\\]*)*])[^[\\/\\n\\\\]*)*\\/)(?:[imgy]{0,4})(?!\\w)/\r\n                }, {\r\n                    token : \"comment\",\r\n                    regex : \"###(?!#)\",\r\n                    next : \"comment\"\r\n                }, {\r\n                    token : \"comment\",\r\n                    regex : \"#.*\"\r\n                }, {\r\n                    token : [\"punctuation.operator\", \"text\", \"identifier\"],\r\n                    regex : \"(\\\\.)(\\\\s*)(\" + illegal + \")\"\r\n                }, {\r\n                    token : \"punctuation.operator\",\r\n                    regex : \"\\\\.{1,3}\"\r\n                }, {\r\n                    //class A extends B\r\n                    token : [\"keyword\", \"text\", \"language.support.class\",\r\n                     \"text\", \"keyword\", \"text\", \"language.support.class\"],\r\n                    regex : \"(class)(\\\\s+)(\" + identifier + \")(?:(\\\\s+)(extends)(\\\\s+)(\" + identifier + \"))?\"\r\n                }, {\r\n                    //play = (...) ->\r\n                    token : [\"entity.name.function\", \"text\", \"keyword.operator\", \"text\"].concat(functionRule.token),\r\n                    regex : \"(\" + identifier + \")(\\\\s*)([=:])(\\\\s*)\" + functionRule.regex\r\n                }, \r\n                functionRule, \r\n                {\r\n                    token : \"variable\",\r\n                    regex : \"@(?:\" + identifier + \")?\"\r\n                }, {\r\n                    token: keywordMapper,\r\n                    regex : identifier\r\n                }, {\r\n                    token : \"punctuation.operator\",\r\n                    regex : \"\\\\,|\\\\.\"\r\n                }, {\r\n                    token : \"storage.type\",\r\n                    regex : \"[\\\\-=]>\"\r\n                }, {\r\n                    token : \"keyword.operator\",\r\n                    regex : \"(?:[-+*/%<>&|^!?=]=|>>>=?|\\\\-\\\\-|\\\\+\\\\+|::|&&=|\\\\|\\\\|=|<<=|>>=|\\\\?\\\\.|\\\\.{2,3}|[!*+-=><])\"\r\n                }, {\r\n                    token : \"paren.lparen\",\r\n                    regex : \"[({[]\"\r\n                }, {\r\n                    token : \"paren.rparen\",\r\n                    regex : \"[\\\\]})]\"\r\n                }, {\r\n                    token : \"text\",\r\n                    regex : \"\\\\s+\"\r\n                }],\r\n\r\n\r\n            heregex : [{\r\n                token : \"string.regex\",\r\n                regex : '.*?///[imgy]{0,4}',\r\n                next : \"start\"\r\n            }, {\r\n                token : \"comment.regex\",\r\n                regex : \"\\\\s+(?:#.*)?\"\r\n            }, {\r\n                token : \"string.regex\",\r\n                regex : \"\\\\S+\"\r\n            }],\r\n\r\n            comment : [{\r\n                token : \"comment\",\r\n                regex : '###',\r\n                next : \"start\"\r\n            }, {\r\n                defaultToken : \"comment\"\r\n            }]\r\n        };\r\n        this.normalizeRules();\r\n    }\r\n\r\n    exports.CoffeeHighlightRules = CoffeeHighlightRules;\r\n});\r\n"]}