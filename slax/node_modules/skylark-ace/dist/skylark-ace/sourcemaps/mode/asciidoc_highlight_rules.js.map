{"version":3,"sources":["mode/asciidoc_highlight_rules.js"],"names":["define","require","exports","module","oop","TextHighlightRules","AsciidocHighlightRules","quoteRule","ch","test","this","$rules","start","token","regex","next","dissallowDelimitedBlock","include","paragraphEnd","listStart","text","listText","indentedBlock","listingBlock","literalBlock","passthroughBlock","identifierRe","smallPassthrough","commentBlock","tableBlock","noEscape","innerTableBlock","macros","quotes","tokenMap","macro","titleUnderline","singleLineTitle","pageBreak","option","otherBlock","literal","optionalTitle","escape","link","state","stateRules","i","length","rule","args","concat","filter","x","splice","apply","inherits"],"mappings":"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","file":"../../mode/asciidoc_highlight_rules.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\r\n\r\nvar AsciidocHighlightRules = function() {\r\n    var identifierRe = \"[a-zA-Z\\u00a1-\\uffff]+\\\\b\";\r\n\r\n    this.$rules = {\r\n        \"start\": [\r\n            {token: \"empty\",   regex: /$/},\r\n            {token: \"literal\", regex: /^\\.{4,}\\s*$/,  next: \"listingBlock\"},\r\n            {token: \"literal\", regex: /^-{4,}\\s*$/,   next: \"literalBlock\"},\r\n            {token: \"string\",  regex: /^\\+{4,}\\s*$/,  next: \"passthroughBlock\"},\r\n            {token: \"keyword\", regex: /^={4,}\\s*$/},\r\n            {token: \"text\",    regex: /^\\s*$/},\r\n            // immediately return to the start mode without matching anything\r\n            {token: \"empty\", regex: \"\", next: \"dissallowDelimitedBlock\"}\r\n        ],\r\n\r\n        \"dissallowDelimitedBlock\": [\r\n            {include: \"paragraphEnd\"},\r\n            {token: \"comment\", regex: '^//.+$'},\r\n            {token: \"keyword\", regex: \"^(?:NOTE|TIP|IMPORTANT|WARNING|CAUTION):\"},\r\n\r\n            {include: \"listStart\"},\r\n            {token: \"literal\", regex: /^\\s+.+$/, next: \"indentedBlock\"},\r\n            {token: \"empty\",   regex: \"\", next: \"text\"}\r\n        ],\r\n\r\n        \"paragraphEnd\": [\r\n            {token: \"doc.comment\", regex: /^\\/{4,}\\s*$/,    next: \"commentBlock\"},\r\n            {token: \"tableBlock\",  regex: /^\\s*[|!]=+\\s*$/, next: \"tableBlock\"},\r\n            // open block, ruller\r\n            {token: \"keyword\",     regex: /^(?:--|''')\\s*$/, next: \"start\"},\r\n            {token: \"option\",      regex: /^\\[.*\\]\\s*$/,     next: \"start\"},\r\n            {token: \"pageBreak\",   regex: /^>{3,}$/,         next: \"start\"},\r\n            {token: \"literal\",     regex: /^\\.{4,}\\s*$/,     next: \"listingBlock\"},\r\n            {token: \"titleUnderline\",    regex: /^(?:={2,}|-{2,}|~{2,}|\\^{2,}|\\+{2,})\\s*$/, next: \"start\"},\r\n            {token: \"singleLineTitle\",   regex: /^={1,5}\\s+\\S.*$/, next: \"start\"},\r\n\r\n            {token: \"otherBlock\",    regex: /^(?:\\*{2,}|_{2,})\\s*$/, next: \"start\"},\r\n            // .optional title\r\n            {token: \"optionalTitle\", regex: /^\\.[^.\\s].+$/,  next: \"start\"}\r\n        ],\r\n\r\n        \"listStart\": [\r\n            {token: \"keyword\",  regex: /^\\s*(?:\\d+\\.|[a-zA-Z]\\.|[ixvmIXVM]+\\)|\\*{1,5}|-|\\.{1,5})\\s/, next: \"listText\"},\r\n            {token: \"meta.tag\", regex: /^.+(?::{2,4}|;;)(?: |$)/, next: \"listText\"},\r\n            {token: \"support.function.list.callout\", regex: /^(?:<\\d+>|\\d+>|>) /, next: \"text\"},\r\n            // continuation\r\n            {token: \"keyword\",  regex: /^\\+\\s*$/, next: \"start\"}\r\n        ],\r\n\r\n        \"text\": [\r\n            {token: [\"link\", \"variable.language\"], regex: /((?:https?:\\/\\/|ftp:\\/\\/|file:\\/\\/|mailto:|callto:)[^\\s\\[]+)(\\[.*?\\])/},\r\n            {token: \"link\", regex: /(?:https?:\\/\\/|ftp:\\/\\/|file:\\/\\/|mailto:|callto:)[^\\s\\[]+/},\r\n            {token: \"link\", regex: /\\b[\\w\\.\\/\\-]+@[\\w\\.\\/\\-]+\\b/},\r\n            {include: \"macros\"},\r\n            {include: \"paragraphEnd\"},\r\n            {token: \"literal\", regex:/\\+{3,}/, next:\"smallPassthrough\"},\r\n            {token: \"escape\", regex: /\\((?:C|TM|R)\\)|\\.{3}|->|<-|=>|<=|&#(?:\\d+|x[a-fA-F\\d]+);|(?: |^)--(?=\\s+\\S)/},\r\n            {token: \"escape\", regex: /\\\\[_*'`+#]|\\\\{2}[_*'`+#]{2}/},\r\n            {token: \"keyword\", regex: /\\s\\+$/},\r\n            // any word\r\n            {token: \"text\", regex: identifierRe},\r\n            {token: [\"keyword\", \"string\", \"keyword\"],\r\n                regex: /(<<[\\w\\d\\-$]+,)(.*?)(>>|$)/},\r\n            {token: \"keyword\", regex: /<<[\\w\\d\\-$]+,?|>>/},\r\n            {token: \"constant.character\", regex: /\\({2,3}.*?\\){2,3}/},\r\n            // Anchor\r\n            {token: \"keyword\", regex: /\\[\\[.+?\\]\\]/},\r\n            // bibliography\r\n            {token: \"support\", regex: /^\\[{3}[\\w\\d =\\-]+\\]{3}/},\r\n\r\n            {include: \"quotes\"},\r\n            // text block end\r\n            {token: \"empty\", regex: /^\\s*$/, next: \"start\"}\r\n        ],\r\n\r\n        \"listText\": [\r\n            {include: \"listStart\"},\r\n            {include: \"text\"}\r\n        ],\r\n\r\n        \"indentedBlock\": [\r\n            {token: \"literal\", regex: /^[\\s\\w].+$/, next: \"indentedBlock\"},\r\n            {token: \"literal\", regex: \"\", next: \"start\"}\r\n        ],\r\n\r\n        \"listingBlock\": [\r\n            {token: \"literal\", regex: /^\\.{4,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"constant.numeric\", regex: '<\\\\d+>'},\r\n            {token: \"literal\", regex: '[^<]+'},\r\n            {token: \"literal\", regex: '<'}\r\n        ],\r\n        \"literalBlock\": [\r\n            {token: \"literal\", regex: /^-{4,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"constant.numeric\", regex: '<\\\\d+>'},\r\n            {token: \"literal\", regex: '[^<]+'},\r\n            {token: \"literal\", regex: '<'}\r\n        ],\r\n        \"passthroughBlock\": [\r\n            {token: \"literal\", regex: /^\\+{4,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"literal\", regex: identifierRe + \"|\\\\d+\"},\r\n            {include: \"macros\"},\r\n            {token: \"literal\", regex: \".\"}\r\n        ],\r\n\r\n        \"smallPassthrough\": [\r\n            {token: \"literal\", regex: /[+]{3,}/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"literal\", regex: /^\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"literal\", regex: identifierRe + \"|\\\\d+\"},\r\n            {include: \"macros\"}\r\n        ],\r\n\r\n        \"commentBlock\": [\r\n            {token: \"doc.comment\", regex: /^\\/{4,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"doc.comment\", regex: '^.*$'}\r\n        ],\r\n        \"tableBlock\": [\r\n            {token: \"tableBlock\", regex: /^\\s*\\|={3,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"tableBlock\", regex: /^\\s*!={3,}\\s*$/, next: \"innerTableBlock\"},\r\n            {token: \"tableBlock\", regex: /\\|/},\r\n            {include: \"text\", noEscape: true}\r\n        ],\r\n        \"innerTableBlock\": [\r\n            {token: \"tableBlock\", regex: /^\\s*!={3,}\\s*$/, next: \"tableBlock\"},\r\n            {token: \"tableBlock\", regex: /^\\s*|={3,}\\s*$/, next: \"dissallowDelimitedBlock\"},\r\n            {token: \"tableBlock\", regex: /!/}\r\n        ],\r\n        \"macros\": [\r\n            {token: \"macro\", regex: /{[\\w\\-$]+}/},\r\n            {token: [\"text\", \"string\", \"text\", \"constant.character\", \"text\"], regex: /({)([\\w\\-$]+)(:)?(.+)?(})/},\r\n            {token: [\"text\", \"markup.list.macro\", \"keyword\", \"string\"], regex: /(\\w+)(footnote(?:ref)?::?)([^\\s\\[]+)?(\\[.*?\\])?/},\r\n            {token: [\"markup.list.macro\", \"keyword\", \"string\"], regex: /([a-zA-Z\\-][\\w\\.\\/\\-]*::?)([^\\s\\[]+)(\\[.*?\\])?/},\r\n            {token: [\"markup.list.macro\", \"keyword\"], regex: /([a-zA-Z\\-][\\w\\.\\/\\-]+::?)(\\[.*?\\])/},\r\n            {token: \"keyword\",     regex: /^:.+?:(?= |$)/}\r\n        ],\r\n\r\n        \"quotes\": [\r\n            {token: \"string.italic\", regex: /__[^_\\s].*?__/},\r\n            {token: \"string.italic\", regex: quoteRule(\"_\")},\r\n            \r\n            {token: \"keyword.bold\", regex: /\\*\\*[^*\\s].*?\\*\\*/},\r\n            {token: \"keyword.bold\", regex: quoteRule(\"\\\\*\")},\r\n            \r\n            {token: \"literal\", regex: quoteRule(\"\\\\+\")},\r\n            {token: \"literal\", regex: /\\+\\+[^+\\s].*?\\+\\+/},\r\n            {token: \"literal\", regex: /\\$\\$.+?\\$\\$/},\r\n            {token: \"literal\", regex: quoteRule(\"`\")},\r\n\r\n            {token: \"keyword\", regex: quoteRule(\"^\")},\r\n            {token: \"keyword\", regex: quoteRule(\"~\")},\r\n            {token: \"keyword\", regex: /##?/},\r\n            {token: \"keyword\", regex: /(?:\\B|^)``|\\b''/}\r\n        ]\r\n\r\n    };\r\n\r\n    function quoteRule(ch) {\r\n        var prefix = /\\w/.test(ch) ? \"\\\\b\" : \"(?:\\\\B|^)\";\r\n        return prefix + ch + \"[^\" + ch + \"].*?\" + ch + \"(?![\\\\w*])\";\r\n    }\r\n\r\n    //addQuoteBlock(\"text\")\r\n\r\n    var tokenMap = {\r\n        macro: \"constant.character\",\r\n        tableBlock: \"doc.comment\",\r\n        titleUnderline: \"markup.heading\",\r\n        singleLineTitle: \"markup.heading\",\r\n        pageBreak: \"string\",\r\n        option: \"string.regexp\",\r\n        otherBlock: \"markup.list\",\r\n        literal: \"support.function\",\r\n        optionalTitle: \"constant.numeric\",\r\n        escape: \"constant.language.escape\",\r\n        link: \"markup.underline.list\"\r\n    };\r\n\r\n    for (var state in this.$rules) {\r\n        var stateRules = this.$rules[state];\r\n        for (var i = stateRules.length; i--; ) {\r\n            var rule = stateRules[i];\r\n            if (rule.include || typeof rule == \"string\") {\r\n                var args = [i, 1].concat(this.$rules[rule.include || rule]);\r\n                if (rule.noEscape) {\r\n                    args = args.filter(function(x) {\r\n                        return !x.next;\r\n                    });\r\n                }\r\n                stateRules.splice.apply(stateRules, args);\r\n            } else if (rule.token in tokenMap) {\r\n                rule.token = tokenMap[rule.token];\r\n            }\r\n        }\r\n    }\r\n};\r\noop.inherits(AsciidocHighlightRules, TextHighlightRules);\r\n\r\nexports.AsciidocHighlightRules = AsciidocHighlightRules;\r\n});\r\n"]}