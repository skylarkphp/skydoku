{"version":3,"sources":["mode/coldfusion_highlight_rules.js"],"names":["define","require","exports","module","oop","JavaScriptHighlightRules","HtmlHighlightRules","ColdfusionHighlightRules","call","this","$rules","tag","token","start","group","slice","jsAndCss","Object","keys","filter","x","test","embedRules","cfmlComment","regex","push","next","defaultToken","concat","cfTag","include","forEach","s","unshift","embedTagRules","jsx","getRules","normalizeRules","inherits"],"mappings":";;;;;;;AA8BAA,OAAO,SAASC,QAASC,QAASC,QAClC,aAEA,IAAIC,EAAMH,QAAQ,cACdI,EAA2BJ,QAAQ,gCAAgCI,yBACnEC,EAAqBL,QAAQ,0BAA0BK,mBAEvDC,EAA2B,WAC3BD,EAAmBE,KAAKC,MACxBA,KAAKC,OAAOC,IAAI,GAAGC,MAAQ,SAAUC,EAAOF,GACxC,IAAIG,EAA0B,MAAlBH,EAAII,MAAM,EAAE,GAAa,UAAY,WACjD,OAAQ,yBAAoC,KAATF,EAAe,GAAK,QAAU,eAC7DC,EAAQ,kBAGhB,IAAIE,EAAWC,OAAOC,KAAKT,KAAKC,QAAQS,OAAO,SAASC,GACpD,MAAO,aAAaC,KAAKD,KAE7BX,KAAKa,YACDC,cACMC,MAAO,WAASZ,MAAO,gBAAiBa,KAAM,gBAC9CD,MAAO,UAAQZ,MAAO,cAAec,KAAM,QAC3CC,aAAc,aAErB,KACGH,MAAO,WAASZ,MAAO,gBAAiBa,KAAM,iBAEhD,UAAW,QAAS,iBAAkB,SACxCG,OAAOZ,IAGTP,KAAKC,OAAOmB,QACPC,QAAU,eACVlB,MAAQ,qCAAsCY,MAAQ,MAAOE,KAAO,QAEzE,IAAIG,GACAjB,MAAQ,SAASC,EAAOF,GACpB,OAAQ,yBAAoC,KAATE,EAAe,GAAK,QAAU,eAC7D,yBAERW,MAAQ,4BACRC,KAAM,SAEVT,EAASe,QAAQ,SAASC,GACtBvB,KAAKC,OAAOsB,GAAGC,QAAQJ,IACxBpB,MAEHA,KAAKyB,cAAc,IAAI7B,GAA0B8B,KAAK,IAAQC,WAAY,QAAS,YAEnF3B,KAAK4B,kBAGTjC,EAAIkC,SAAS/B,EAA0BD,GAEvCJ,QAAQK,yBAA2BA","file":"../../mode/coldfusion_highlight_rules.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar JavaScriptHighlightRules = require(\"./javascript_highlight_rules\").JavaScriptHighlightRules;\r\nvar HtmlHighlightRules = require(\"./html_highlight_rules\").HtmlHighlightRules;\r\n\r\nvar ColdfusionHighlightRules = function() {\r\n    HtmlHighlightRules.call(this);\r\n    this.$rules.tag[2].token = function (start, tag) {\r\n        var group = tag.slice(0,2) == \"cf\" ? \"keyword\" : \"meta.tag\";\r\n        return [\"meta.tag.punctuation.\" + (start == \"<\" ? \"\" : \"end-\") + \"tag-open.xml\",\r\n            group + \".tag-name.xml\"];\r\n    };\r\n\r\n    var jsAndCss = Object.keys(this.$rules).filter(function(x) {\r\n        return /^(js|css)-/.test(x);\r\n    });\r\n    this.embedRules({\r\n        cfmlComment: [\r\n            { regex: \"<!---\", token: \"comment.start\", push: \"cfmlComment\"}, \r\n            { regex: \"--->\", token: \"comment.end\", next: \"pop\"},\r\n            { defaultToken: \"comment\"}\r\n        ]\r\n    }, \"\", [\r\n        { regex: \"<!---\", token: \"comment.start\", push: \"cfmlComment\"}\r\n    ], [\r\n        \"comment\", \"start\", \"tag_whitespace\", \"cdata\"\r\n    ].concat(jsAndCss));\r\n    \r\n    \r\n    this.$rules.cfTag = [\r\n        {include : \"attributes\"},\r\n        {token : \"meta.tag.punctuation.tag-close.xml\", regex : \"/?>\", next : \"pop\"}\r\n    ];\r\n    var cfTag = {\r\n        token : function(start, tag) {\r\n            return [\"meta.tag.punctuation.\" + (start == \"<\" ? \"\" : \"end-\") + \"tag-open.xml\",\r\n                \"keyword.tag-name.xml\"];\r\n        },\r\n        regex : \"(</?)(cf[-_a-zA-Z0-9:.]+)\",\r\n        push: \"cfTag\"\r\n    };\r\n    jsAndCss.forEach(function(s) {\r\n        this.$rules[s].unshift(cfTag);\r\n    }, this);\r\n    \r\n    this.embedTagRules(new JavaScriptHighlightRules({jsx: false}).getRules(), \"cfjs-\", \"cfscript\");\r\n\r\n    this.normalizeRules();\r\n};\r\n\r\noop.inherits(ColdfusionHighlightRules, HtmlHighlightRules);\r\n\r\nexports.ColdfusionHighlightRules = ColdfusionHighlightRules;\r\n});\r\n"]}