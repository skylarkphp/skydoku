{"version":3,"sources":["mode/lua_highlight_rules.js"],"names":["define","require","exports","module","oop","TextHighlightRules","LuaHighlightRules","keywordMapper","this","createKeywordMapper","keyword","support.function","keyword.deprecated","constant.library","constant.language","variable.language","$rules","start","stateName","onMatch","value","currentState","stack","unshift","next","length","regex","shift","defaultToken","token","integer","normalizeRules","inherits"],"mappings":";;;;;;;AA8BAA,OAAO,SAASC,QAASC,QAASC,QAClC,aAEA,IAAIC,EAAMH,QAAQ,cACdI,EAAqBJ,QAAQ,0BAA0BI,mBAEvDC,EAAoB,WAEpB,IAsCIC,EAAgBC,KAAKC,qBACrBC,QAvCW,8FAwCXC,mBAjCY,omCAkCZC,qBALmB,0CAMnBC,mBARc,kDASdC,oBAtCmB,6BAuCnBC,oBAAqB,QACtB,cAWHP,KAAKQ,QACDC,QACIC,UAAW,mBACXC,QAAU,SAASC,EAAOC,EAAcC,GAEpC,OADAA,EAAMC,QAAQf,KAAKgB,KAAMJ,EAAMK,OAAS,EAAGJ,GACpC,WAEXK,MAAQ,aACRF,OAEQL,QAAU,SAASC,EAAOC,EAAcC,GAQpC,OAPIF,EAAMK,QAAUH,EAAM,IACtBA,EAAMK,QACNL,EAAMK,QACNnB,KAAKgB,KAAOF,EAAMK,SAElBnB,KAAKgB,KAAO,GAET,WAEXE,MAAQ,SACRF,KAAQ,UAERI,aAAe,cAMvBC,MAAQ,UACRH,MAAQ,cAGRR,UAAW,kBACXC,QAAU,SAASC,EAAOC,EAAcC,GAEpC,OADAA,EAAMC,QAAQf,KAAKgB,KAAMJ,EAAMK,OAAQJ,GAChC,gBAEXK,MAAQ,SACRF,OAEQL,QAAU,SAASC,EAAOC,EAAcC,GAQpC,OAPIF,EAAMK,QAAUH,EAAM,IACtBA,EAAMK,QACNL,EAAMK,QACNnB,KAAKgB,KAAOF,EAAMK,SAElBnB,KAAKgB,KAAO,GAET,cAGXE,MAAQ,SACRF,KAAQ,UAERI,aAAe,aAKvBC,MAAQ,SACRH,MAAQ,0BAERG,MAAQ,SACRH,MAAQ,0BAERG,MAAQ,mBACRH,MArEU,qDAuEVG,MAAQ,mBACRH,MAAQI,yDAERD,MAAQtB,EACRmB,MAAQ,gCAERG,MAAQ,mBACRH,MAAQ,uEAERG,MAAQ,eACRH,MAAQ,gBAERG,MAAQ,eACRH,MAAQ,gBAERG,MAAQ,OACRH,MAAQ,eAIhBlB,KAAKuB,kBAGT3B,EAAI4B,SAAS1B,EAAmBD,GAEhCH,QAAQI,kBAAoBA","file":"../../mode/lua_highlight_rules.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\r\n\r\nvar LuaHighlightRules = function() {\r\n\r\n    var keywords = (\r\n        \"break|do|else|elseif|end|for|function|if|in|local|repeat|\"+\r\n         \"return|then|until|while|or|and|not\"\r\n    );\r\n\r\n    var builtinConstants = (\"true|false|nil|_G|_VERSION\");\r\n\r\n    var functions = (\r\n      // builtinFunctions\r\n        \"string|xpcall|package|tostring|print|os|unpack|require|\"+\r\n        \"getfenv|setmetatable|next|assert|tonumber|io|rawequal|\"+\r\n        \"collectgarbage|getmetatable|module|rawset|math|debug|\"+\r\n        \"pcall|table|newproxy|type|coroutine|_G|select|gcinfo|\"+\r\n        \"pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|\"+\r\n        \"load|error|loadfile|\"+\r\n\r\n        \"sub|upper|len|gfind|rep|find|match|char|dump|gmatch|\"+\r\n        \"reverse|byte|format|gsub|lower|preload|loadlib|loaded|\"+\r\n        \"loaders|cpath|config|path|seeall|exit|setlocale|date|\"+\r\n        \"getenv|difftime|remove|time|clock|tmpname|rename|execute|\"+\r\n        \"lines|write|close|flush|open|output|type|read|stderr|\"+\r\n        \"stdin|input|stdout|popen|tmpfile|log|max|acos|huge|\"+\r\n        \"ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|\"+\r\n        \"frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|\"+\r\n        \"atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|\"+\r\n        \"gethook|setmetatable|setlocal|traceback|setfenv|getinfo|\"+\r\n        \"setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|\"+\r\n        \"foreachi|maxn|foreach|concat|sort|remove|resume|yield|\"+\r\n        \"status|wrap|create|running|\"+\r\n      // metatableMethods\r\n        \"__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|\"+\r\n         \"__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber\"\r\n    );\r\n\r\n    var stdLibaries = (\"string|package|os|io|math|debug|table|coroutine\");\r\n\r\n    var deprecatedIn5152 = (\"setn|foreach|foreachi|gcinfo|log10|maxn\");\r\n\r\n    var keywordMapper = this.createKeywordMapper({\r\n        \"keyword\": keywords,\r\n        \"support.function\": functions,\r\n        \"keyword.deprecated\": deprecatedIn5152,\r\n        \"constant.library\": stdLibaries,\r\n        \"constant.language\": builtinConstants,\r\n        \"variable.language\": \"self\"\r\n    }, \"identifier\");\r\n\r\n    var decimalInteger = \"(?:(?:[1-9]\\\\d*)|(?:0))\";\r\n    var hexInteger = \"(?:0[xX][\\\\dA-Fa-f]+)\";\r\n    var integer = \"(?:\" + decimalInteger + \"|\" + hexInteger + \")\";\r\n\r\n    var fraction = \"(?:\\\\.\\\\d+)\";\r\n    var intPart = \"(?:\\\\d+)\";\r\n    var pointFloat = \"(?:(?:\" + intPart + \"?\" + fraction + \")|(?:\" + intPart + \"\\\\.))\";\r\n    var floatNumber = \"(?:\" + pointFloat + \")\";\r\n\r\n    this.$rules = {\r\n        \"start\" : [{\r\n            stateName: \"bracketedComment\",\r\n            onMatch : function(value, currentState, stack){\r\n                stack.unshift(this.next, value.length - 2, currentState);\r\n                return \"comment\";\r\n            },\r\n            regex : /\\-\\-\\[=*\\[/,\r\n            next  : [\r\n                {\r\n                    onMatch : function(value, currentState, stack) {\r\n                        if (value.length == stack[1]) {\r\n                            stack.shift();\r\n                            stack.shift();\r\n                            this.next = stack.shift();\r\n                        } else {\r\n                            this.next = \"\";\r\n                        }\r\n                        return \"comment\";\r\n                    },\r\n                    regex : /\\]=*\\]/,\r\n                    next  : \"start\"\r\n                }, {\r\n                    defaultToken : \"comment\"\r\n                }\r\n            ]\r\n        },\r\n\r\n        {\r\n            token : \"comment\",\r\n            regex : \"\\\\-\\\\-.*$\"\r\n        },\r\n        {\r\n            stateName: \"bracketedString\",\r\n            onMatch : function(value, currentState, stack){\r\n                stack.unshift(this.next, value.length, currentState);\r\n                return \"string.start\";\r\n            },\r\n            regex : /\\[=*\\[/,\r\n            next  : [\r\n                {\r\n                    onMatch : function(value, currentState, stack) {\r\n                        if (value.length == stack[1]) {\r\n                            stack.shift();\r\n                            stack.shift();\r\n                            this.next = stack.shift();\r\n                        } else {\r\n                            this.next = \"\";\r\n                        }\r\n                        return \"string.end\";\r\n                    },\r\n                    \r\n                    regex : /\\]=*\\]/,\r\n                    next  : \"start\"\r\n                }, {\r\n                    defaultToken : \"string\"\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            token : \"string\",           // \" string\r\n            regex : '\"(?:[^\\\\\\\\]|\\\\\\\\.)*?\"'\r\n        }, {\r\n            token : \"string\",           // ' string\r\n            regex : \"'(?:[^\\\\\\\\]|\\\\\\\\.)*?'\"\r\n        }, {\r\n            token : \"constant.numeric\", // float\r\n            regex : floatNumber\r\n        }, {\r\n            token : \"constant.numeric\", // integer\r\n            regex : integer + \"\\\\b\"\r\n        }, {\r\n            token : keywordMapper,\r\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\r\n        }, {\r\n            token : \"keyword.operator\",\r\n            regex : \"\\\\+|\\\\-|\\\\*|\\\\/|%|\\\\#|\\\\^|~|<|>|<=|=>|==|~=|=|\\\\:|\\\\.\\\\.\\\\.|\\\\.\\\\.\"\r\n        }, {\r\n            token : \"paren.lparen\",\r\n            regex : \"[\\\\[\\\\(\\\\{]\"\r\n        }, {\r\n            token : \"paren.rparen\",\r\n            regex : \"[\\\\]\\\\)\\\\}]\"\r\n        }, {\r\n            token : \"text\",\r\n            regex : \"\\\\s+|\\\\w+\"\r\n        } ]\r\n    };\r\n    \r\n    this.normalizeRules();\r\n};\r\n\r\noop.inherits(LuaHighlightRules, TextHighlightRules);\r\n\r\nexports.LuaHighlightRules = LuaHighlightRules;\r\n});\r\n"]}