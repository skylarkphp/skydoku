{"version":3,"sources":["mode/ftl_highlight_rules.js"],"names":["define","require","exports","module","oop","HtmlHighlightRules","TextHighlightRules","FtlLangHighlightRules","this","$rules","start","token","regex","next","value","match","qstring","defaultToken","inherits","FtlHighlightRules","call","startRules","push","key","unshift","apply","embedRules","addRules","ftl-dcomment","normalizeRules"],"mappings":";;;;;;;AA8BAA,OAAO,SAASC,EAASC,EAASC,GAClC,aAEA,IAAIC,EAAMH,EAAQ,cACdI,EAAqBJ,EAAQ,0BAA0BI,mBACvDC,EAAqBL,EAAQ,0BAA0BK,mBAEvDC,EAAwB,WA6BxBC,KAAKC,QACDC,QACIC,MAAQ,4BACRC,MAAQ,YAERD,MAAQ,mBACRC,MAAQ,snBAERD,MAAQ,8BACRC,MAAQ,2CAERD,MAAQ,oBACRC,MAAQ,4JAERD,MAAQ,oBACRC,MAAQ,uBAERD,MAAQ,mBACRC,MAAQ,wCAERD,MAAQ,8BACRC,MAzBS,mMA2BTD,MAAQ,SACRC,MAAQ,OACRC,KAAO,YAIPF,MAAQ,SAASG,GACb,OAAIA,EAAMC,MAAM,kDACL,mBAEA,YAGfH,MAAQ,cAERD,MAAQ,mBACRC,MAAQ,mIAERD,MAAQ,eACRC,MAAQ,UAERD,MAAQ,eACRC,MAAQ,YAERD,MAAQ,OACRC,MAAQ,SAGZI,UACIL,MAAQ,4BACRC,MAAQ,uBAERD,MAAQ,SACRC,MAAQ,OACRC,KAAO,UAEPI,aAAe,aAK3Bb,EAAIc,SAASX,EAAuBD,GAEpC,IAAIa,EAAoB,WACpBd,EAAmBe,KAAKZ,MAExB,IAIIa,IAEIV,MAAQ,UACRC,MAAQ,OACRC,KAAO,iBAEPF,MAAQ,sBACRC,MAAQ,OACRU,KAAQ,cAERX,MAAQ,mBACRC,MAAS,gOACTU,KAAO,cAEPX,MAAQ,gBACRC,MAAQ,mBACRU,KAAO,cAgBf,IAAK,IAAIC,KAAOf,KAAKC,OACjBD,KAAKC,OAAOc,GAAKC,QAAQC,MAAMjB,KAAKC,OAAOc,GAAMF,GAErDb,KAAKkB,WAAWnB,EAAuB,SAbhCI,MAAQ,UACPC,MAAQ,MACRC,KAAQ,QAERF,MAAQ,sBACRC,MAAQ,IACRC,KAAQ,SAO0C,UAE1DL,KAAKmB,UACDC,iBACIjB,MAAQ,UACRC,MAAQ,SACRC,KAAO,QAEPI,aAAe,cAIvBT,KAAKqB,kBAGTzB,EAAIc,SAASC,EAAmBd,GAEhCH,EAAQiB,kBAAoBA","file":"../../mode/ftl_highlight_rules.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nvar oop = require(\"../lib/oop\");\r\nvar HtmlHighlightRules = require(\"./html_highlight_rules\").HtmlHighlightRules;\r\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\r\n\r\nvar FtlLangHighlightRules = function () {\r\n\r\n    var stringBuiltIns = \"\\\\?|substring|cap_first|uncap_first|capitalize|chop_linebreak|date|time|datetime|\"\r\n        + \"ends_with|html|groups|index_of|j_string|js_string|json_string|last_index_of|length|lower_case|\"\r\n        + \"left_pad|right_pad|contains|matches|number|replace|rtf|url|split|starts_with|string|trim|\"\r\n        + \"upper_case|word_list|xhtml|xml\";\r\n    var numberBuiltIns = \"c|round|floor|ceiling\";\r\n    var dateBuiltIns = \"iso_[a-z_]+\";\r\n    var seqBuiltIns = \"first|last|seq_contains|seq_index_of|seq_last_index_of|reverse|size|sort|sort_by|chunk\";\r\n    var hashBuiltIns = \"keys|values\";\r\n    var xmlBuiltIns = \"children|parent|root|ancestors|node_name|node_type|node_namespace\";\r\n    var expertBuiltIns = \"byte|double|float|int|long|short|number_to_date|number_to_time|number_to_datetime|\"\r\n        + \"eval|has_content|interpret|is_[a-z_]+|namespacenew\";\r\n    var allBuiltIns = stringBuiltIns + numberBuiltIns + dateBuiltIns + seqBuiltIns + hashBuiltIns\r\n        + xmlBuiltIns + expertBuiltIns;\r\n\r\n    var deprecatedBuiltIns = \"default|exists|if_exists|web_safe\";\r\n\r\n    var variables = \"data_model|error|globals|lang|locale|locals|main|namespace|node|current_node|\"\r\n        + \"now|output_encoding|template_name|url_escaping_charset|vars|version\";\r\n\r\n    var operators = \"gt|gte|lt|lte|as|in|using\";\r\n\r\n    var reserved = \"true|false\";\r\n\r\n    var attributes = \"encoding|parse|locale|number_format|date_format|time_format|datetime_format|time_zone|\"\r\n        + \"url_escaping_charset|classic_compatible|strip_whitespace|strip_text|strict_syntax|ns_prefixes|\"\r\n        + \"attributes\";\r\n\r\n    this.$rules = {\r\n        \"start\" : [{\r\n            token : \"constant.character.entity\",\r\n            regex : /&[^;]+;/\r\n        }, {\r\n            token : \"support.function\",\r\n            regex : \"\\\\?(\"+allBuiltIns+\")\"\r\n        },  {\r\n            token : \"support.function.deprecated\",\r\n            regex : \"\\\\?(\"+deprecatedBuiltIns+\")\"\r\n        }, {\r\n            token : \"language.variable\",\r\n            regex : \"\\\\.(?:\"+variables+\")\"\r\n        }, {\r\n            token : \"constant.language\",\r\n            regex : \"\\\\b(\"+reserved+\")\\\\b\"\r\n        }, {\r\n            token : \"keyword.operator\",\r\n            regex : \"\\\\b(?:\"+operators+\")\\\\b\"\r\n        }, {\r\n            token : \"entity.other.attribute-name\",\r\n            regex : attributes\r\n        }, {\r\n            token : \"string\", //\r\n            regex : /['\"]/,\r\n            next : \"qstring\"\r\n        }, {\r\n            // Deal with variable names that contains number\r\n            // e.g. <#if var42 == 42 >\r\n            token : function(value) {\r\n                if (value.match(\"^[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?$\")) {\r\n                    return \"constant.numeric\";\r\n                } else {\r\n                    return \"variable\";\r\n                }\r\n            },\r\n            regex : /[\\w.+\\-]+/\r\n        }, {\r\n            token : \"keyword.operator\",\r\n            regex : \"!|\\\\.|\\\\$|%|&|\\\\*|\\\\-\\\\-|\\\\-|\\\\+\\\\+|\\\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|&&|\\\\|\\\\||\\\\?\\\\:|\\\\*=|%=|\\\\+=|\\\\-=|&=|\\\\^=\"\r\n        }, {\r\n            token : \"paren.lparen\",\r\n            regex : \"[[({]\"\r\n        }, {\r\n            token : \"paren.rparen\",\r\n            regex : \"[\\\\])}]\"\r\n        }, {\r\n            token : \"text\",\r\n            regex : \"\\\\s+\"\r\n        }],\r\n\r\n        \"qstring\" : [{\r\n            token : \"constant.character.escape\",\r\n            regex : '\\\\\\\\[nrtvef\\\\\\\\\"$]'\r\n        }, {\r\n            token : \"string\",\r\n            regex : /['\"]/,\r\n            next : \"start\"\r\n        }, {\r\n            defaultToken : \"string\"\r\n        }]\r\n    };\r\n};\r\n\r\noop.inherits(FtlLangHighlightRules, TextHighlightRules);\r\n\r\nvar FtlHighlightRules = function() {\r\n    HtmlHighlightRules.call(this);\r\n\r\n    var directives = \"assign|attempt|break|case|compress|default|elseif|else|escape|fallback|function|flush|\"\r\n        + \"ftl|global|if|import|include|list|local|lt|macro|nested|noescape|noparse|nt|recover|recurse|return|rt|\"\r\n        + \"setting|stop|switch|t|visit\";\r\n\r\n    var startRules = [\r\n        {\r\n            token : \"comment\",\r\n            regex : \"<#--\",\r\n            next : \"ftl-dcomment\"\r\n        }, {\r\n            token : \"string.interpolated\",\r\n            regex : \"\\\\${\",\r\n            push  : \"ftl-start\"\r\n        }, {\r\n            token : \"keyword.function\",\r\n            regex :  \"</?#(\"+directives+\")\",\r\n            push : \"ftl-start\"\r\n        }, {\r\n            token : \"keyword.other\",\r\n            regex : \"</?@[a-zA-Z\\\\.]+\",\r\n            push : \"ftl-start\"\r\n        }\r\n    ];\r\n\r\n    var endRules = [\r\n        {\r\n           token : \"keyword\",\r\n            regex : \"/?>\",\r\n            next  : \"pop\"\r\n        }, {\r\n            token : \"string.interpolated\",\r\n            regex : \"}\",\r\n            next  : \"pop\"\r\n        }\r\n    ];\r\n\r\n    for (var key in this.$rules)\r\n        this.$rules[key].unshift.apply(this.$rules[key], startRules);\r\n\r\n    this.embedRules(FtlLangHighlightRules, \"ftl-\", endRules, [\"start\"]);\r\n\r\n    this.addRules({\r\n        \"ftl-dcomment\" : [{\r\n            token : \"comment\",\r\n            regex : \"-->\",\r\n            next : \"pop\"\r\n        }, {\r\n            defaultToken : \"comment\"\r\n        }]\r\n    });\r\n\r\n    this.normalizeRules();\r\n};\r\n\r\noop.inherits(FtlHighlightRules, HtmlHighlightRules);\r\n\r\nexports.FtlHighlightRules = FtlHighlightRules;\r\n});\r\n\r\n"]}