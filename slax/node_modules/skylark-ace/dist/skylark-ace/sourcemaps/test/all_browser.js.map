{"version":3,"sources":["test/all_browser.js"],"names":["define","require","exports","module","mockdom","AsyncTest","test","async","passed","failed","log","document","getElementById","el","createElement","bind","testNames","html","i","href","push","replace","nav","innerHTML","join","style","cssText","body","appendChild","location","search","indexOf","real","mock","VirtualRenderer","MockRenderer","position","left","top","width","height","loadInBrowser","window","parts","split","filter","Boolean","hash","substr","onhashchange","reload","tests","map","x","list","expand","Object","keys","forEach","method","match","undefined","testcase","TestGenerator","run","each","next","index","context","node","className","name","suiteName","msg","count","console","err","stack","error","end"],"mappings":"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","file":"../../test/all_browser.js","sourcesContent":["define(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nrequire(\"ace/lib/fixoldbrowsers\");\r\nvar mockdom = require(\"../test/mockdom\");\r\nvar AsyncTest = require(\"asyncjs\").test;\r\nvar async = require(\"asyncjs\");\r\n\r\nvar passed = 0;\r\nvar failed = 0;\r\nvar log = document.getElementById(\"log\");\r\nvar el = document.createElement.bind(document);\r\n\r\nvar testNames = [\r\n    \"ace/anchor_test\",\r\n    \"ace/autocomplete_test\",\r\n    \"ace/background_tokenizer_test\",\r\n    \"ace/commands/command_manager_test\",\r\n    \"ace/config_test\",\r\n    \"ace/document_test\",\r\n    \"ace/edit_session_test\",\r\n    \"ace/editor_change_document_test\",\r\n    \"ace/editor_highlight_selected_word_test\",\r\n    \"ace/editor_navigation_test\",\r\n    \"ace/editor_text_edit_test\",\r\n    \"ace/ext/static_highlight_test\",\r\n    \"ace/ext/whitespace_test\",\r\n    \"ace/ext/error_marker_test\",\r\n    \"ace/incremental_search_test\",\r\n    \"ace/keyboard/emacs_test\",\r\n    \"ace/keyboard/textinput_test\",\r\n    \"ace/keyboard/keybinding_test\",\r\n    \"ace/keyboard/vim_test\",\r\n    \"ace/keyboard/vim_ace_test\",\r\n    \"ace/keyboard/sublime_test\",\r\n    \"ace/layer/text_test\",\r\n    \"ace/lib/event_emitter_test\",\r\n    \"ace/mode/coffee/parser_test\",\r\n    \"ace/mode/coldfusion_test\",\r\n    \"ace/mode/css_test\",\r\n    \"ace/mode/css_worker\",\r\n    \"ace/mode/html_test\",\r\n    \"ace/mode/javascript_test\",\r\n    \"ace/mode/javascript_worker_test\",\r\n    \"ace/mode/logiql_test\",\r\n    \"ace/mode/python_test\",\r\n    \"ace/mode/text_test\",\r\n    \"ace/mode/xml_test\",\r\n    \"ace/mode/folding/fold_mode_test\",\r\n    \"ace/mode/folding/cstyle_test\",\r\n    \"ace/mode/folding/html_test\",\r\n    \"ace/mode/folding/pythonic_test\",\r\n    \"ace/mode/folding/xml_test\",\r\n    \"ace/mode/folding/coffee_test\",\r\n    \"ace/mode/behaviour/behaviour_test\",\r\n    \"ace/multi_select_test\",\r\n    \"ace/mouse/mouse_handler_test\",\r\n    \"ace/occur_test\",\r\n    \"ace/placeholder_test\",\r\n    \"ace/range_test\",\r\n    \"ace/range_list_test\",\r\n    \"ace/search_test\",\r\n    \"ace/selection_test\",\r\n    \"ace/snippets_test\",\r\n    \"ace/token_iterator_test\",\r\n    \"ace/tokenizer_test\",\r\n    \"ace/undomanager_test\",\r\n    \"ace/virtual_renderer_test\"\r\n];\r\n\r\nvar html = [\"<a href='?'>all tests</a><br>\"];\r\nfor (var i in testNames) {\r\n    var href = testNames[i];\r\n    html.push(\"<a href='?\", href, \"'>\", href.replace(/^ace\\//, \"\") ,\"</a><br>\");\r\n}\r\n\r\nvar nav = el(\"div\");\r\nnav.innerHTML = html.join(\"\");\r\nnav.style.cssText = \"position:absolute;right:0;top:0\";\r\ndocument.body.appendChild(nav);\r\n\r\n\r\nif (location.search.indexOf(\"show=1\") != -1) {\r\n    require([\"ace/virtual_renderer\", \"ace/test/mockrenderer\"], function(real, mock) {\r\n        var VirtualRenderer = real.VirtualRenderer;\r\n        mock.MockRenderer = function() {\r\n            var el = document.createElement(\"div\");\r\n            el.style.position = \"fixed\";\r\n            el.style.left = \"20px\";\r\n            el.style.top = \"30px\";\r\n            el.style.width = \"500px\";\r\n            el.style.height = \"300px\";\r\n            document.body.appendChild(el);\r\n            \r\n            return new VirtualRenderer(el);\r\n        };\r\n    });\r\n}\r\n\r\nif (location.search.indexOf(\"mock=1\") != -1) {\r\n    mockdom.loadInBrowser(window);\r\n}\r\n\r\n\r\nif (location.search) {\r\n    var parts = location.search.split(/[&?]|\\w+=\\w+/).filter(Boolean);\r\n    if (parts[0])\r\n        testNames = parts[0].split(\",\");\r\n}\r\nvar filter = location.hash.substr(1);\r\nwindow.onhashchange = function() { location.reload(); };\r\n\r\nrequire(testNames, function() {\r\n    var tests = testNames.map(function(x) {\r\n        var module = require(x);\r\n        module.href = x;\r\n        return module;\r\n    });\r\n\r\n    async.list(tests)\r\n        .expand(function(test) {\r\n            if (filter) {\r\n                Object.keys(test).forEach(function(method) {\r\n                    if (method.match(/^>?test/) && !method.match(filter))\r\n                        test[method] = undefined;\r\n                });\r\n            }\r\n            return AsyncTest.testcase(test);\r\n        }, AsyncTest.TestGenerator)\r\n        .run()\r\n        .each(function(test, next) {\r\n            if (test.index == 1 && test.context.href) {\r\n                var href = test.context.href;\r\n                var node = el(\"div\");\r\n                node.innerHTML = \"<a href='?\" + href + \"'>\" + href.replace(/^ace\\//, \"\") + \"</a>\";\r\n                log.appendChild(node);\r\n            }\r\n            var node = el(\"div\");\r\n            node.className = test.passed ? \"passed\" : \"failed\";\r\n\r\n            var name = test.name;\r\n            if (test.suiteName)\r\n                name = test.suiteName + \": \" + test.name;\r\n\r\n            var msg = \"[\" + test.count + \"/\" + test.index + \"] \" + name + \" \" + (test.passed ? \"OK\" : \"FAIL\");\r\n            if (!test.passed) {\r\n                if (test.err.stack)\r\n                    var err = test.err.stack;\r\n                else\r\n                    var err = test.err;\r\n\r\n                console.error(msg);\r\n                console.error(err);\r\n                msg += \"<pre class='error'>\" + err + \"</pre>\";\r\n            } else {\r\n                console.log(msg);\r\n            }\r\n\r\n            node.innerHTML = msg;\r\n            log.appendChild(node);\r\n\r\n            next();\r\n        })\r\n        .each(function(test) {\r\n            if (test.passed)\r\n                passed += 1;\r\n            else\r\n                failed += 1;\r\n        })\r\n        .end(function() {\r\n            log.innerHTML += [\r\n                \"<div class='summary'>\",\r\n                \"<br>\",\r\n                \"Summary: <br>\",\r\n                \"<br>\",\r\n                \"Total number of tests: \" + (passed + failed) + \"<br>\",\r\n                (passed ? \"Passed tests: \" + passed + \"<br>\" : \"\"),\r\n                (failed ? \"Failed tests: \" + failed + \"<br>\" : \"\")\r\n            ].join(\"\");\r\n            console.log(\"Total number of tests: \" + (passed + failed));\r\n            console.log(\"Passed tests: \" + passed);\r\n            console.log(\"Failed tests: \" + failed);\r\n        });\r\n});\r\n\r\n});\r\n"]}