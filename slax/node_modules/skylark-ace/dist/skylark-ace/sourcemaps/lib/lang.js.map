{"version":3,"sources":["lib/lang.js"],"names":["define","require","exports","module","last","a","length","stringReverse","string","split","reverse","join","stringRepeat","count","result","trimBeginRegexp","trimEndRegexp","stringTrimLeft","replace","stringTrimRight","copyObject","obj","copy","key","copyArray","array","i","l","this","deepCopy","Array","isArray","Object","prototype","toString","call","arrayToMap","arr","map","createMap","props","create","arrayRemove","value","splice","escapeRegExp","str","escapeHTML","getMatchOffsets","regExp","matches","push","offset","arguments","deferredCall","fcn","timer","callback","deferred","timeout","cancel","setTimeout","schedule","clearTimeout","isPending","delayedCall","defaultTimeout","_self","delay"],"mappings":"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","file":"../../lib/lang.js","sourcesContent":["/* ***** BEGIN LICENSE BLOCK *****\r\n * Distributed under the BSD license:\r\n *\r\n * Copyright (c) 2010, Ajax.org B.V.\r\n * All rights reserved.\r\n * \r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of Ajax.org B.V. nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n * \r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n * ***** END LICENSE BLOCK ***** */\r\n\r\ndefine(function(require, exports, module) {\r\n\"use strict\";\r\n\r\nexports.last = function(a) {\r\n    return a[a.length - 1];\r\n};\r\n\r\nexports.stringReverse = function(string) {\r\n    return string.split(\"\").reverse().join(\"\");\r\n};\r\n\r\nexports.stringRepeat = function (string, count) {\r\n    var result = '';\r\n    while (count > 0) {\r\n        if (count & 1)\r\n            result += string;\r\n\r\n        if (count >>= 1)\r\n            string += string;\r\n    }\r\n    return result;\r\n};\r\n\r\nvar trimBeginRegexp = /^\\s\\s*/;\r\nvar trimEndRegexp = /\\s\\s*$/;\r\n\r\nexports.stringTrimLeft = function (string) {\r\n    return string.replace(trimBeginRegexp, '');\r\n};\r\n\r\nexports.stringTrimRight = function (string) {\r\n    return string.replace(trimEndRegexp, '');\r\n};\r\n\r\nexports.copyObject = function(obj) {\r\n    var copy = {};\r\n    for (var key in obj) {\r\n        copy[key] = obj[key];\r\n    }\r\n    return copy;\r\n};\r\n\r\nexports.copyArray = function(array){\r\n    var copy = [];\r\n    for (var i=0, l=array.length; i<l; i++) {\r\n        if (array[i] && typeof array[i] == \"object\")\r\n            copy[i] = this.copyObject(array[i]);\r\n        else \r\n            copy[i] = array[i];\r\n    }\r\n    return copy;\r\n};\r\n\r\nexports.deepCopy = function deepCopy(obj) {\r\n    if (typeof obj !== \"object\" || !obj)\r\n        return obj;\r\n    var copy;\r\n    if (Array.isArray(obj)) {\r\n        copy = [];\r\n        for (var key = 0; key < obj.length; key++) {\r\n            copy[key] = deepCopy(obj[key]);\r\n        }\r\n        return copy;\r\n    }\r\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\r\n        return obj;\r\n    \r\n    copy = {};\r\n    for (var key in obj)\r\n        copy[key] = deepCopy(obj[key]);\r\n    return copy;\r\n};\r\n\r\nexports.arrayToMap = function(arr) {\r\n    var map = {};\r\n    for (var i=0; i<arr.length; i++) {\r\n        map[arr[i]] = 1;\r\n    }\r\n    return map;\r\n\r\n};\r\n\r\nexports.createMap = function(props) {\r\n    var map = Object.create(null);\r\n    for (var i in props) {\r\n        map[i] = props[i];\r\n    }\r\n    return map;\r\n};\r\n\r\n/*\r\n * splice out of 'array' anything that === 'value'\r\n */\r\nexports.arrayRemove = function(array, value) {\r\n  for (var i = 0; i <= array.length; i++) {\r\n    if (value === array[i]) {\r\n      array.splice(i, 1);\r\n    }\r\n  }\r\n};\r\n\r\nexports.escapeRegExp = function(str) {\r\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\r\n};\r\n\r\nexports.escapeHTML = function(str) {\r\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\r\n};\r\n\r\nexports.getMatchOffsets = function(string, regExp) {\r\n    var matches = [];\r\n\r\n    string.replace(regExp, function(str) {\r\n        matches.push({\r\n            offset: arguments[arguments.length-2],\r\n            length: str.length\r\n        });\r\n    });\r\n\r\n    return matches;\r\n};\r\n\r\n/* deprecated */\r\nexports.deferredCall = function(fcn) {\r\n    var timer = null;\r\n    var callback = function() {\r\n        timer = null;\r\n        fcn();\r\n    };\r\n\r\n    var deferred = function(timeout) {\r\n        deferred.cancel();\r\n        timer = setTimeout(callback, timeout || 0);\r\n        return deferred;\r\n    };\r\n\r\n    deferred.schedule = deferred;\r\n\r\n    deferred.call = function() {\r\n        this.cancel();\r\n        fcn();\r\n        return deferred;\r\n    };\r\n\r\n    deferred.cancel = function() {\r\n        clearTimeout(timer);\r\n        timer = null;\r\n        return deferred;\r\n    };\r\n    \r\n    deferred.isPending = function() {\r\n        return timer;\r\n    };\r\n\r\n    return deferred;\r\n};\r\n\r\n\r\nexports.delayedCall = function(fcn, defaultTimeout) {\r\n    var timer = null;\r\n    var callback = function() {\r\n        timer = null;\r\n        fcn();\r\n    };\r\n\r\n    var _self = function(timeout) {\r\n        if (timer == null)\r\n            timer = setTimeout(callback, timeout || defaultTimeout);\r\n    };\r\n\r\n    _self.delay = function(timeout) {\r\n        timer && clearTimeout(timer);\r\n        timer = setTimeout(callback, timeout || defaultTimeout);\r\n    };\r\n    _self.schedule = _self;\r\n\r\n    _self.call = function() {\r\n        this.cancel();\r\n        fcn();\r\n    };\r\n\r\n    _self.cancel = function() {\r\n        timer && clearTimeout(timer);\r\n        timer = null;\r\n    };\r\n\r\n    _self.isPending = function() {\r\n        return timer;\r\n    };\r\n\r\n    return _self;\r\n};\r\n});\r\n"]}