/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var i=require("./lib/oop"),n=(require("./range").Range,require("./search").Search),t=require("./edit_session").EditSession,o=require("./search_highlight").SearchHighlight;function r(){}i.inherits(r,n),function(){this.enter=function(i,n){if(!n.needle)return!1;var t=i.getCursorPosition();this.displayOccurContent(i,n);var o=this.originalToOccurPosition(i.session,t);return i.moveCursorToPosition(o),!0},this.exit=function(i,n){var t=n.translatePosition&&i.getCursorPosition(),o=t&&this.occurToOriginalPosition(i.session,t);return this.displayOriginalContent(i),o&&i.moveCursorToPosition(o),!0},this.highlight=function(i,n){(i.$occurHighlight=i.$occurHighlight||i.addDynamicMarker(new o(null,"ace_occur-highlight","text"))).setRegexp(n),i._emit("changeBackMarker")},this.displayOccurContent=function(i,n){this.$originalSession=i.session;var o=this.matchingLines(i.session,n),r=o.map(function(i){return i.content}),e=new t(r.join("\n"));e.$occur=this,e.$occurMatchingLines=o,i.setSession(e),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,e.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(e,n.re),e._emit("changeBackMarker")},this.displayOriginalContent=function(i){i.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(i,n){var t=i.$occurMatchingLines,o={row:0,column:0};if(!t)return o;for(var r=0;r<t.length;r++)if(t[r].row===n.row)return{row:r,column:n.column};return o},this.occurToOriginalPosition=function(i,n){var t=i.$occurMatchingLines;return t&&t[n.row]?{row:t[n.row].row,column:n.column}:n},this.matchingLines=function(t,o){if(o=i.mixin({},o),!t||!o.needle)return[];var r=new n;return r.set(o),r.findAll(t).reduce(function(i,n){var o=n.start.row,r=i[i.length-1];return r&&r.row===o?i:i.concat({row:o,content:t.getLine(o)})},[])}}.call(r.prototype),require("./lib/dom").importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting"),exports.Occur=r});
//# sourceMappingURL=sourcemaps/occur.js.map
