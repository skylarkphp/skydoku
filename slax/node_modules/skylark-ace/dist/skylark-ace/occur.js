/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(i,n,t){"use strict";var o=i("./lib/oop"),r=(i("./range").Range,i("./search").Search),e=i("./edit_session").EditSession,s=i("./search_highlight").SearchHighlight;function c(){}o.inherits(c,r),function(){this.enter=function(i,n){if(!n.needle)return!1;var t=i.getCursorPosition();this.displayOccurContent(i,n);var o=this.originalToOccurPosition(i.session,t);return i.moveCursorToPosition(o),!0},this.exit=function(i,n){var t=n.translatePosition&&i.getCursorPosition(),o=t&&this.occurToOriginalPosition(i.session,t);return this.displayOriginalContent(i),o&&i.moveCursorToPosition(o),!0},this.highlight=function(i,n){(i.$occurHighlight=i.$occurHighlight||i.addDynamicMarker(new s(null,"ace_occur-highlight","text"))).setRegexp(n),i._emit("changeBackMarker")},this.displayOccurContent=function(i,n){this.$originalSession=i.session;var t=this.matchingLines(i.session,n),o=t.map(function(i){return i.content}),r=new e(o.join("\n"));r.$occur=this,r.$occurMatchingLines=t,i.setSession(r),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,r.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(r,n.re),r._emit("changeBackMarker")},this.displayOriginalContent=function(i){i.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(i,n){var t=i.$occurMatchingLines,o={row:0,column:0};if(!t)return o;for(var r=0;r<t.length;r++)if(t[r].row===n.row)return{row:r,column:n.column};return o},this.occurToOriginalPosition=function(i,n){var t=i.$occurMatchingLines;return t&&t[n.row]?{row:t[n.row].row,column:n.column}:n},this.matchingLines=function(i,n){if(n=o.mixin({},n),!i||!n.needle)return[];var t=new r;return t.set(n),t.findAll(i).reduce(function(n,t){var o=t.start.row,r=n[n.length-1];return r&&r.row===o?n:n.concat({row:o,content:i.getLine(o)})},[])}}.call(c.prototype),i("./lib/dom").importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting"),n.Occur=c});
//# sourceMappingURL=sourcemaps/occur.js.map
