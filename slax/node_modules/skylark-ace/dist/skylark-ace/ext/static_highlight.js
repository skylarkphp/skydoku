/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(t,e,n){"use strict";var r=t("../edit_session").EditSession,s=t("../layer/text").Text,i=t("../requirejs/text!./static.css"),o=t("../config"),a=t("../lib/dom"),c=t("../lib/lang").escapeHTML;function h(t){this.type=t,this.style={},this.textContent=""}h.prototype.cloneNode=function(){return this},h.prototype.appendChild=function(t){this.textContent+=t.toString()},h.prototype.toString=function(){var t=[];if("fragment"!=this.type){t.push("<",this.type),this.className&&t.push(" class='",this.className,"'");var e=[];for(var n in this.style)e.push(n,":",this.style[n]);e.length&&t.push(" style='",e.join(""),"'"),t.push(">")}return this.textContent&&t.push(this.textContent),"fragment"!=this.type&&t.push("</",this.type,">"),t.join("")};var l={createTextNode:function(t,e){return c(t)},createElement:function(t){return new h(t)},createFragment:function(){return new h("fragment")}},d=function(){this.config={},this.dom=l};d.prototype=s.prototype;var p=function(t,e,n){var r=t.className.match(/lang-(\w+)/),s=e.mode||r&&"ace/mode/"+r[1];if(!s)return!1;var i=e.theme||"ace/theme/textmate",o="",c=[];if(t.firstElementChild)for(var h=0,l=0;l<t.childNodes.length;l++){var d=t.childNodes[l];3==d.nodeType?(h+=d.data.length,o+=d.data):c.push(h,d)}else o=t.textContent,e.trim&&(o=o.trim());p.render(o,s,i,e.firstLineNumber,!e.showGutter,function(e){a.importCssString(e.css,"ace_highlight"),t.innerHTML=e.html;for(var r=t.firstChild.firstChild,s=0;s<c.length;s+=2){var i=e.session.doc.indexToPosition(c[s]),o=c[s+1],h=r.children[i.row];h&&h.appendChild(o)}n&&n()})};p.render=function(t,e,n,s,i,a){var c,h=1,l=r.prototype.$modes;function d(){var r=p.renderSync(t,e,n,s,i);return a?a(r):r}return"string"==typeof n&&(h++,o.loadModule(["theme",n],function(t){n=t,--h||d()})),e&&"object"==typeof e&&!e.getTokenizer&&(e=(c=e).path),"string"==typeof e&&(h++,o.loadModule(["mode",e],function(t){l[e]&&!c||(l[e]=new t.Mode(c)),e=l[e],--h||d()})),--h||d()},p.renderSync=function(t,e,n,s,o){s=parseInt(s||1,10);var a=new r("");a.setUseWorker(!1),a.setMode(e);var c=new d;c.setSession(a),Object.keys(c.$tabStrings).forEach(function(t){if("string"==typeof c.$tabStrings[t]){var e=l.createFragment();e.textContent=c.$tabStrings[t],c.$tabStrings[t]=e}}),a.setValue(t);var h=a.getLength(),p=l.createElement("div");p.className=n.cssClass;var u=l.createElement("div");u.className="ace_static_highlight"+(o?"":" ace_show_gutter"),u.style["counter-reset"]="ace_line "+(s-1);for(var f=0;f<h;f++){var g=l.createElement("div");if(g.className="ace_line",!o){var m=l.createElement("span");m.className="ace_gutter ace_gutter-cell",m.textContent="",g.appendChild(m)}c.$renderLine(g,f,!1),g.textContent+="\n",u.appendChild(g)}return p.appendChild(u),{css:i+n.cssText,html:p.toString(),session:a}},n.exports=p,n.exports.highlight=p});
//# sourceMappingURL=../sourcemaps/ext/static_highlight.js.map
