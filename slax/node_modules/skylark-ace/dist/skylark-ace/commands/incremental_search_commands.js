/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(e,n,a){var r=e("../config"),c=e("../lib/oop"),t=e("../keyboard/hash_handler").HashHandler,i=e("./occur_commands").occurStartCommand;function o(e){this.$iSearch=e}n.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e,n){r.loadModule(["core","ace/incremental_search"],function(a){var r=a.iSearch=a.iSearch||new a.IncrementalSearch;r.activate(e,n.backwards),n.jumpToFirstMatch&&r.next(n)})},readOnly:!0},{name:"iSearchBackwards",exec:function(e,n){e.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(e,n){e.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(e){e.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],n.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e){e.cancelSearch(!0)}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(e,n){n.useCurrentOrPrevSearch=!0,e.next(n)}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(e,n){n.useCurrentOrPrevSearch=!0,n.backwards=!0,e.next(n)}},{name:"extendSearchTerm",exec:function(e,n){e.addString(n)}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(e){e.addString(" ")}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(e){e.removeChar()}},{name:"confirmSearch",bindKey:"return",exec:function(e){e.deactivate()}},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(e){e.deactivate(!0)}},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(e){var n=c.mixin({},e.$options);e.deactivate(),i.exec(e.$editor,n)}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(e){var n=e.$editor,a=n.selection.getRangeOfMovements(function(e){e.moveCursorWordRight()}),r=n.session.getTextRange(a);e.addString(r)}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(e){var n=e.$editor,a=n.selection.getRangeOfMovements(function(e){e.moveCursorRight()}),r=n.session.getTextRange(a);e.addString(r)}},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(e){e.$editor.execCommand("recenterTopBottom")}},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(e){var n=e.$editor,a=n.session.$isearchHighlight,r=a&&a.cache?a.cache.reduce(function(e,n){return e.concat(n||[])},[]):[];e.deactivate(!1),r.forEach(n.selection.addRange.bind(n.selection))}},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(e){e.convertNeedleToRegExp()}}].map(function(e){return e.readOnly=!0,e.isIncrementalSearchCommand=!0,e.scrollIntoView="animate-cursor",e}),c.inherits(o,t),function(){this.attach=function(e){var a=this.$iSearch;t.call(this,n.iSearchCommands,e.commands.platform),this.$commandExecHandler=e.commands.addEventListener("exec",function(n){if(!n.command.isIncrementalSearchCommand)return a.deactivate();n.stopPropagation(),n.preventDefault();var r=e.session.getScrollTop(),c=n.command.exec(a,n.args||{});return e.renderer.scrollCursorIntoView(null,.5),e.renderer.animateScrolling(r),c})},this.detach=function(e){this.$commandExecHandler&&(e.commands.removeEventListener("exec",this.$commandExecHandler),delete this.$commandExecHandler)};var e=this.handleKeyboard;this.handleKeyboard=function(n,a,r,c){if((1===a||8===a)&&"v"===r||1===a&&"y"===r)return null;var t=e.call(this,n,a,r,c);if(t.command)return t;if(-1==a){var i=this.commands.extendSearchTerm;if(i)return{command:i,args:r}}return!1}}.call(o.prototype),n.IncrementalSearchKeyboardHandler=o});
//# sourceMappingURL=../sourcemaps/commands/incremental_search_commands.js.map
