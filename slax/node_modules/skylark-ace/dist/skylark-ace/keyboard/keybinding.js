/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var t=require("../lib/keys"),e=require("../lib/event"),n=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var n=this.$handlers.indexOf(t);-1!=n&&this.$handlers.splice(n,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==n&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(e,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,n,a,i){for(var s,d=!1,r=this.$editor.commands,h=this.$handlers.length;h--&&!((s=this.$handlers[h].handleKeyboard(this.$data,t,n,a,i))&&s.command&&((d="null"==s.command||r.exec(s.command,this.$editor,s.args,i))&&i&&-1!=t&&1!=s.passEvent&&1!=s.command.passEvent&&e.stopEvent(i),d)););return d||-1!=t||(s={command:"insertstring"},d=r.exec("insertstring",this.$editor,n)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),d},this.onCommandKey=function(e,n,a){var i=t.keyCodeToString(a);this.$callKeyboardHandlers(n,i,a,e)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(n.prototype),exports.KeyBinding=n});
//# sourceMappingURL=../sourcemaps/keyboard/keybinding.js.map
