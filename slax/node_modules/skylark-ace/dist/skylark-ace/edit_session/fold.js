/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";require("../range").Range;var t=require("../range_list").RangeList,n=require("../lib/oop"),s=exports.Fold=function(t,n){this.foldLine=null,this.placeholder=n,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};function r(t,n){t.row-=n.row,0==t.row&&(t.column-=n.column)}function o(t,n){0==t.row&&(t.column+=n.column),t.row+=n.row}n.inherits(s,t),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(n){n.setFoldLine(t)})},this.clone=function(){var t=this.range.clone(),n=new s(t,this.placeholder);return this.subFolds.forEach(function(t){n.subFolds.push(t.clone())}),n.collapseChildren=this.collapseChildren,n},this.addSubFold=function(t){if(!this.range.isEqual(t)){if(!this.range.containsRange(t))throw new Error("A fold can't intersect already existing fold"+t.range+this.range);var n,s;n=t,s=this.start,r(n.start,s),r(n.end,s);for(var o=t.start.row,e=t.start.column,i=0,l=-1;i<this.subFolds.length&&1==(l=this.subFolds[i].range.compare(o,e));i++);var a=this.subFolds[i];if(0==l)return a.addSubFold(t);o=t.range.end.row,e=t.range.end.column;var h=i;for(l=-1;h<this.subFolds.length&&1==(l=this.subFolds[h].range.compare(o,e));h++);this.subFolds[h];if(0==l)throw new Error("A fold can't intersect already existing fold"+t.range+this.range);this.subFolds.splice(i,h-i,t);return t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return function(t,n){o(t.start,n),o(t.end,n)}(t,this.start)}}.call(s.prototype)});
//# sourceMappingURL=../sourcemaps/edit_session/fold.js.map
