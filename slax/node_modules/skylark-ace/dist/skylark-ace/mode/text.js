/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(t,e,n){"use strict";var r=t("../config"),i=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour/cstyle").CstyleBehaviour,h=t("../unicode"),a=t("../lib/lang"),l=t("../token_iterator").TokenIterator,u=t("../range").Range,g=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+h.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+h.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,n,r){var i=e.doc,o=!0,s=!0,h=1/0,l=e.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))d=this.lineCommentStart.map(a.escapeRegExp).join("|"),m=this.lineCommentStart[0];else d=a.escapeRegExp(this.lineCommentStart),m=this.lineCommentStart;d=new RegExp("^(\\s*)(?:"+d+") ?"),u=e.getUseSoftTabs();k=function(t,e){var n=t.match(d);if(n){var r=n[1].length,o=n[0].length;c(t,r,o)||" "!=n[0][o-1]||o--,i.removeInLine(e,r,o)}};var g=m+" ",c=(p=function(t,e){o&&!/\S/.test(t)||(c(t,h,h)?i.insertInLine({row:e,column:h},g):i.insertInLine({row:e,column:h},m))},$=function(t,e){return d.test(t)},function(t,e,n){for(var r=0;e--&&" "==t.charAt(e);)r++;if(r%l!=0)return!1;for(r=0;" "==t.charAt(n++);)r++;return l>2?r%l!=l-1:r%l==0})}else{if(!this.blockComment)return!1;var m=this.blockComment.start,f=this.blockComment.end,d=new RegExp("^(\\s*)(?:"+a.escapeRegExp(m)+")"),v=new RegExp("(?:"+a.escapeRegExp(f)+")\\s*$"),p=function(t,e){$(t,e)||o&&!/\S/.test(t)||(i.insertInLine({row:e,column:t.length},f),i.insertInLine({row:e,column:h},m))},k=function(t,e){var n;(n=t.match(v))&&i.removeInLine(e,t.length-n[0].length,t.length),(n=t.match(d))&&i.removeInLine(e,n[1].length,n[0].length)},$=function(t,n){if(d.test(t))return!0;for(var r=e.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}function w(t){for(var e=n;e<=r;e++)t(i.getLine(e),e)}var y=1/0;w(function(t,e){var n=t.search(/\S/);-1!==n?(n<h&&(h=n),s&&!$(t,e)&&(s=!1)):y>t.length&&(y=t.length)}),h==1/0&&(h=y,o=!1,s=!1),u&&h%l!=0&&(h=Math.floor(h/l)*l),w(s?k:p)},this.toggleBlockComment=function(t,e,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var o,s,h=(d=new l(e,r.row,r.column)).getCurrentToken(),a=(e.selection,e.selection.toOrientedRange());if(h&&/comment/.test(h.type)){for(var g,c;h&&/comment/.test(h.type);){if(-1!=(v=h.value.indexOf(i.start))){var m=d.getCurrentTokenRow(),f=d.getCurrentTokenColumn()+v;g=new u(m,f,m,f+i.start.length);break}h=d.stepBackward()}var d;for(h=(d=new l(e,r.row,r.column)).getCurrentToken();h&&/comment/.test(h.type);){var v;if(-1!=(v=h.value.indexOf(i.end))){m=d.getCurrentTokenRow(),f=d.getCurrentTokenColumn()+v;c=new u(m,f,m,f+i.end.length);break}h=d.stepForward()}c&&e.remove(c),g&&(e.remove(g),o=g.start.row,s=-i.start.length)}else s=i.start.length,o=n.start.row,e.insert(n.end,i.end),e.insert(n.start,i.start);a.start.row==o&&(a.start.column+=s),a.end.row==o&&(a.end.column+=s),e.selection.fromOrientedRange(a)}},this.getNextLineIndent=function(t,e,n){return this.$getIndent(e)},this.checkOutdent=function(t,e,n){return!1},this.autoOutdent=function(t,e,n){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){for(var e in this.$embeds=[],this.$modes={},t)if(t[e]){var n=t[e],i=n.prototype.$id,o=r.$modes[i];o||(r.$modes[i]=o=new n),r.$modes[e]||(r.$modes[e]=o),this.$embeds.push(e),this.$modes[e]=o}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(e=0;e<s.length;e++)!function(t){var n=s[e],r=t[n];t[s[e]]=function(){return this.$delegator(n,arguments,r)}}(this)},this.$delegator=function(t,e,n){var r=e[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var i=r[2][r[2].length-1];if(s=this.$modes[i])return s[t].apply(s,[r[1]].concat([].slice.call(e,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s,h=r.split(this.$embeds[o]);if(!h[0]&&h[1])return e[0]=h[1],(s=this.$modes[this.$embeds[o]])[t].apply(s,e)}var a=n.apply(this,e);return n?a:void 0},this.transformAction=function(t,e,n,r,i){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][e]){var h=o[s][e].apply(this,arguments);if(h)return h}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,n=[];for(var r in e)for(var i=e[r],o=0,s=i.length;o<s;o++)if("string"==typeof i[o].token)/keyword|support|storage/.test(i[o].token)&&n.push(i[o].regex);else if("object"==typeof i[o].token)for(var h=0,a=i[o].token.length;h<a;h++)if(/keyword|support|storage/.test(i[o].token[h])){r=i[o].regex.match(/\(.+?\)/g)[h];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return t?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,n,r){return(this.$keywordList||this.$createKeywordList()).map(function(t){return{name:t,value:t,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(g.prototype),e.Mode=g});
//# sourceMappingURL=../sourcemaps/mode/text.js.map
