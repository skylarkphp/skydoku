/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";exports.MaskHighlightRules=h;var t,e,r,n,a=require("../lib/oop"),i=require("../lib/lang"),o=require("./text_highlight_rules").TextHighlightRules,s=require("./javascript_highlight_rules").JavaScriptHighlightRules,l=require("./css_highlight_rules").CssHighlightRules,u=require("./markdown_highlight_rules").MarkdownHighlightRules,p=require("./html_highlight_rules").HtmlHighlightRules,g="support.variable.class",c="markup.italic",d="paren.lparen",m="paren.rparen";function h(){this.$rules={start:[f("comment","\\/\\/.*$"),f("comment","\\/\\*",[f("comment",".*?\\*\\/","start"),f("comment",".+")]),b.string("'''"),b.string('"""'),b.string('"'),b.string("'"),b.syntax(/(markdown|md)\b/,"md-multiline","multiline"),b.syntax(/html\b/,"html-multiline","multiline"),b.syntax(/(slot|event)\b/,"js-block","block"),b.syntax(/style\b/,"css-block","block"),b.syntax(/var\b/,"js-statement","attr"),b.tag(),f(d,"[[({>]"),f(m,"[\\])};]","start"),{caseInsensitive:!0}]};var t=this;function e(t,e,n){r(s,"js-"+t+"-",e,"block"===t?["start"]:["start","no_regex"],n)}function r(e,r,n,a,i){var o="pop",s=a||["start"];0===s.length&&(s=null),/block|multiline/.test(r)&&(o=r+"end",t.$rules[o]=[f("empty","","start")]),t.embedRules(e,r,[f(i||m,n,o)],s,null==s)}e("interpolation",/\]/,m+"."+c),e("statement",/\)|}|;/),e("block",/\}/),r(l,"css-block-",/\}/),r(u,"md-multiline-",/("""|''')/,[]),r(p,"html-multiline-",/("""|''')/),this.normalizeRules()}t=i.arrayToMap("log".split("|")),r=i.arrayToMap(":dualbind|:bind|:import|slot|event|style|html|markdown|md".split("|")),e=i.arrayToMap("debugger|define|var|if|each|for|of|else|switch|case|with|visible|+if|+each|+for|+switch|+with|+visible|include|import".split("|")),n=i.arrayToMap("a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdo|big|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|img|input|ins|keygen|kbd|label|legend|li|link|map|mark|menu|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|source|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|u|ul|var|video|wbr|xmp".split("|")),a.inherits(h,o);var b={string:function(t,e){var r=f("string.start",t,[f(d+"."+c,/~\[/,b.interpolation()),f("string.end",t,"pop"),{defaultToken:"string"}],e);if(1===t.length){var n=f("string.escape","\\\\"+t);r.push.unshift(n)}return r},interpolation:function(){return[f("keyword.control.markup.italic",/\s*\w*\s*:/),"js-interpolation-start"]},tagHead:function(t){return f(g,t,[f(g,/[\w\-_]+/),f(d+"."+c,/~\[/,b.interpolation()),b.goUp()])},tag:function(){return{token:"tag",onMatch:function(a){return void 0!==e[a]?"keyword":void 0!==r[a]?"constant.language":void 0!==t[a]?"support.function":void 0!==n[a.toLowerCase()]?"keyword.support.constant.language":"support.function.markup.bold"},regex:/([@\w\-_:+]+)|((^|\s)(?=\s*(\.|#)))/,push:[b.tagHead(/\./),b.tagHead(/#/),b.expression(),b.attribute(),f(d,/[;>{]/,"pop")]}},syntax:function(t,e,r){return{token:"constant.language",regex:t,push:{attr:[e+"-start",f("keyword.operator",/;/,"start")],multiline:[b.tagHead(/\./),b.tagHead(/#/),b.attribute(),b.expression(),f(d,/[>\{]/),f("keyword.operator",/;/,"start"),f(d,/'''|"""/,[e+"-start"])],block:[b.tagHead(/\./),b.tagHead(/#/),b.attribute(),b.expression(),f(d,/\{/,[e+"-start"])]}[r]}},attribute:function(){return f(function(t){return/^x\-/.test(t)?g+".markup.bold":g},/[\w_-]+/,[f("keyword.operator",/\s*=\s*/,[b.string('"'),b.string("'"),b.word(),b.goUp()]),b.goUp()])},expression:function(){return f(d,/\(/,["js-statement-start"])},word:function(){return f("string",/[\w-_]+/)},goUp:function(){return f("text","","pop")},goStart:function(){return f("text","","start")}};function f(t,e,r){var n,a,i;return 4===arguments.length?(n=r,a=arguments[3]):"string"==typeof r?a=r:n=r,"function"==typeof t&&(i=t,t="empty"),{token:t,regex:e,push:n,next:a,onMatch:i}}});
//# sourceMappingURL=../sourcemaps/mode/mask_highlight_rules.js.map
