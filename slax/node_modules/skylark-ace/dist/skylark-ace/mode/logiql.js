/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var t=require("../lib/oop"),e=require("./text").Mode,n=require("./logiql_highlight_rules").LogiQLHighlightRules,i=require("./folding/coffee").FoldMode,o=require("../token_iterator").TokenIterator,r=require("../range").Range,s=require("./behaviour/cstyle").CstyleBehaviour,a=require("./matching_brace_outdent").MatchingBraceOutdent,h=function(){this.HighlightRules=n,this.foldingRules=new i,this.$outdent=new a,this.$behaviour=new s};t.inherits(h,e),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(t,e,n){var i=this.$getIndent(e),o=this.getTokenizer().getLineTokens(e,t),r=o.tokens,s=o.state;if(/comment|string/.test(s))return i;if(r.length&&"comment.single"==r[r.length-1].type)return i;e.match();return/(-->|<--|<-|->|{)\s*$/.test(e)&&(i+=n),i},this.checkOutdent=function(t,e,n){return!!this.$outdent.checkOutdent(e,n)||("\n"===n||"\r\n"===n)&&!!/^\s+/.test(e)},this.autoOutdent=function(t,e,n){if(!this.$outdent.autoOutdent(e,n)){var i=e.getLine(n),o=i.match(/^\s+/),s=i.lastIndexOf(".")+1;if(!o||!n||!s)return 0;e.getLine(n+1);var a=this.getMatching(e,{row:n,column:s});if(!a||a.start.row==n)return 0;s=o[0].length;var h=this.$getIndent(e.getLine(a.start.row));e.replace(new r(n+1,0,n+1,s),h)}},this.getMatching=function(t,e,n){void 0==e&&(e=t.selection.lead),"object"==typeof e&&(n=e.column,e=e.row);var i,s=t.getTokenAt(e,n);if(s){if("keyword.start"==s.type){(a=new o(t,e,n)).step=a.stepForward}else{if("keyword.end"!=s.type)return;var a;(a=new o(t,e,n)).step=a.stepBackward}for(;(i=a.step())&&"keyword.start"!=i.type&&"keyword.end"!=i.type;);if(i&&i.type!=s.type){var h=a.getCurrentTokenColumn();e=a.getCurrentTokenRow();return new r(e,h,e,h+i.value.length)}}},this.$id="ace/mode/logiql"}.call(h.prototype),exports.Mode=h});
//# sourceMappingURL=../sourcemaps/mode/logiql.js.map
