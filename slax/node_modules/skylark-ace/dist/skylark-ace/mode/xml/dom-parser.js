/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(t,n,e){"use strict";var r=t("./sax"),o=t("./dom");function i(t){this.options=t||{locator:{}}}function c(){this.cdata=!1}function a(t,n){n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber}function u(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function l(t,n,e){return"string"==typeof t?t.substr(n,e):t.length>=n+e||n?new java.lang.String(t,n,e)+"":t}function s(t,n){t.currentElement?t.currentElement.appendChild(n):t.document.appendChild(n)}return i.prototype.parseFromString=function(t,n){var e=this.options,o=new r,i=e.domBuilder||new c,a=e.errorHandler,l=e.locator,s=e.xmlns||{},m={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&i.setDocumentLocator(l),o.errorHandler=function(t,n,e){if(!t){if(n instanceof c)return n;t=n}var r={},o=t instanceof Function;function i(n){var i=t[n];if(!i)if(o)i=2==t.length?function(e){t(n,e)}:t;else for(var c=arguments.length;--c&&!(i=t[arguments[c]]););r[n]=i&&function(t){i(t+u(e),t,e)}||function(){}}return e=e||{},i("warning","warn"),i("error","warn","warning"),i("fatalError","warn","warning","error"),r}(a,i,l),o.domBuilder=e.domBuilder||i,/\/x?html?$/.test(n)&&(m.nbsp=" ",m.copy="©",s[""]="http://www.w3.org/1999/xhtml"),t?o.parse(t,s,m):o.errorHandler.error("invalid document source"),i.document},c.prototype={startDocument:function(){this.document=(new o).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,n,e,r){var o=this.document,i=o.createElementNS(t,e||n),c=r.length;s(this,i),this.currentElement=i,this.locator&&a(this.locator,i);for(var u=0;u<c;u++){t=r.getURI(u);var l=r.getValue(u),m=(e=r.getQName(u),o.createAttributeNS(t,e));m.getOffset&&a(m.getOffset(1),m),m.value=m.nodeValue=l,i.setAttributeNode(m)}},endElement:function(t,n,e){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,n){},endPrefixMapping:function(t){},processingInstruction:function(t,n){var e=this.document.createProcessingInstruction(t,n);this.locator&&a(this.locator,e),s(this,e)},ignorableWhitespace:function(t,n,e){},characters:function(t,n,e){if(t=l.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&a(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,n,e){t=l.apply(this,arguments);var r=this.document.createComment(t);this.locator&&a(this.locator,r),s(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,n,e){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,n,e);this.locator&&a(this.locator,o),s(this,o)}},warning:function(t){console.warn(t,u(this.locator))},error:function(t){console.error(t,u(this.locator))},fatalError:function(t){throw console.error(t,u(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){c.prototype[t]=function(){return null}}),{DOMParser:i}});
//# sourceMappingURL=../../sourcemaps/mode/xml/dom-parser.js.map
