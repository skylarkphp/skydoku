/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var t=require("./sax"),n=require("./dom");function e(t){this.options=t||{locator:{}}}function r(){this.cdata=!1}function o(t,n){n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber}function i(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function c(t,n,e){return"string"==typeof t?t.substr(n,e):t.length>=n+e||n?new java.lang.String(t,n,e)+"":t}function a(t,n){t.currentElement?t.currentElement.appendChild(n):t.document.appendChild(n)}return e.prototype.parseFromString=function(n,e){var o=this.options,c=new t,a=o.domBuilder||new r,u=o.errorHandler,l=o.locator,s=o.xmlns||{},m={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return l&&a.setDocumentLocator(l),c.errorHandler=function(t,n,e){if(!t){if(n instanceof r)return n;t=n}var o={},c=t instanceof Function;function a(n){var r=t[n];if(!r)if(c)r=2==t.length?function(e){t(n,e)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[n]=r&&function(t){r(t+i(e),t,e)}||function(){}}return e=e||{},a("warning","warn"),a("error","warn","warning"),a("fatalError","warn","warning","error"),o}(u,a,l),c.domBuilder=o.domBuilder||a,/\/x?html?$/.test(e)&&(m.nbsp=" ",m.copy="©",s[""]="http://www.w3.org/1999/xhtml"),n?c.parse(n,s,m):c.errorHandler.error("invalid document source"),a.document},r.prototype={startDocument:function(){this.document=(new n).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,n,e,r){var i=this.document,c=i.createElementNS(t,e||n),u=r.length;a(this,c),this.currentElement=c,this.locator&&o(this.locator,c);for(var l=0;l<u;l++){t=r.getURI(l);var s=r.getValue(l),m=(e=r.getQName(l),i.createAttributeNS(t,e));m.getOffset&&o(m.getOffset(1),m),m.value=m.nodeValue=s,c.setAttributeNode(m)}},endElement:function(t,n,e){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,n){},endPrefixMapping:function(t){},processingInstruction:function(t,n){var e=this.document.createProcessingInstruction(t,n);this.locator&&o(this.locator,e),a(this,e)},ignorableWhitespace:function(t,n,e){},characters:function(t,n,e){if(t=c.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,n,e){t=c.apply(this,arguments);var r=this.document.createComment(t);this.locator&&o(this.locator,r),a(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,n,e){var r=this.document.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,n,e);this.locator&&o(this.locator,i),a(this,i)}},warning:function(t){console.warn(t,i(this.locator))},error:function(t){console.error(t,i(this.locator))},fatalError:function(t){throw console.error(t,i(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){r.prototype[t]=function(){return null}}),{DOMParser:e}});
//# sourceMappingURL=../../sourcemaps/mode/xml/dom-parser.js.map
