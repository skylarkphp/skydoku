/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var e=require("../lib/dom"),t=require("../lib/oop"),o=require("../lib/event"),n=require("../tooltip").Tooltip;function i(e){n.call(this,e)}t.inherits(i,n),function(){this.setPosition=function(e,t){var o=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=this.getWidth(),r=this.getHeight();t+=15,(e+=15)+s>o&&(e-=e+s-o),t+r>i&&(t-=20+r),n.prototype.setPosition.call(this,e,t)}}.call(i.prototype),exports.GutterHandler=function(t){var n,s,r,l=t.editor,u=l.renderer.$gutterLayer,c=new i(l.container);function d(){n&&(n=clearTimeout(n)),r&&(c.hide(),r=null,l._signal("hideGutterTooltip",c),l.removeEventListener("mousewheel",d))}function a(e){c.setPosition(e.x,e.y)}t.editor.setDefaultHandler("guttermousedown",function(e){if(l.isFocused()&&0==e.getButton()&&"foldWidgets"!=u.getRegion(e)){var o=e.getDocumentPosition().row,n=l.session.selection;if(e.getShiftKey())n.selectTo(o,0);else{if(2==e.domEvent.detail)return l.selectAll(),e.preventDefault();t.$clickSelection=l.selection.getLineRange(o)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}}),t.editor.setDefaultHandler("guttermousemove",function(o){var i=o.domEvent.target||o.domEvent.srcElement;if(e.hasCssClass(i,"ace_fold-widget"))return d();r&&t.$tooltipFollowsMouse&&a(o),s=o,n||(n=setTimeout(function(){n=null,s&&!t.isMousePressed?function(){var e=s.getDocumentPosition().row,o=u.$annotations[e];if(!o)return d();if(e==l.session.getLength()){var n=l.renderer.pixelToScreenCoordinates(0,s.y).row,i=s.$pos;if(n>l.session.documentToScreenRow(i.row,i.column))return d()}if(r!=o)if(r=o.text.join("<br/>"),c.setHtml(r),c.show(),l._signal("showGutterTooltip",c),l.on("mousewheel",d),t.$tooltipFollowsMouse)a(s);else{var f=s.domEvent.target.getBoundingClientRect(),g=c.getElement().style;g.left=f.right+"px",g.top=f.bottom+"px"}}():d()},50))}),o.addListener(l.renderer.$gutter,"mouseout",function(e){s=null,r&&!n&&(n=setTimeout(function(){n=null,d()},50))}),l.on("changeSession",d)}});
//# sourceMappingURL=../sourcemaps/mouse/default_gutter_handler.js.map
