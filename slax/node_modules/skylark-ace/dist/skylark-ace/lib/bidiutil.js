/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(e,r,t){"use strict";var n=0,u=0,a=!1,f=!1,l=!1,i=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],s=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],c=1,o=0,g=1,h=2,v=3,d=4,R=5,A=6,L=7,N=8,m=9,B=10,F=11,O=12,V=13,_=14,b=15,w=16,E=17,y=18,C=[y,y,y,y,y,y,y,y,y,A,R,A,N,R,y,y,y,y,y,y,y,y,y,y,y,y,y,y,R,R,R,A,N,d,d,F,F,F,d,d,d,d,d,B,m,B,m,m,h,h,h,h,h,h,h,h,h,h,m,d,d,d,d,d,d,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,d,d,d,d,d,d,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,d,d,d,d,y,y,y,y,y,y,R,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,m,d,F,F,F,F,d,d,d,d,o,d,d,y,d,d,F,F,h,h,d,o,d,d,d,h,o,d,d,d,d,d],D=[N,N,N,N,N,N,N,N,N,N,N,y,y,y,o,g,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,N,R,V,_,b,w,E,m,F,F,F,F,F,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,m,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,N];function H(e,r,t){if(!(u<e))if(1!=e||n!=c||f)for(var a,l,i,s,o=t.length,g=0;g<o;){if(r[g]>=e){for(a=g+1;a<o&&r[a]>=e;)a++;for(l=g,i=a-1;l<i;l++,i--)s=t[l],t[l]=t[i],t[i]=s;g=a}g++}else t.reverse()}function T(e,r,t,u){var i,s,c,C,D=r[u];switch(D){case o:case g:a=!1;case d:case v:return D;case h:return a?v:h;case L:return a=!0,!0,g;case N:return d;case m:return u<1||u+1>=r.length||(i=t[u-1])!=h&&i!=v||(s=r[u+1])!=h&&s!=v?d:(a&&(s=v),s==i?s:d);case B:return(i=u>0?t[u-1]:R)==h&&u+1<r.length&&r[u+1]==h?h:d;case F:if(u>0&&t[u-1]==h)return h;if(a)return d;for(C=u+1,c=r.length;C<c&&r[C]==F;)C++;return C<c&&r[C]==h?h:d;case O:for(c=r.length,C=u+1;C<c&&r[C]==O;)C++;if(C<c){var H=e[u],T=H>=1425&&H<=2303||64286==H;if(i=r[C],T&&(i==g||i==L))return g}return u<1||(i=r[u-1])==R?d:t[u-1];case R:return a=!1,f=!0,n;case A:return l=!0,d;case V:case _:case w:case E:case b:a=!1;case y:return d}}function p(e){var r=e.charCodeAt(0),t=r>>8;return 0==t?r>191?o:C[r]:5==t?/[\u0591-\u05f4]/.test(e)?g:o:6==t?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?O:/[\u0660-\u0669\u066b-\u066c]/.test(e)?v:1642==r?F:/[\u06f0-\u06f9]/.test(e)?h:L:32==t&&r<=8287?D[255&r]:254==t&&r>=65136?L:d}r.L=o,r.R=g,r.EN=h,r.ON_R=3,r.AN=4,r.R_H=5,r.B=6,r.RLE=7,r.DOT="·",r.doBidiReorder=function(e,t,o){if(e.length<2)return{};var h=e.split(""),m=new Array(h.length),B=new Array(h.length),F=[];n=o?c:0,function(e,r,t,c){var o=n?s:i,g=null,h=null,v=null,d=0,L=null,m=-1,B=null,F=null,O=[];if(!c)for(B=0,c=[];B<t;B++)c[B]=p(e[B]);for(u=n,a=!1,!1,f=!1,l=!1,F=0;F<t;F++){if(g=d,O[F]=h=T(e,c,O,F),L=240&(d=o[g][h]),d&=15,r[F]=v=o[d][5],L>0)if(16==L){for(B=m;B<F;B++)r[B]=1;m=-1}else m=-1;if(o[d][6])-1==m&&(m=F);else if(m>-1){for(B=m;B<F;B++)r[B]=v;m=-1}c[F]==R&&(r[F]=0),u|=v}if(l)for(B=0;B<t;B++)if(c[B]==A){r[B]=n;for(var V=B-1;V>=0&&c[V]==N;V--)r[V]=n}}(h,F,h.length,t);for(var O=0;O<m.length;m[O]=O,O++);H(2,F,m),H(1,F,m);for(O=0;O<m.length-1;O++)t[O]===v?F[O]=r.AN:F[O]===g&&(t[O]>L&&t[O]<V||t[O]===d||t[O]===y)?F[O]=r.ON_R:O>0&&"ل"===h[O-1]&&/\u0622|\u0623|\u0625|\u0627/.test(h[O])&&(F[O-1]=F[O]=r.R_H,O++);h[h.length-1]===r.DOT&&(F[h.length-1]=r.B),"‫"===h[0]&&(F[0]=r.RLE);for(O=0;O<m.length;O++)B[O]=F[m[O]];return{logicalFromVisual:m,bidiLevels:B}},r.hasBidiCharacters=function(e,r){for(var t=!1,n=0;n<e.length;n++)r[n]=p(e.charAt(n)),t||r[n]!=g&&r[n]!=L&&r[n]!=v||(t=!0);return t},r.getVisualFromLogicalIdx=function(e,r){for(var t=0;t<r.logicalFromVisual.length;t++)if(r.logicalFromVisual[t]==e)return t;return 0}});
//# sourceMappingURL=../sourcemaps/lib/bidiutil.js.map
