/**
 * skylark-ace - A version of ace v1.4.3 that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(function(require,exports,module){"use strict";var e=0,r=0,t=!1,n=!1,u=!1,a=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],l=1,i=0,s=1,c=2,o=3,g=4,h=5,v=6,d=7,R=8,A=9,L=10,N=11,m=12,B=13,F=14,O=15,V=16,_=17,b=18,w=[b,b,b,b,b,b,b,b,b,v,h,v,R,h,b,b,b,b,b,b,b,b,b,b,b,b,b,b,h,h,h,v,R,g,g,N,N,N,g,g,g,g,g,L,A,L,A,A,c,c,c,c,c,c,c,c,c,c,A,g,g,g,g,g,g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g,g,g,g,g,g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g,g,g,g,b,b,b,b,b,b,h,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,A,g,N,N,N,N,g,g,g,g,i,g,g,b,g,g,N,N,c,c,g,i,g,g,g,c,i,g,g,g,g,g],E=[R,R,R,R,R,R,R,R,R,R,R,b,b,b,i,s,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,R,h,B,F,O,V,_,A,N,N,N,N,N,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,A,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,R];function y(t,u,a){if(!(r<t))if(1!=t||e!=l||n)for(var f,i,s,c,o=a.length,g=0;g<o;){if(u[g]>=t){for(f=g+1;f<o&&u[f]>=t;)f++;for(i=g,s=f-1;i<s;i++,s--)c=a[i],a[i]=a[s],a[s]=c;g=f}g++}else a.reverse()}function C(r,a,f,l){var w,E,y,C,D=a[l];switch(D){case i:case s:t=!1;case g:case o:return D;case c:return t?o:c;case d:return t=!0,!0,s;case R:return g;case A:return l<1||l+1>=a.length||(w=f[l-1])!=c&&w!=o||(E=a[l+1])!=c&&E!=o?g:(t&&(E=o),E==w?E:g);case L:return(w=l>0?f[l-1]:h)==c&&l+1<a.length&&a[l+1]==c?c:g;case N:if(l>0&&f[l-1]==c)return c;if(t)return g;for(C=l+1,y=a.length;C<y&&a[C]==N;)C++;return C<y&&a[C]==c?c:g;case m:for(y=a.length,C=l+1;C<y&&a[C]==m;)C++;if(C<y){var H=r[l],T=H>=1425&&H<=2303||64286==H;if(w=a[C],T&&(w==s||w==d))return s}return l<1||(w=a[l-1])==h?g:f[l-1];case h:return t=!1,n=!0,e;case v:return u=!0,g;case B:case F:case V:case _:case O:t=!1;case b:return g}}function D(e){var r=e.charCodeAt(0),t=r>>8;return 0==t?r>191?i:w[r]:5==t?/[\u0591-\u05f4]/.test(e)?s:i:6==t?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?m:/[\u0660-\u0669\u066b-\u066c]/.test(e)?o:1642==r?N:/[\u06f0-\u06f9]/.test(e)?c:d:32==t&&r<=8287?E[255&r]:254==t&&r>=65136?d:g}exports.L=i,exports.R=s,exports.EN=c,exports.ON_R=3,exports.AN=4,exports.R_H=5,exports.B=6,exports.RLE=7,exports.DOT="·",exports.doBidiReorder=function(i,c,A){if(i.length<2)return{};var L=i.split(""),N=new Array(L.length),m=new Array(L.length),F=[];e=A?l:0,function(l,i,s,c){var o=e?f:a,g=null,d=null,A=null,L=0,N=null,m=-1,B=null,F=null,O=[];if(!c)for(B=0,c=[];B<s;B++)c[B]=D(l[B]);for(r=e,t=!1,!1,n=!1,u=!1,F=0;F<s;F++){if(g=L,O[F]=d=C(l,c,O,F),N=240&(L=o[g][d]),L&=15,i[F]=A=o[L][5],N>0)if(16==N){for(B=m;B<F;B++)i[B]=1;m=-1}else m=-1;if(o[L][6])-1==m&&(m=F);else if(m>-1){for(B=m;B<F;B++)i[B]=A;m=-1}c[F]==h&&(i[F]=0),r|=A}if(u)for(B=0;B<s;B++)if(c[B]==v){i[B]=e;for(var V=B-1;V>=0&&c[V]==R;V--)i[V]=e}}(L,F,L.length,c);for(var O=0;O<N.length;N[O]=O,O++);y(2,F,N),y(1,F,N);for(O=0;O<N.length-1;O++)c[O]===o?F[O]=exports.AN:F[O]===s&&(c[O]>d&&c[O]<B||c[O]===g||c[O]===b)?F[O]=exports.ON_R:O>0&&"ل"===L[O-1]&&/\u0622|\u0623|\u0625|\u0627/.test(L[O])&&(F[O-1]=F[O]=exports.R_H,O++);L[L.length-1]===exports.DOT&&(F[L.length-1]=exports.B),"‫"===L[0]&&(F[0]=exports.RLE);for(O=0;O<N.length;O++)m[O]=F[N[O]];return{logicalFromVisual:N,bidiLevels:m}},exports.hasBidiCharacters=function(e,r){for(var t=!1,n=0;n<e.length;n++)r[n]=D(e.charAt(n)),t||r[n]!=s&&r[n]!=d&&r[n]!=o||(t=!0);return t},exports.getVisualFromLogicalIdx=function(e,r){for(var t=0;t<r.logicalFromVisual.length;t++)if(r.logicalFromVisual[t]==e)return t;return 0}});
//# sourceMappingURL=../sourcemaps/lib/bidiutil.js.map
