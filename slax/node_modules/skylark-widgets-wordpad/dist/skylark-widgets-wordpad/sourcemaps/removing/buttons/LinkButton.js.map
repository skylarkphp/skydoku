{"version":3,"sources":["removing/buttons/LinkButton.js"],"names":["define","$","Toolbar","Wordpad","Button","i18n","LinkPopover","LinkButton","inherit","prototype","name","icon","htmlTag","disableTag","render","args","arguments","length","Array","slice","call","apply","this","popover","button","_status","active","editor","editable","selection","rangeAtEndOf","node","show","hide","command","_this","one","linkText","urlEl","focus","select","textEl","link","translate","addButton"],"mappings":";;;;;;;AAAAA,QACE,qBACA,aACA,aACA,YACA,UACA,iBACA,SAASC,EAAEC,EAAQC,EAAQC,EAAOC,EAAKC,GAGvC,IAAIC,EAAaH,EAAOI,YAqDxB,OAhDAD,EAAWE,UAAUC,KAAO,OAE5BH,EAAWE,UAAUE,KAAO,OAE5BJ,EAAWE,UAAUG,QAAU,IAE/BL,EAAWE,UAAUI,WAAa,MAElCN,EAAWE,UAAUK,OAAS,WAC5B,IAAIC,EAGJ,OAFAA,EAAO,GAAKC,UAAUC,OAASC,MAAMT,UAAUU,MAAMC,KAAKJ,UAAW,MACrEZ,EAAOK,UAAUK,OAAOO,MAAMC,KAAMP,GAC7BO,KAAKC,QAAU,IAAIjB,GACxBkB,OAAQF,QAIZf,EAAWE,UAAUgB,QAAU,WAE7B,OADDrB,EAAOK,UAAUgB,QAAQL,KAAKE,MACzBA,KAAKI,SAAWJ,KAAKK,OAAOC,SAASC,UAAUC,aAAaR,KAAKS,MAC5DT,KAAKC,QAAQS,KAAKV,KAAKS,MAEvBT,KAAKC,QAAQU,QAIxB1B,EAAWE,UAAUyB,QAAU,WAEK,IAAUC,EAc5C,OAfIb,KAAKI,QACPJ,KAAKC,QAAQa,IAAI,eAAyBD,EAUvCb,KATM,WACL,OAAIe,UACFF,EAAMZ,QAAQe,MAAMC,QACbJ,EAAMZ,QAAQe,MAAM,GAAGE,WAE9BL,EAAMZ,QAAQkB,OAAOF,QACdJ,EAAMZ,QAAQkB,OAAO,GAAGD,aAOhClB,KAAKK,OAAOC,SAASc,KAAKpB,KAAKI,OAAOrB,EAAKsC,UAAU,cAI9DxC,EAAQD,QAAQ0C,UAAUrC,GAEnBA","file":"../../../removing/buttons/LinkButton.js","sourcesContent":["define([\r\n  \"skylark-domx-query\",\r\n  \"../Toolbar\",\r\n  \"../Wordpad\",\r\n  \"../Button\",\r\n  \"../i18n\",\r\n  \"./LinkPopover\"\r\n],function($,Toolbar,Wordpad,Button,i18n,LinkPopover){ \r\n  \r\n\r\n  var LinkButton = Button.inherit({\r\n\r\n   });\r\n\r\n\r\n  LinkButton.prototype.name = 'link';\r\n\r\n  LinkButton.prototype.icon = 'link';\r\n\r\n  LinkButton.prototype.htmlTag = 'a';\r\n\r\n  LinkButton.prototype.disableTag = 'pre';\r\n\r\n  LinkButton.prototype.render = function() {\r\n    var args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Button.prototype.render.apply(this, args);\r\n    return this.popover = new LinkPopover({\r\n      button: this\r\n    });\r\n  };\r\n\r\n  LinkButton.prototype._status = function() {\r\n   Button.prototype._status.call(this);\r\n    if (this.active && !this.editor.editable.selection.rangeAtEndOf(this.node)) {\r\n      return this.popover.show(this.node);\r\n    } else {\r\n      return this.popover.hide();\r\n    }\r\n  };\r\n\r\n  LinkButton.prototype.command = function() {\r\n    if (this.active) {\r\n      this.popover.one('popovershow', (function(_this) {\r\n        return function() {\r\n          if (linkText) {\r\n            _this.popover.urlEl.focus();\r\n            return _this.popover.urlEl[0].select();\r\n          } else {\r\n            _this.popover.textEl.focus();\r\n            return _this.popover.textEl[0].select();\r\n          }\r\n        };\r\n      })(this));\r\n\r\n    }\r\n\r\n    return this.editor.editable.link(this.active,i18n.translate('linkText'));\r\n\r\n  };\r\n\r\n  Wordpad.Toolbar.addButton(LinkButton);\r\n\r\n  return LinkButton;\r\n\r\n});"]}