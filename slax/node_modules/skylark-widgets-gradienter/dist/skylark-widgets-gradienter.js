/**
 * skylark-widgets-gradienter - The skylark gradient picker widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-gradienter/
 * @license MIT
 */
!function(e,t){var r=t.define,i=t.require,n="function"==typeof r&&r.amd,a=!n&&"undefined"!=typeof exports;if(!n&&!r){var s={};r=t.define=function(e,t,r){"function"==typeof r?(s[e]={factory:r,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var r=t.split("/"),i=e.split("/");r.pop();for(var n=0;n<i.length;n++)"."!=i[n]&&(".."==i[n]?r.pop():r.push(i[n]));return r.join("/")}(t,e)}),resolved:!1,exports:null},i(e)):s[e]={factory:null,resolved:!0,exports:r}},i=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var r=s[e];if(!r.resolved){var n=[];r.deps.forEach(function(e){n.push(i(e))}),r.exports=r.factory.apply(t,n)||null,r.resolved=!0}return r.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,t){e("skylark-widgets-gradienter/Drag",[],function(){var e={obj:null,gradx:null,init:function(t,r,i,n,a,s,o,d,l,g){t.onmousedown=e.start,t.hmode=!o,t.vmode=!d,t.root=r&&null!=r?r:t,t.hmode&&isNaN(parseInt(t.root.style.left))&&(t.root.style.left="0px"),!t.hmode&&isNaN(parseInt(t.root.style.right))&&(t.root.style.right="0px"),t.minX=void 0!==i?i:null,t.minY=void 0!==a?a:null,t.maxX=void 0!==n?n:null,t.maxY=void 0!==s?s:null,t.xMapper=l||null,t.yMapper=g||null,t.root.onDragStart=new Function,t.root.onDragEnd=new Function,t.root.onDrag=new Function},start:function(t){e.gradx.current_slider_id="#"+this.id;var r=e.obj=this;t=e.fixE(t);var i=parseInt(r.vmode?r.root.style.top:r.root.style.bottom),n=parseInt(r.hmode?r.root.style.left:r.root.style.right);return r.root.onDragStart(n,i),r.lastMouseX=t.clientX,r.lastMouseY=t.clientY,r.hmode?(null!=r.minX&&(r.minMouseX=t.clientX-n+r.minX),null!=r.maxX&&(r.maxMouseX=r.minMouseX+r.maxX-r.minX)):(null!=r.minX&&(r.maxMouseX=-r.minX+t.clientX+n),null!=r.maxX&&(r.minMouseX=-r.maxX+t.clientX+n)),r.vmode?(null!=r.minY&&(r.minMouseY=t.clientY-i+r.minY),null!=r.maxY&&(r.maxMouseY=r.minMouseY+r.maxY-r.minY)):(null!=r.minY&&(r.maxMouseY=-r.minY+t.clientY+i),null!=r.maxY&&(r.minMouseY=-r.maxY+t.clientY+i)),document.onmousemove=e.drag,document.onmouseup=e.end,!1},drag:function(t){t=e.fixE(t);var r=e.obj;e.gradx.update_style_array(),e.gradx.apply_style(e.gradx.panel,e.gradx.get_style_value());var i=e.gradx.gx("#"+r.id).css("left");parseInt(i)>60&&parseInt(i)<390&&e.gradx.gx("#gradx_slider_info").css("left",i).show();var n=e.gradx.gx("#"+r.id).css("backgroundColor"),a=e.gradx.get_rgb_obj(n);e.gradx.cp.colorPicker("set",a);var s,o,d=t.clientY,l=t.clientX,g=parseInt(r.vmode?r.root.style.top:r.root.style.bottom),_=parseInt(r.hmode?r.root.style.left:r.root.style.right);return null!=r.minX&&(l=r.hmode?Math.max(l,r.minMouseX):Math.min(l,r.maxMouseX)),null!=r.maxX&&(l=r.hmode?Math.min(l,r.maxMouseX):Math.max(l,r.minMouseX)),null!=r.minY&&(d=r.vmode?Math.max(d,r.minMouseY):Math.min(d,r.maxMouseY)),null!=r.maxY&&(d=r.vmode?Math.min(d,r.maxMouseY):Math.max(d,r.minMouseY)),s=_+(l-r.lastMouseX)*(r.hmode?1:-1),o=g+(d-r.lastMouseY)*(r.vmode?1:-1),r.xMapper?s=r.xMapper(g):r.yMapper&&(o=r.yMapper(_)),e.obj.root.style[r.hmode?"left":"right"]=s+"px",e.obj.lastMouseX=l,e.obj.lastMouseY=d,e.obj.root.onDrag(s,o),!1},end:function(){document.onmousemove=null,document.onmouseup=null,e.obj.root.onDragEnd(parseInt(e.obj.root.style[e.obj.hmode?"left":"right"]),parseInt(e.obj.root.style[e.obj.vmode?"top":"bottom"])),e.obj=null},fixE:function(e){return void 0===e&&(e=window.event),void 0===e.layerX&&(e.layerX=e.offsetX),void 0===e.layerY&&(e.layerY=e.offsetY),e}};return e}),e("skylark-widgets-gradienter/Gradienter",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-eventer","skylark-domx-finder","skylark-domx-query","skylark-data-color/colors","skylark-data-color/Color","skylark-widgets-swt/swt","skylark-widgets-swt/Widget","skylark-widgets-colorpicker/ColorPicker","./Drag"],function(e,t,r,i,n,a,s,o,d,l,g,_,c){"use strict";void 0===s.fn.draggable&&(s.fn.draggable=function(){var e=document.getElementById(this.attr("id"));return e.style.top="121px",c.init(e,null,26,426,86,86),this});return e.attach("widgets.Gradienter",function(e,r){var i={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,t){}},n=c.gradx={rand_RGB:[],rand_pos:[],id:null,slider_ids:[],slider_index:0,sliders:[],direction:"left",type:"linear",shape:"cover",slider_hovered:[],jQ_present:!0,code_shown:!1,load_jQ:function(){this.gx=s},add_event:function(e,t,r){var i,n,a;n=t,a=r,(i=e).attachEvent?i.attachEvent("on"+n,function(){a.call(i)}):i.addEventListener&&i.addEventListener(n,a,!1)},get_random_position:function(){var e;do{e=parseInt(100*Math.random())}while(this.rand_pos.indexOf(e)>-1);return this.rand_pos.push(e),e},get_random_rgb:function(){var e,t,r,i;do{e=parseInt(255*Math.random()),t=parseInt(255*Math.random()),r=parseInt(255*Math.random()),i="rgb("+e+", "+t+", "+r+")"}while(this.rand_RGB.indexOf(i)>-1);return this.rand_RGB.push(i),i},update_target:function(e){if(this.targets.length>0){var t,r,i,a=this.targets.length,s=e.length;for(t=0;t<a;t++)for(i=n.gx(this.targets[t]),r=0;r<s;r++)i.css("background-image",e[r])}},apply_style:function(e,t){var r="linear";if("linear"!=n.type&&(r="radial"),t.indexOf(this.direction)>-1)var i=["-webkit-"+r+"-gradient("+t+")","-moz-"+r+"-gradient("+t+")","-ms-"+r+"-gradient("+t+")","-o-"+r+"-gradient("+t+")",r+"-gradient("+t+")"];else i=[t];for(var a=i.length,s="";a>0;)a--,e.css("background",i[a]),s+="background: "+i[a]+";\n";this.change(this.sliders,i),this.update_target(i),n.gx("#gradx_code").html(s)},apply_default_styles:function(){this.update_style_array();var e=this.get_style_value();this.apply_style(this.panel,e)},update_style_array:function(){this.sliders=[];var e,t,r,i,a=n.slider_ids.length;for(e=0;e<a;e++)i="#"+n.slider_ids[e],t=parseInt(n.gx(i).css("left")),r=parseInt(t/n.container_width*100),r-=6,n.sliders.push([n.gx(i).css("background-color"),r]);this.sliders.sort(function(e,t){return e[1]>t[1]?1:-1})},get_style_value:function(){var e=n.slider_ids.length;if(1===e)t=this.sliders[0][0];else{for(var t="",r="",i=0;i<e;i++)""==this.sliders[i][1]?t+=r+this.sliders[i][0]:(this.sliders[i][1]>100&&(this.sliders[i][1]=100),t+=r+(this.sliders[i][0]+" ")+this.sliders[i][1]+"%"),r=" , ";t="linear"==this.type?this.direction+" , "+t:this.direction+" , "+this.type+" "+this.shape+" , "+t}return t},get_rgb_obj:function(e){return e=(e=(e=e.split("("))[1]).split(","),{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}},load_info:function(e){var t="#"+e.id;if(this.current_slider_id=t,this.slider_ids.indexOf(e.id)>-1){var r=n.gx(t).css("backgroundColor"),i=this.get_rgb_obj(r),a=n.gx(t).css("left");parseInt(a)>26&&parseInt(a)<426&&n.gx("#gradx_slider_info").css("left",a).show(),this.set_colorpicker(i),console.log(i)}},add_slider:function(e){var t,r,i,a;0===e.length&&(e=[{color:n.get_random_rgb(),position:n.get_random_position()},{color:n.get_random_rgb(),position:n.get_random_position()}]);var s=e;for(i in s){if(void 0===s[i].position)break;var o=26;a=parseInt(s[i].position*this.container_width/100)+o+"px",t="gradx_slider_"+this.slider_index,this.sliders.push([s[i].color,s[i].position]),this.slider_ids.push(t),r="<div class='gradx_slider' id='"+t+"'></div>",n.gx("#gradx_start_sliders_"+this.id).append(r),n.gx("#"+t).css("backgroundColor",s[i].color).css("left",a),this.slider_index++}for(var d=0,l=this.slider_ids.length;d<l;d++)n.gx("#"+this.slider_ids[d]).draggable({containment:"parent",axis:"x",start:function(){n.jQ_present&&(n.current_slider_id="#"+n.gx(this).attr("id"))},drag:function(){n.update_style_array(),n.apply_style(n.panel,n.get_style_value());var e=n.gx(n.current_slider_id).css("left");parseInt(e)>26&&parseInt(e)<426&&n.gx("#gradx_slider_info").css("left",e).show();var t=n.gx(n.current_slider_id).css("backgroundColor"),r=n.get_rgb_obj(t);n.cp.colorPicker("set",r)}}).click(function(){return n.load_info(this),!1})},set_colorpicker:function(e){n.cp.colorPicker({move:function(e){if(0!=n.current_slider_id){var t=e.toRgbString();n.gx(n.current_slider_id).css("background-color",t),n.update_style_array(),n.apply_style(n.panel,n.get_style_value())}},change:function(){n.gx("#gradx_slider_info").hide()},flat:!0,showAlpha:!0,color:e,clickoutFiresChange:!0,showInput:!0,showButtons:!1})},generate_options:function(e){for(var t,r,i=e.length,n="",a=0;a<i;a++)t=(t=e[a].split(" "))[0],r=a<2?t[1]:"",t=t.replace("-"," "),n+="<option value="+e[a]+" "+r+">"+t+"</option>";return n},generate_radial_options:function(){var e;e=["horizontal-center disabled","center selected","left","right"],n.gx("#gradx_gradient_subtype").html(n.generate_options(e)),e=["vertical-center disabled","center selected","top","bottom"],n.gx("#gradx_gradient_subtype2").html(n.generate_options(e)).show()},generate_linear_options:function(){var e;e=["horizontal-center disabled","left selected","right","top","bottom"],n.gx("#gradx_gradient_subtype").html(n.generate_options(e)),n.gx("#gradx_gradient_subtype2").hide()},destroy:function(){var e={targets:[],sliders:[],direction:"left",type:"linear",code_shown:!1,change:function(e,t){}};for(var t in e)n[t]=e[t]},load_gradx:function(e,t){this.me=n.gx(e),this.id=e.replace("#",""),e=this.id,this.current_slider_id=!1;var r="<div class='gradx'>\n                            <div id='gradx_add_slider' class='gradx_add_slider gradx_btn'><i class='icon icon-add'></i>add</div>\n                            <div class='gradx_slectboxes'>\n                            <select id='gradx_gradient_type' class='gradx_gradient_type'>\n                                <option value='linear'>Linear</option>\n                                <option value='circle'>Radial - Circle</option>\n                                <option value='ellipse'>Radial - Ellipse</option>\n                            </select>\n                            <select id='gradx_gradient_subtype' class='gradx_gradient_type'>\n                                <option id='gradx_gradient_subtype_desc' value='gradient-direction' disabled>gradient direction</option>\n                                <option value='left' selected>Left</option>\n                                <option value='right'>Right</option>\n                                <option value='top'>Top</option>\n                                <option value='bottom'>Bottom</option>\n                            </select>\n                            <select id='gradx_gradient_subtype2' class='gradx_gradient_type gradx_hide'>\n                            </select>\n                            <select id='gradx_radial_gradient_size' class='gradx_gradient_type gradx_hide'>\n                            </select>\n                            </div>\n                            <div class='gradx_container' id='gradx_"+e+"'>\n                                <div id='gradx_stop_sliders_"+e+"'></div>\n                                <div class='gradx_panel' id='gradx_panel_"+e+"'></div>\n                                <div class='gradx_start_sliders' id='gradx_start_sliders_"+e+"'>\n                                    <div class='cp-default' id='gradx_slider_info'>\n                                        <div id='gradx_slider_controls'>\n                                            <div id='gradx_delete_slider' class='gradx_btn'><i class='icon icon-remove'></i>delete</div>\n                                        </div>\n                                        <div id='gradx_slider_content'></div>\n                                    </div> \n                                </div>\n                            </div>\n                            <div id='gradx_show_code' class='gradx_show_code gradx_btn'><i class='icon icon-file-css'></i><span>show the code</span></div>\n                            <div id='gradx_show_presets' style='display:none' class='gradx_show_presets gradx_btn'><i class='icon icon-preset'></i><span>show presets</span></div>\n                            <textarea class='gradx_code' id='gradx_code'></textarea>\n                        </div>";this.me.html(r);var i="";if(i=n.generate_options(["gradient-size disabled","closest-side selected","closest-corner","farthest-side","farthest-corner","contain","cover"]),n.gx("#gradx_radial_gradient_size").html(i),this.container=n.gx("#gradx_"+e),this.panel=n.gx("#gradx_panel_"+e),this.container_width=400,this.add_slider(t),n.add_event(document,"click",function(){if(!n.slider_hovered[e])return n.gx("#gradx_slider_info").hide(),!1}),n.gx("#gradx_add_slider").click(function(){n.add_slider([{color:n.get_random_rgb(),position:n.get_random_position()}]),n.update_style_array(),n.apply_style(n.panel,n.get_style_value())}),n.cp=n.gx("#gradx_slider_content"),n.set_colorpicker("blue"),n.gx("#gradx_delete_slider").click(function(){n.gx(n.current_slider_id).remove(),n.gx("#gradx_slider_info").hide();for(var e=n.current_slider_id.replace("#",""),t=0;t<n.slider_ids.length;t++)n.slider_ids[t]==e&&n.slider_ids.splice(t,1);n.update_style_array(),n.apply_style(n.panel,n.get_style_value()),n.current_slider_id=!1}),n.gx("#gradx_code").focus(function(){var e=n.gx(this);e.select(),e.mouseup(function(){return e.off("mouseup"),!1})}),n.gx("#gradx_gradient_type").change(function(){var e=n.gx(this).val();"linear"!==e?n.generate_radial_options():(n.generate_linear_options(),n.gx("#gradx_gradient_subtype").val("left")),n.type=e,n.direction=n.gx("#gradx_gradient_subtype").val(),n.apply_style(n.panel,n.get_style_value())}),"linear"!==this.type){var a;if(n.gx("#gradx_gradient_type").val(this.type),n.generate_radial_options(),"left"!==this.direction)a=this.direction.indexOf(",")>-1?this.direction.split(","):this.direction.split(" "),s=a[0],o=a[1],n.gx("#gradx_gradient_subtype").val(s),n.gx("#gradx_gradient_subtype2").val(o);else var s=n.gx("#gradx_gradient_subtype").val(),o=n.gx("#gradx_gradient_subtype2").val();n.direction=s+" "+o,n.apply_style(n.panel,n.get_style_value())}else"left"!==this.direction&&n.gx("#gradx_gradient_subtype").val(this.direction);n.gx("#gradx_gradient_subtype").change(function(){if("linear"===n.type)n.direction=n.gx(this).val();else{var e=n.gx(this).val(),t=n.gx("#gradx_gradient_subtype2").val();n.direction=e+" "+t}n.apply_style(n.panel,n.get_style_value())}),n.gx("#gradx_gradient_subtype2").change(function(){var e=n.gx("#gradx_gradient_subtype").val(),t=n.gx(this).val();n.direction=e+" "+t,n.apply_style(n.panel,n.get_style_value())}),n.gx("#gradx_radial_gradient_size").change(function(){n.shape=n.gx(this).val(),n.apply_style(n.panel,n.get_style_value())}),n.gx("#gradx_show_code").click(function(){n.code_shown?(n.code_shown=!1,n.gx("#gradx_show_code span").text("show the code"),n.gx("#gradx_code").hide()):(n.gx("#gradx_show_code span").text("hide the code"),n.gx("#gradx_code").show(),n.code_shown=!0)}),n.code_shown&&(n.gx("#gradx_show_code span").text("hide the code"),n.gx("#gradx_code").show()),n.add_event(document.getElementById("gradx_slider_info"),"mouseout",function(){n.slider_hovered[e]=!1}),n.add_event(document.getElementById("gradx_slider_info"),"mouseover",function(){n.slider_hovered[e]=!0})}};for(var a in n.load_jQ(),t.mixin(i,r),i)n[a]=i[a];n.load_gradx(e,n.sliders),n.apply_default_styles()})}),e("skylark-widgets-gradienter/main",["./Gradienter"],function(e){return e}),e("skylark-widgets-gradienter",["skylark-widgets-gradienter/main"],function(e){return e})}(r),!n){var o=i("skylark-langx/skylark");a?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-gradienter.js.map
