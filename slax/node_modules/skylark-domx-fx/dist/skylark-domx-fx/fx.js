/**
 * skylark-domx-fx - The skylark fx library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer"],function(i,t,n,e,o,s,a){var r,l,c,p,d,u,m,g=n.normalizeCssEvent("AnimationEnd"),f=n.normalizeCssEvent("TransitionEnd"),h=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y=n.css3PropPrefix+"transform",v={};function b(i,n,e,b,x,T){var w,C,P,z={},B=[],I="",j=this,O=!1,F=!1;if(t.isPlainObject(e)&&(b=e.easing,x=e.complete,T=e.delay,e=e.duration),t.isString(e)&&(e=E.speeds[e]),void 0===e&&(e=E.speeds.normal),e/=1e3,E.off&&(e=0),t.isFunction(b)?(x=b,eace="swing"):b=b||"swing",T?T/=1e3:T=0,t.isString(n))z[r]=n,z[l]=e+"s",z[c]=b,C=g;else{for(w in n){var N=n[w];if(h.test(w))I+=w+"("+N+") ";else{if("scrollTop"===w&&(F=!0),"clip"==w&&t.isPlainObject(N)){if(z[w]="rect("+N.top+"px,"+N.right+"px,"+N.bottom+"px,"+N.left+"px)","auto"==s.css(i,"clip")){var S=o.size(i);s.css(i,"clip","rect(0px,"+S.width+"px,"+S.height+"px,0px)"),!0}}else z[w]=N;B.push(t.dasherize(w))}}C=f}return I&&(z[y]=I,B.push(y)),e>0&&t.isPlainObject(n)&&(z[p]=B.join(", "),z[d]=e+"s",z[m]=T+"s",z[u]=b),P=function(t){if(O=!0,t){if(t.target!==t.currentTarget)return;a.off(t.target,C,P)}else a.off(i,g,P);s.css(i,v),x&&x.call(this)},e>0&&(a.on(i,C,P),t.debounce(function(){O||P.call(j)},1e3*(e+T)+25)()),i.clientLeft,s.css(i,z),e<=0&&t.debounce(function(){O||P.call(j)},0)(),F&&k(i,n.scrollTop,e,x),this}function x(i,n,e){return s.show(i),n&&(!e&&t.isFunction(n)&&(e=n,n="normal"),s.css(i,"opacity",0),b(i,{opacity:1,scale:"1,1"},n,e)),this}function T(i,n,e){return n?(!e&&t.isFunction(n)&&(e=n,n="normal"),b(i,{opacity:0,scale:"0,0"},n,function(){s.hide(i),e&&e.call(i)})):s.hide(i),this}function k(i,n,e,o){var s=parseInt(i.scrollTop),a=0,r=1e3*e/5,l=parseInt(n),c=setInterval(function(){++a<=r&&(i.scrollTop=(l-s)/r*a+s),a>=r+1&&(clearInterval(c),o&&t.debounce(o,1e3)())},5)}function w(i,t,n,e,o){return b(i,{opacity:n},t,e,o),this}function C(i,t,n,e){var o=s.css(i,"opacity");return o>0?s.css(i,"opacity",0):o=1,s.show(i),w(i,t,o,n,e),this}function P(i,n,e,o){var a,r=s.css(i,"opacity"),l={};return t.isPlainObject(n)?(l.easing=n.easing,l.duration=n.duration,a=n.complete):(l.duration=n,o?(a=o,l.easing=e):a=e),l.complete=function(){s.css(i,"opacity",r),s.hide(i),a&&a.call(i)},w(i,l,0),this}function z(i,t,n){var e=s.css(i,"position");x(i),s.css(i,{position:"absolute",visibility:"hidden"});var o=s.css(i,"margin-top"),a=s.css(i,"margin-bottom"),r=s.css(i,"padding-top"),l=s.css(i,"padding-bottom"),c=s.css(i,"height");return s.css(i,{position:e,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),b(i,{height:c,marginTop:o,marginBottom:a,paddingTop:r,paddingBottom:l},{duration:t,complete:function(){n&&n.apply(i)}}),this}function B(i,t,n){if(o.height(i)>0){s.css(i,"position");var e=s.css(i,"height"),a=s.css(i,"margin-top"),r=s.css(i,"margin-bottom"),l=s.css(i,"padding-top"),c=s.css(i,"padding-bottom");s.css(i,{visibility:"visible",overflow:"hidden",height:e,marginTop:a,marginBottom:r,paddingTop:l,paddingBottom:c}),b(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:t,queue:!1,complete:function(){T(i),s.css(i,{visibility:"visible",overflow:"hidden",height:e,marginTop:a,marginBottom:r,paddingTop:l,paddingBottom:c}),n&&n.apply(i)}})}return this}function E(){return E}return v[r=n.normalizeCssProperty("animation-name")]=v[l=n.normalizeCssProperty("animation-duration")]=v[n.normalizeCssProperty("animation-delay")]=v[c=n.normalizeCssProperty("animation-timing-function")]="",v[p=n.normalizeCssProperty("transition-property")]=v[d=n.normalizeCssProperty("transition-duration")]=v[m=n.normalizeCssProperty("transition-delay")]=v[u=n.normalizeCssProperty("transition-timing-function")]="",t.mixin(E,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:b,emulateTransitionEnd:function(i,t){var e=!1;return a.one(i,"transitionEnd",function(){e=!0}),setTimeout(function(){e||a.trigger(i,n.support.transition.end)},t),this},fadeIn:C,fadeOut:P,fadeTo:w,fadeToggle:function(i,t,n,e){return s.isInvisible(i)?C(i,t,easing,callback):P(i,t,easing,callback),this},hide:T,scrollToTop:k,slideDown:z,slideToggle:function(i,t,n){return 0==o.height(i)?z(i,t,n):B(i,t,n),this},slideUp:B,show:x,throb:function(i,t){var n,o=(t=t||{}).text,a=(t.style,t.time),r=t.callback,l=e.createElement("div",{class:t.className||"throbber"}),c=(function(i,t){var n=e.createElement("div",t);s.css(n,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),i.appendChild(n)}(l,{class:"overlay fade"}),e.createElement("div",{class:"throb"})),p=e.createTextNode(o||""),d=function(){n&&(clearTimeout(n),n=null),l&&(e.remove(l),l=null)};return t.style&&s.css(l,t.style),c.appendChild(p),l.appendChild(c),i.appendChild(l),a&&(n=setTimeout(function(){d(),r&&r()},a)),{remove:d,update:function(i){i&&i.text&&l&&(p.nodeValue=i.text)}}},toggle:function(i,t,n){return s.isInvisible(i)?x(i,t,n):T(i,t,n),this}}),i.attach("domx.fx",E)});
//# sourceMappingURL=sourcemaps/fx.js.map
