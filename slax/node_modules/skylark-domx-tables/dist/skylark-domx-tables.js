/**
 * skylark-domx-tables - The skylark tables library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,e){var n=e.define,r=e.require,a="function"==typeof n&&n.amd,o=!a&&"undefined"!=typeof exports;if(!a&&!n){var d={};n=e.define=function(t,e,n){"function"==typeof n?(d[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),r=t.split("/");n.pop();for(var a=0;a<r.length;a++)"."!=r[a]&&(".."==r[a]?n.pop():n.push(r[a]));return n.join("/")}(e,t)}),resolved:!1,exports:null},r(t)):d[t]={factory:null,resolved:!0,exports:n}},r=e.require=function(t){if(!d.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var n=d[t];if(!n.resolved){var a=[];n.deps.forEach(function(t){a.push(r(t))}),n.exports=n.factory.apply(e,a)||null,n.resolved=!0}return n.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,e){t("skylark-domx-tables/tables",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-query","skylark-domx-styler","skylark-domx-eventer","skylark-domx-fx","skylark-domx-data","skylark-domx-finder","skylark-domx-geom"],function(t,e,n){function r(){return r}function a(t,e){return t.find("td, th").each(function(t,r){var a;return(a=n(r)).replaceWith("<"+e+">"+a.html()+"</"+e+">")})}function o(t,e){var r,a,o=n(t);a=o.closest(".simditor-table"),r=a.next("p"),a.remove(),e&&e(r)}function d(t){return setTimeout(function(){var e,r;return r=t.width(),e=t.find("col"),t.find("thead tr th").each(function(t,a){return e.eq(t).attr("width",n(a).outerWidth()/r*100+"%")})},0)}function i(t){var e=n(t);if(e.parent(".simditor-table").length>0)return e.parent().replaceWith(e)[0]}return e.mixin(r,{createTable:function(t,e,r){var a,o,d,i,l,s,f,u,p,h;for(a=n("<table/>"),i=n("<thead/>").appendTo(a),o=n("<tbody/>").appendTo(a),u=s=0,p=t;0<=p?s<p:s>p;u=0<=p?++s:--s)for((l=n("<tr/>")).appendTo(0===u?i:o),f=0,h=e;0<=h?f<h:f>h;0<=h?++f:--f)d=n(0===u?"<th/>":"<td/>").appendTo(l),r&&d.append(r);return a[0]},decorate:function(t,e){var r,o,l,s,f,u=n(t);u.parent("."+e.tableDecorate).length>0&&i(t);u.wrap('<div class="'+e.tableDecorate+'"></div>'),f=u.parent("."+e.tableDecorate),r=u.find("colgroup"),u.find("thead").length<1&&(s=n("<thead />"),o=u.find("tr").first(),s.append(o),a(o,"th"),(l=u.find("tbody")).length>0?l.before(s):u.prepend(s));r.length<1&&(r=n("<colgroup/>").prependTo(u),u.find("thead tr th").each(function(t,e){return n("<col/>").appendTo(r)}),d(u));return n("<div />",{class:e.resizeHandle,contenteditable:"false"}).appendTo(f),u.parent()},deleteCol:function(t,e){var r,a,i,l,s,f,u=n(t);if(i=u.parent("tr"),f=i.closest("table").find("tr").length<2,s=u.siblings("td, th").length<1,f&&s)return o(t);l=i.find("td, th").index(u),(r=u.next("td, th")).length>0||(r=i.prev("td, th")),(a=i.closest("table")).find("col").eq(l).remove(),a.find("tr").each(function(t,e){return n(e).find("td, th").eq(l).remove()}),d(a),e&&e(r[0])},deleteRow:function(t,e){var r,d,i,l=n(t);if((d=l.parent("tr")).closest("table").find("tr").length<1)return o(t);(r=function(t){var e;(e=t.next("tr")).length<1&&t.parent("thead").length>0&&(e=t.parent("thead").next("tbody").find("tr:first"));return e}(d)).length>0||(r=function(t){var e;(e=t.prev("tr")).length<1&&t.parent("tbody").length>0&&(e=t.parent("tbody").prev("thead").find("tr"));return e}(d)),i=d.find("td, th").index(l),d.parent().is("thead")&&(r.appendTo(d.parent()),a(r,"th")),d.remove(),e&&e(r[0],i)},deleteTable:o,insertCol:function(t,e,r,a){var o,i,l,s,f,u,p,h,c=n(t);null==e&&(e="after");f=c.parent("tr"),u=f.find("td, th").index(c),s=c.closest("table"),o=s.find("col").eq(u),s.find("tr").each(function(t,a){var o,d;return d=n(a).parent().is("thead")?"th":"td",o=n("<"+d+"/>").append(r),n(a).find("td, th").eq(u)[e](o)}),i=n("<col/>"),o[e](i),p=s.width(),h=Math.max(parseFloat(o.attr("width"))/2,50/p*100),o.attr("width",h+"%"),i.attr("width",h+"%"),d(s),l="after"===e?c.next("td, th"):c.prev("td, th"),a&&a(l[0])},insertRow:function(t,e,r,o){var d,i,l,s,f,u,p,h,c=n(t);null==e&&(e="after");l=c.parent("tr"),i=l.closest("table"),f=0,i.find("tr").each(function(t,e){return f=Math.max(f,n(e).find("td").length)}),u=l.find("td, th").index(c),d=n("<tr/>"),s="td","after"===e&&l.parent().is("thead")?l.parent().next("tbody").prepend(d):"before"===e&&l.parent().is("thead")?(l.before(d),l.parent().next("tbody").prepend(l),a(l,"td"),s="th"):l[e](d);for(p=1,h=f;1<=h?p<=h:p>=h;1<=h?++p:--p)n("<"+s+"/>").append(r).appendTo(d);o&&o(d[0],u)},refreshTableWidth:d,resizable:function(t,e){var r=e.cssClasses,a=r.resizeHandle,o="."+r.wrapper,d="."+a;return n(t).on("mousemove.table",o+" td, "+o+" th",function(t){var e,r,a,i,l,s,f,u;if(a=(l=n(this).parents(o)).find(d),r=l.find("colgroup"),!l.hasClass("resizing"))if(i=n(t.currentTarget),t.pageX-n(t.currentTarget).offset().left<5&&i.prev().length>0&&(i=i.prev()),i.next("td, th").length<1)a.hide();else if(null!=(f=a.data("td"))&&f.is(i))a.show();else{if(s=i.parent().find("td, th").index(i),e=r.find("col").eq(s),null==(u=a.data("col"))||!u.is(e))return a.css("left",i.position().left+i.outerWidth()-5).data("td",i).data("col",e).show();a.show()}}),n(t).on("mouseleave"+o,o,function(t){return n(this).find(d).hide()}),n(t).on("mousedown"+d,d,function(e){var r,a,d,i,l,s,f,u,p,h,c;return s=n(this).parent(o),d=(r=n(e.currentTarget)).data("td"),a=r.data("col"),l=d.next("td, th"),i=a.next("col"),h=e.pageX,u=1*d.outerWidth(),p=1*l.outerWidth(),f=parseFloat(r.css("left")),c=d.closest(o).width(),n(t).on("mousemove.resize-table",function(t){var e,n,o;return e=t.pageX-h,o=p-e,(n=u+e)<50?(n=50,o=p-(e=50-u)):o<50&&(o=50,n=u+(e=p-50)),a.attr("width",n/c*100+"%"),i.attr("width",o/c*100+"%"),r.css("left",f+e)}),n(t).one("mouseup.resize-table",function(e){return n(t).off(".resize-table"),s.removeClass("resizing")}),s.addClass("resizing"),!1})},undecorate:i}),t.attach("domx.tables",r)}),t("skylark-domx-tables/main",["./tables"],function(t){return t}),t("skylark-domx-tables",["skylark-domx-tables/main"],function(t){return t})}(n),!a){var i=r("skylark-langx/skylark");o?module.exports=i:e.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-domx-tables.js.map
