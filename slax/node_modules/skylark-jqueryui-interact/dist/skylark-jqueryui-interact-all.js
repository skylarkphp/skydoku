/**
 * skylark-jqueryui-interact - A version of jqueryui interact that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-jqueryui-interact/
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(t,e,i){"function"==typeof i?(map[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),n=t.split("/");i.pop();for(var s=0;s<n.length;s++)"."!=n[s]&&(".."==n[s]?i.pop():i.push(n[s]));return i.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):map[t]={factory:null,resolved:!0,exports:i}},require=globals.require=function(t){if(!map.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var e=map[t];if(!e.resolved){var i=[];e.deps.forEach(function(t){i.push(require(t))}),e.exports=e.factory.apply(globals,i)||null,e.resolved=!0}return e.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx/skylark",[],function(){return{}}),define("skylark-langx/types",[],function(){var t,e={}.toString,i=(t={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e){t["[object "+e+"]"]=e.toLowerCase()}),function(i){return null==i?String(i):t[e.call(i)]||"object"});function n(t){var e;for(e in t)if(null!==t[e])return!1;return!0}function s(t){return"function"==i(t)}function r(t){return t&&t instanceof Node}function o(t){return"number"==typeof t}function a(t){return"object"==i(t)}function l(t){return"string"==typeof t}function h(t){return t&&t==t.window}return{isArray:function(t){return t&&t.constructor===Array},isArrayLike:function(t){return!l(t)&&!r(t)&&"number"==typeof t.length&&!s(t)},isBoolean:function(t){return"boolean"==typeof t},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isEmpty:n,isEmptyObject:n,isFunction:s,isHtmlNode:r,isNull:function(t){return"null"===i(t)},isNumber:o,isNumeric:o,isObject:a,isPlainObject:function(t){return a(t)&&!h(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:l,isSameOrigin:function(t){if(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t.startsWith(e)}},isSymbol:function(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag},isUndefined:function(t){return void 0===t},isWindow:h,type:i}}),define("skylark-langx/arrays",["./types"],function(t,e){var i=Array.prototype.filter,n=t.isArrayLike;function s(t,e,i,n){for(var s=t.length,r=i+(n?1:-1);n?r--:++r<s;)if(e(t[r],r,t))return r;return-1}function r(t){return t!=t}function o(t){if(n(t)){for(var e=[],i=0;i<t.length;i++){var s=t[i];if(n(s))for(var r=0;r<s.length;r++)e.push(s[r]);else e.push(s)}return e}return t}return{baseFindIndex:s,baseIndexOf:function(t,e,i){if(e!=e)return s(t,r,i);var n=i-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1},compact:function(t){return i.call(t,function(t){return null!=t})},first:function(t,e){return e?t.slice(0,e):t[0]},flatten:o,inArray:function(t,e){if(!e)return-1;var i;if(e.indexOf)return e.indexOf(t);i=e.length;for(;i--;)if(e[i]===t)return i;return-1},makeArray:function(t,e,i){if(n(t))return(i||[]).concat(Array.prototype.slice.call(t,e||0));return[t]},forEach:function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i)},map:function(t,e){var i,s,r,a=[];if(n(t))for(s=0;s<t.length;s++)null!=(i=e.call(t[s],t[s],s))&&a.push(i);else for(r in t)null!=(i=e.call(t[r],t[r],r))&&a.push(i);return o(a)},uniq:function(t){return i.call(t,function(e,i){return t.indexOf(e)==i})}}}),define("skylark-langx/numbers",["./types"],function(t){var e=t.isObject,i=t.isSymbol,n=1/0,s=1.7976931348623157e308,r=NaN,o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,c=parseInt;function u(t){if(!t)return 0===t?t:0;if((t=f(t))===n||t===-n){var e=t<0?-1:1;return e*s}return t==t?t:0}function f(t){if("number"==typeof t)return t;if(i(t))return r;if(e(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=e(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var s=l.test(t);return s||h.test(t)?c(t.slice(2),s?2:8):a.test(t)?r:+t}return{toFinite:u,toNumber:f,toInteger:function(t){var e=u(t),i=e%1;return e==e?i?e-i:e:0}}}),define("skylark-langx/objects",["./types","./numbers"],function(t,e){var i,n,s=Object.prototype.hasOwnProperty,r=Array.prototype.slice,o=t.isBoolean,a=t.isFunction,l=t.isObject,h=t.isPlainObject,c=t.isArray,u=t.isArrayLike,f=t.isString,p=e.toInteger;var d,m,g="undefined"!=typeof Symbol?Symbol.prototype:null;function v(t){if(!l(t))return[];var e=[];for(var i in t)e.push(i);return e}function y(t,e){if(!c(e))return null!=t&&s.call(t,e);for(var i=e.length,n=0;n<i;n++){var r=e[n];if(null==t||!s.call(t,r))return!1;t=t[r]}return!!i}function b(t,e,i,n){for(var s in e)n&&void 0!==t[s]||(i&&(h(e[s])||c(e[s]))?(h(e[s])&&!h(t[s])&&(t[s]={}),c(e[s])&&!c(t[s])&&(t[s]=[]),b(t[s],e[s],i,n)):void 0!==e[s]&&(t[s]=e[s]));return t}function w(t){var e=r.call(arguments,0),i=e.shift(),n=!1;return o(e[e.length-1])&&(n=e.pop()),{target:i,sources:e,deep:n}}function x(){var t=w.apply(this,arguments);return t.sources.forEach(function(e){b(t.target,e,t.deep,!1)}),t.target}function k(t){for(var e=_.keys(t),i=e.length,n=Array(i),s=0;s<i;s++)n[s]=t[e[s]];return n}return i=function(t,e,i,s){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&n(t,e,i,s)},n=function(t,e,n,s){var r=toString.call(t);if(r!==toString.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return g.valueOf.call(t)===g.valueOf.call(e)}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,h=e.constructor;if(l!==h&&!(a(l)&&l instanceof l&&a(h)&&h instanceof h)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],s=s||[];for(var c=n.length;c--;)if(n[c]===t)return s[c]===e;if(n.push(t),s.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!i(t[c],e[c],n,s))return!1}else{var u,f=Object.keys(t);if(c=f.length,Object.keys(e).length!==c)return!1;for(;c--;)if(u=f[c],void 0===e[u]||!i(t[u],e[u],n,s))return!1}return n.pop(),s.pop(),!0},{allKeys:v,clone:function t(e,i){var n;if(void 0===e||null===e)n=e;else if(i&&e.clone)n=e.clone();else if(c(e)){n=[];for(var s=0;s<e.length;s++)n.push(t(e[s]))}else if(h(e))for(var r in n={},e)n[r]=t(e[r]);else n=e;return n},defaults:(d=v,m=!0,function(t){var e=arguments.length;if(m&&(t=Object(t)),e<2||null==t)return t;for(var i=1;i<e;i++)for(var n=arguments[i],s=d(n),r=s.length,o=0;o<r;o++){var a=s[o];m&&void 0!==t[a]||(t[a]=n[a])}return t}),each:function(t,e){var i,n,s,r;if(t)if(void 0===(i=t.length)){for(n in t)if(t.hasOwnProperty(n)&&(r=t[n],!1===e.call(r,n,r)))break}else for(s=0;s<i&&(r=t[s],!1!==e.call(r,s,r));s++);return this},extend:function(t){var e,i=r.call(arguments,1);"boolean"==typeof t&&(e=t,t=i.shift());0==i.length&&(i=[t],t=this);return i.forEach(function(i){x(t,i,e)}),t},has:y,isEqual:function(t,e){return i(t,e)},includes:function(t,e,i,n){t=u(t)?t:k(t),i=i&&!n?p(i):0;var s=t.length;i<0&&(i=nativeMax(s+i,0));return f(t)?i<=s&&t.indexOf(e,i)>-1:!!s&&baseIndexOf(t,e,i)>-1},isMatch:function(t,e){var i=i(e),n=i.length;if(null==t)return!n;for(var s=Object(t),r=0;r<n;r++){var o=i[r];if(e[o]!==s[o]||!(o in s))return!1}return!0},keys:function(t){if(l(t))return[];var e=[];for(var i in t)y(t,i)&&e.push(i);return e},mixin:x,removeItem:function(t,e){if(c(t)){var i=t.indexOf(e);-1!=i&&t.splice(i,1)}else if(h(t))for(var n in t)if(t[n]==e){delete t[n];break}return this},result:function(t,e,i){c(e)||(e=[e]);var n=e.length;if(!n)return a(i)?i.call(t):i;for(var s=0;s<n;s++){var r=null==t?void 0:t[e[s]];void 0===r&&(r=i,s=n),t=a(r)?r.call(t):r}return t},safeMixin:function(){var t=w.apply(this,arguments);return t.sources.forEach(function(e){b(t.target,e,t.deep,!0)}),t.target},values:k}}),define("skylark-langx/klass",["./arrays","./objects","./types"],function(t,e,i){var n=t.uniq,s=e.has,r=e.mixin,o=i.isArray,a=i.isDefined;var l=function(){function t(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function e(l,h,c,u){o(h)&&(u=c,c=h,h=null),h=h||Object,a(c)&&!o(c)&&(u=c,c=!1);var f=h;c&&(c=function(t,e){var i=[];return e.forEach(function(t){if(s(t,"__mixins__"))throw new Error("nested mixins");for(var e=[];t;)e.unshift(t),t=t.superclass;i=i.concat(e)}),(i=(i=n(i)).filter(function(e){for(var i=t;i;){if(e===i)return!1;if(s(i,"__mixins__"))for(var n=i.__mixins__,r=0;r<n.length;r++)if(n[r]===e)return!1;i=i.superclass}return!0})).length>0&&i}(f,c)),c&&(f=function(t,e){for(var i=t,n=0;n<e.length;n++){var s=new Function;s.prototype=Object.create(i.prototype),s.__proto__=i,s.superclass=null,r(s.prototype,e[n].prototype),s.prototype.__mixin__=e[n],i=s}return i}(f,c));var p=l.klassName||"",d=new Function("return function "+p+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.superclass=h,d.__proto__=f,d._constructor||(d._constructor=t),c&&(d.__mixins__=c),d.partial||(d.partial=function(t,e){return function(t,e,n){var s=t.prototype,r=t.superclass.prototype,o=n&&n.noOverrided;n&&n.overrides;for(var a in e)if("constructor"!==a){var l=e[a];"function"==typeof e[a]?s[a]=l._constructor||o||"function"!=typeof r[a]?l:function(t,e,i){return function(){var t=this.overrided;this.overrided=i;var n=e.apply(this,arguments);return this.overrided=t,n}}(0,l,r[a]):i.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(s,a,l):s[a]=l}return t}(this,t,e)}),d.inherit||(d.inherit=function(t,i,n){return e(t,this,i,n)}),d.partial(l,u),d}}();return l}),define("skylark-langx/ArrayStore",["./klass"],function(t){var e=function(t){if(!t)return t;var i=!!t.then;function n(n){t[n]=function(){var s=arguments,r=Deferred.when(t,function(t){return e(Array.prototype[n].apply(t,s))});if("forEach"!==n||i)return r}}return i&&(t=Object.delegate(t)),n("forEach"),n("filter"),n("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},i=t({klassName:"ArrayStore",queryEngine:function(t,e){switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var i=t;t=function(t){for(var e in i){var n=i[e];if(n&&n.test){if(!n.test(t[e],t))return!1}else if(n!=t[e])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}function n(i){var n=function(t,e,i){var n,s=0,r=t&&t.length||0,o=[];r&&"string"==typeof t&&(t=t.split(""));"string"==typeof e&&(e=cache[e]||buildFn(e));if(i)for(;s<r;++s)n=t[s],e.call(i,n,s,t)&&o.push(n);else for(;s<r;++s)n=t[s],e(n,s,t)&&o.push(n);return o}(i,t),s=e&&e.sort;if(s&&n.sort("function"==typeof s?s:function(t,e){for(var i,n=0;i=s[n];n++){var r=t[i.attribute],o=e[i.attribute];if(r=null!=r?r.valueOf():r,o=null!=o?o.valueOf():o,r!=o)return!!i.descending==(null==r||r>o)?-1:1}return 0}),e&&(e.start||e.count)){var r=n.length;(n=n.slice(e.start||0,(e.start||0)+(e.count||1/0))).total=r}return n}return n.matches=t,n},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,e){var i=this.data,n=this.index,s=this.idProperty,r=t[s]=e&&"id"in e?e.id:s in t?t[s]:Math.random();if(r in n){if(e&&!1===e.overwrite)throw new Error("Object already exists");i[n[r]]=t}else n[r]=i.push(t)-1;return r},add:function(t,e){return(e=e||{}).overwrite=!1,this.put(t,e)},remove:function(t){var e=this.index,i=this.data;if(t in e)return i.splice(e[t],1),this.setData(i),!0},query:function(t,i){return e(this.queryEngine(t,i)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var e=0,i=t.length;e<i;e++)this.index[t[e][this.idProperty]]=e},init:function(t){for(var e in t)this[e]=t[e];this.setData(this.data||[])}});return i}),define("skylark-langx/aspect",[],function(){var t,e=0;function i(i){return function(n,s,r,o){var a,l=n[s];l&&l.target==n||(n[s]=a=function(){for(var i=e,n=arguments,s=a.before;s;)n=s.advice.apply(this,n)||n,s=s.next;if(a.around)var r=a.around.advice(this,n);for(var o=a.after;o&&o.id<i;){if(o.receiveArguments){var l=o.advice.apply(this,n);r=l===t?r:l}else r=o.advice.call(this,r,n);o=o.next}return r},l&&(a.around={advice:function(t,e){return l.apply(t,e)}}),a.target=n);var h=function(t,i,n,s){var r,o=t[i],a="around"==i;if(a){var l=n(function(){return o.advice(this,arguments)});r={remove:function(){l&&(l=t=n=null)},advice:function(t,e){return l?l.apply(t,e):o.advice(t,e)}}}else r={remove:function(){if(r.advice){var e=r.previous,s=r.next;s||e?(e?e.next=s:t[i]=s,s&&(s.previous=e)):delete t[i],t=n=r.advice=null}},id:e++,advice:n,receiveArguments:s};if(o&&!a)if("after"==i){for(;o.next&&(o=o.next););o.next=r,r.previous=o}else"before"==i&&(t[i]=r,r.next=o,o.previous=r);else t[i]=r;return r}(a||l,i,r,o);return r=null,h}}return{after:i("after"),around:i("around"),before:i("before")}}),define("skylark-langx/funcs",["./objects","./types"],function(t,e){var i=t.mixin,n=Array.prototype.slice,s=e.isFunction,r=e.isString;var o=function(){function t(){}return function(e,n){t.prototype=e;var s=new t;return t.prototype=null,n&&i(s,n),s}}(),a={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};return{debounce:function(t,e){var i;return function(){var n=this,s=arguments;i&&clearTimeout(i),i=setTimeout(function(){i=null,t.apply(n,s)},e)}},delegate:o,defer:function(t){requestAnimationFrame?requestAnimationFrame(t):setTimeoutout(t);return this},noop:function(){},proxy:function t(e,i){var o=2 in arguments&&n.call(arguments,2);if(s(e)){return function(){return e.apply(i,o?o.concat(n.call(arguments)):arguments)}}if(r(i))return o?(o.unshift(e[i],e),t.apply(null,o)):t(e[i],e);throw new TypeError("expected function")},returnTrue:function(){return!0},returnFalse:function(){return!1},templateSettings:a,template:function(e,i,n){!i&&n&&(i=n);i=t.defaults({},i,a);var s,r=RegExp([(i.escape||noMatch).source,(i.interpolate||noMatch).source,(i.evaluate||noMatch).source].join("|")+"|$","g"),o=0,l="__p+='";e.replace(r,function(t,i,n,s,r){return l+=e.slice(o,r).replace(escapeRegExp,escapeChar),o=r+t.length,i?l+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?l+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(l+="';\n"+s+"\n__p+='"),t}),l+="';\n",i.variable||(l="with(obj||{}){\n"+l+"}\n");l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{s=new Function(i.variable||"obj","_",l)}catch(t){throw t.source=l,t}var h=function(t){return s.call(this,t,_)},c=i.variable||"obj";return h.source="function("+c+"){\n"+l+"}",h}}}),define("skylark-langx/Deferred",["./arrays","./funcs","./objects"],function(t,e,i){"use strict";var n=Symbol?Symbol():"__pglisteners",s=Symbol?Symbol():"__pgnotifies",r=Array.prototype.slice,o=e.proxy,a=t.makeArray,l=i.result,h=i.mixin;h(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var c=function(){var t=this,e=this.promise=new Promise(function(e,i){t._resolve=e,t._reject=i});u(e,t),this[n]=[],this[s]=[]};function u(t,e){var i={state:function(){return e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},then:function(t,e,i){return i&&this.progress(i),u(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)}))},progress:function(t){return e[s].forEach(function(e){t(e)}),e[n].push(t),this}};return i.pipe=i.then,h(t,i)}return c.prototype.resolve=function(t){var e=r.call(arguments);return this.resolveWith(null,e)},c.prototype.resolveWith=function(t,e){return(e=e?a(e):[]).__ctx__=t,this._resolve(e),this._resolved=!0,this},c.prototype.notify=function(t){try{return this[s].push(t),this[n].forEach(function(e){return e(t)})}catch(t){this.reject(t)}return this},c.prototype.reject=function(t){var e=r.call(arguments);return this.rejectWith(null,e)},c.prototype.rejectWith=function(t,e){return(e=e?a(e):[]).__ctx__=t,this._reject(e),this._rejected=!0,this},c.prototype.isResolved=function(){return!!this._resolved},c.prototype.isRejected=function(){return!!this._rejected},c.prototype.then=function(t,e,i){var n=l(this,"promise");return n.then(t,e,i)},c.prototype.progress=function(t){var e=l(this,"promise");return e.progress(t)},c.prototype.catch=function(t){var e=l(this,"promise");return e.catch(t)},c.prototype.done=function(){var t=l(this,"promise");return t.done.apply(t,arguments)},c.prototype.fail=function(t){var e=l(this,"promise");return e.fail(t)},c.all=function(t){var e=new c;return Promise.all(t).then(e.resolve.bind(e),e.reject.bind(e)),l(e,"promise")},c.first=function(t){return u(Promise.race(t))},c.when=function(t,e,i,n){var s=t&&"function"==typeof t.then,r=s&&t instanceof Promise;if(!s)return arguments.length>1?e?e(t):t:(new c).resolve(t);if(!r){var a=new c(t.cancel);t.then(o(a.resolve,a),o(a.reject,a),a.notify),t=a.promise}return e||i||n?t.then(e,i,n):t},c.reject=function(t){var e=new c;return e.reject(t),e.promise},c.immediate=c.resolve=function(t){var e=new c;return e.resolve.apply(e,arguments),e.promise},c}),define("skylark-langx/async",["./Deferred","./objects"],function(t,e){var i=e.each,n={parallel:function(e,n,s){var r=[];return s=s||null,n=n||[],i(e,function(t,e){r.push(e.apply(s,n))}),t.all(r)},series:function(e,n,s){var r=[],o=new t,a=o.promise;return s=s||null,n=n||[],o.resolve(),i(e,function(t,e){a=a.then(function(){return e.apply(s,n)}),r.push(a)}),t.all(r)},waterful:function(e,n,s){var r=new t,o=r.promise;return s=s||null,n=n||[],r.resolveWith(s,n),i(e,function(t,e){o=o.then(e)}),o}};return n}),define("skylark-langx/datetimes",[],function(){return{parseMilliSeconds:function(t){var e=t.split(" "),i=parseInt(e[0]);if(isNaN(i))return 0;switch(e[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*i;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*i;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*i;case"days":case"day":case"DD":case"dd":case"d":return 864e5*i;case"months":case"month":case"MM":case"M":return 24192e5*i;case"weeks":case"week":case"W":case"w":return 6048e5*i;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*i;default:return 0}}}}),define("skylark-langx/Evented",["./klass","./arrays","./objects","./types"],function(t,e,i,n){var s=Array.prototype.slice,r=e.compact,o=n.isDefined,a=n.isPlainObject,l=n.isFunction,h=n.isString,c=n.isEmptyObject,u=i.mixin,f=t({on:function(t,e,i,n,s,r){var o=this,c=this._hub||(this._hub={});return a(t)?(s=n,each(t,function(t,n){o.on(t,e,i,n,s,r)}),this):(h(e)||l(n)||(s=n,n=i,i=e,e=void 0),l(i)&&(s=n,n=i,i=null),h(t)&&(t=t.split(/\s/)),t.forEach(function(t){(c[t]||(c[t]=[])).push({fn:n,selector:e,data:i,ctx:s,one:r})}),this)},one:function(t,e,i,n,s){return this.on(t,e,i,n,s,1)},trigger:function(t){if(!this._hub)return this;var e=this;h(t)&&(t=new CustomEvent(t)),Object.defineProperty(t,"target",{value:this});var i=s.call(arguments,1);return i=o(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(n){var s=e._hub[n];if(s){for(var o=s.length,a=!1,l=0;l<o;l++){var h=s[l];t.data?h.data&&(t.data=u({},h.data,t.data)):t.data=h.data||null,h.fn.apply(h.ctx,i),h.one&&(s[l]=null,a=!0)}a&&(e._hub[n]=r(s))}}),this},listened:function(t){var e=(this._hub||(this._events={}))[t]||[];return e.length>0},listenTo:function(t,e,i,n){if(!t)return this;h(i)&&(i=this[i]),n?t.one(e,i,this):t.on(e,i,this);for(var s,r=this._listeningTo||(this._listeningTo=[]),o=0;o<r.length;o++)if(r[o].obj==t){s=r[o];break}s||r.push(s={obj:t,events:{}});var a=s.events,l=a[e]=a[e]||[];return-1==l.indexOf(i)&&l.push(i),this},listenToOnce:function(t,e,i){return this.listenTo(t,e,i,1)},off:function(t,e){var i=this._hub||(this._hub={});return h(t)&&(t=t.split(/\s/)),t.forEach(function(t){var n=i[t],s=[];if(n&&e)for(var r=0,o=n.length;r<o;r++)n[r].fn!==e&&n[r].fn._!==e&&s.push(n[r]);s.length?i[t]=s:delete i[t]}),this},unlistenTo:function(t,e,i){var n=this._listeningTo;if(!n)return this;for(var s=0;s<n.length;s++){var o=n[s];if(!t||t==o.obj){var a=o.events;for(var l in a)if(!e||e==l){for(var h=a[l],u=0;u<h.length;u++)i&&i!=h[s]||(o.obj.off(l,h[s],this),h[s]=null);h=a[l]=r(h),c(h)&&(a[l]=null)}c(a)&&(n[s]=null)}}return n=this._listeningTo=r(n),c(n)&&(this._listeningTo=null),this}});return f}),define("skylark-langx/hoster",[],function(){var t={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(t.isNode=!0,t.isBrowser=!1),t.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var e=null;if(Object.defineProperty(t,"document",function(){if(!e){var t="undefined"==typeof window?require("html-element"):window;e=t.document}return e}),t.isBrowser){var i=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(navigator.userAgent),n=t.browser={};i.browser&&(n[i.browser]=!0,n.version=i.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0)}return t}),define("skylark-langx/strings",[],function(){var t=0;return{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(e){return t}},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},serializeValue:function(t){return JSON.stringify(t)},substitute:function(t,e,i,n){function s(t,e){if(t.match(/\./)){var i,n=function(t,e){var s=t.pop();return s?e[s]?n(t,i=e[s]):null:i};return n(t.split(".").reverse(),e)}return e[t]}return n=n||window,i=i?proxy(n,i):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,r,o){var a=s(r,e);return o&&(a=s(o,n).call(n,a,r)),i(a,r).toString()})},trim:function(t){return null==t?"":String.prototype.trim.call(t)},uniqueId:function(e){var i=++t+"";return e?e+i:i},upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}}),define("skylark-langx/Xhr",["./arrays","./Deferred","./Evented","./objects","./funcs","./types"],function(arrays,Deferred,Evented,objects,funcs,types){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(t){return a||(a=document.createElement("a")),a.href=t,a.href},a,Xhr=function(){var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,xhrFields:{withCredentials:!0}};function mimeToDataType(t){if(t&&(t=t.split(";",2)[0]),t){if(t==htmlType)return"html";if(t==jsonType)return"json";if(scriptTypeRE.test(t))return"script";if(xmlTypeRE.test(t))return"xml"}return"text"}function appendQuery(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function serializeData(t){t.data=t.data||t.query,t.processData&&t.data&&"string"!=type(t.data)&&(t.data=param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=appendQuery(t.url,t.data),t.data=void 0)}function serialize(t,e,i,n){var s,r=isArray(e),o=isPlainObject(e);each(e,function(e,a){s=type(a),n&&(e=i?n:n+"["+(o||"object"==s||"array"==s?e:"")+"]"),!n&&r?t.add(a.name,a.value):"array"==s||!i&&"object"==s?serialize(t,a,i,e):t.add(e,a)})}var param=function(t,e){var i=[];return i.add=function(t,e){isFunction(e)&&(e=e()),null==e&&(e=""),this.push(escape(t)+"="+escape(e))},serialize(i,t,e),i.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?eval(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType?result=blankRE.test(result)?null:JSON.parse(result):"blob"==dataType?result=Blob([xhrObj.response]):"arraybuffer"==dataType&&(result=xhr.reponse)}catch(t){error=t}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(t){deferred&&deferred.notify(t,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=headers[hdr]:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var t=this._,e=t.xhr;e&&e.abort()},request:function(t){return this._request(t)},get:function(t){return(t=t||{}).type="GET",this._request(t)},post:function(t){return(t=t||{}).type="POST",this._request(t)},patch:function(t){return(t=t||{}).type="PATCH",this._request(t)},put:function(t){return(t=t||{}).type="PUT",this._request(t)},del:function(t){return(t=t||{}).type="DELETE",this._request(t)},init:function(t){this._={options:t||{}}}});return["request","get","post","put","del","patch"].forEach(function(t){Xhr[t]=function(e,i){var n=new Xhr({url:e});return n[t](i)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return Xhr}),define("skylark-langx/Restful",["./Evented","./objects","./strings","./Xhr"],function(t,e,i,n){var s=e.mixin,r=i.substitute,o=t.inherit({klassName:"Restful",idAttribute:"id",getBaseUrl:function(t){var e=r(this.baseEndpoint,t),i=this.server+this.basePath+e;return void 0!==t[this.idAttribute]&&(i=i+"/"+t[this.idAttribute]),i},_head:function(t){},_get:function(t){return n.get(this.getBaseUrl(t),t)},_post:function(t,e){var i=this.getBaseUrl(t);return e&&(i=i+"/"+e),n.post(i,t)},_put:function(t,e){var i=this.getBaseUrl(t);return e&&(i=i+"/"+e),n.put(i,t)},_delete:function(t){var e=this.getBaseUrl(t);return n.del(e)},_patch:function(t){var e=this.getBaseUrl(t);return n.patch(e,t)},query:function(t){return this._post(t)},retrieve:function(t){return this._get(t)},create:function(t){return this._post(t)},update:function(t){return this._put(t)},delete:function(t){return this._delete(t)},patch:function(t){return this._patch(t)},init:function(t){s(this,t)}});return o}),define("skylark-langx/Stateful",["./Evented","./strings","./objects"],function(t,e,i){var n=i.isEqual,s=i.mixin,r=i.result,o=i.isEmptyObject,a=i.clone,l=e.uniqueId,h=t.inherit({_construct:function(t,e){var i=t||{};e||(e={}),this.cid=l(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var n=r(this,"defaults");i=s({},n,i),this.set(i,e),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return a(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,i){if(null==t)return this;var s;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;var r=i.unset,o=i.silent,l=[],h=this._changing;this._changing=!0,h||(this._previousAttributes=a(this.attributes),this.changed={});var c=this.attributes,u=this.changed,f=this._previousAttributes;for(var p in s)e=s[p],n(c[p],e)||l.push(p),n(f[p],e)?delete u[p]:u[p]=e,r?delete c[p]:c[p]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!o){l.length&&(this._pending=i);for(var d=0;d<l.length;d++)this.trigger("change:"+l[d],this,c[l[d]],i)}if(h)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,s({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&a(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var s in t){var r=t[s];n(e[s],r)||(i[s]=r)}return!o(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},s({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,s(e,{validationError:i})),!1)}});return h}),define("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./datetimes","./Deferred","./Evented","./funcs","./hoster","./klass","./numbers","./objects","./Restful","./Stateful","./strings","./types","./Xhr"],function(t,e,i,n,s,r,o,a,l,h,c,u,f,p,d,m,g,v){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var y=f.mixin,b=f.safeMixin,_=g.isFunction;var w=1;function x(){return x}return y(x,{createEvent:function(t,e){var i=new CustomEvent(t,e);return b(i,e)},funcArg:function(t,e,i,n){return _(e)?e.call(t,i,n):e},getQueryParams:function(t){var e=(t=t||window.location.href).split("?"),i={};e.length>1&&e[1].split("&").forEach(function(t){var e=t.split("=");i[e[0]]=e[1]});return i},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=w++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),y(x,e,n,r,l,u,f,m,g,{ArrayStore:i,async:s,Deferred:o,Evented:a,hoster:h,klass:c,Restful:p,Stateful:d,Xhr:v}),t.langx=x}),define("skylark-utils-dom/langx",["skylark-langx/langx"],function(t){return t}),define("skylark-jqueryui-interact/ddmanager",["skylark-utils-dom/langx"],function(t){var e={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,s,r=e.droppables[t.options.scope]||[],o=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(s=0;s<a.length;s++)if(a[s]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(i,n){var s=!1;return t.each((e.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.intersect(i,this,this.options.tolerance,n)&&(s=this._drop.call(this,n)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.prepareOffsets(t,i)})},drag:function(i,n){i.options.refreshPositions&&e.prepareOffsets(i,n),t.each(e.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,s,r,o=e.intersect(i,this,this.options.tolerance,n),a=!o&&this.isover?"isout":o&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===s})).length&&((t=$(r[0]).droppable("instance")).greedyChild="isover"===a)),t&&"isover"===a&&(t.isover=!1,t.isout=!0,t._out.call(t,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),t&&"isout"===a&&(t.isout=!1,t.isover=!0,t._over.call(t,n)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.prepareOffsets(t,i)}};return e.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,n,s){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=o+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,f=c+i.proportions().height;switch(n){case"fit":return h<=r&&a<=u&&c<=o&&l<=f;case"intersect":return h<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&c<o+e.helperProportions.height/2&&l-e.helperProportions.height/2<f;case"pointer":return t(s.pageY,c,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(o>=c&&o<=f||l>=c&&l<=f||o<c&&l>f)&&(r>=h&&r<=u||a>=h&&a<=u||r<h&&a>u);default:return!1}}}(),e}),define("skylark-utils-dom/skylark",["skylark-langx/skylark"],function(t){return t}),define("skylark-utils-dom/dom",["./skylark"],function(t){return t.dom={}}),define("skylark-utils-dom/browser",["./dom","./langx"],function(t,e){"use strict";var i,n,s=e.hoster.browser,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},o=null,a="",l="",h={},c={},u=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,f=window.document,p=f.createElement("div"),d=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.matchesSelector,m=p.requestFullscreen||p.webkitRequestFullscreen||p.mozRequestFullScreen||p.msRequestFullscreen,g=(f.exitFullscreen||f.webkitCancelFullScreen||f.mozCancelFullScreen||f.msExitFullscreen,p.style);for(var v in g){var y=v.match(n||u);if(y){n||(i=y[1],n=new RegExp("^("+i+")(.*)$"),i,a="-"+i.toLowerCase()+"-",l=i.toLowerCase()),h[e.lowerFirst(y[2])]=v;var b=e.dasherize(y[2]);c[b]=a+b,r[v]&&(o=r[v])}}return o||void 0!==g.transition&&(o=r.transition),e.mixin(s,{css3PropPrefix:a,isIE:!!/msie/i.exec(window.navigator.userAgent),normalizeStyleProperty:function(t){return h[t]||t},normalizeCssProperty:function(t){return c[t]||t},normalizeCssEvent:function(t){return l?l+t:t.toLowerCase()},matchesSelector:d,requestFullScreen:m,exitFullscreen:m,location:function(){return window.location},support:{}}),o&&(s.support.transition={end:o}),p=null,t.browser=s}),define("skylark-utils-dom/styler",["./dom","./langx"],function(t,e){Array.prototype.every;var i=Array.prototype.forEach,n=e.camelCase,s=e.dasherize;function r(t,e){return"number"!=typeof e||o[s(t)]?e:e+"px"}var o={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},a={};function l(t){return t in a?a[t]:a[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){var i=t.className||"",n=i&&void 0!==i.baseVal;if(void 0===e)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}var c={};function u(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=window),e.getComputedStyle(t)}var f=function(){return f};return e.mixin(f,{autocssfix:!1,cssHooks:{},addClass:function(t,i){if(!i)return this;var n,s=h(t);n=e.isString(i)?i.split(/\s+/g):i;return n.forEach(function(t){var e=l(t);s.match(e)||(s+=(s?" ":"")+t)}),h(t,s),this},className:h,css:function(t,o,a){if(arguments.length<3){var l=u(t);if(e.isString(o))return t.style[n(o)]||l.getPropertyValue(s(o));if(e.isArrayLike(o)){var h={};return i.call(o,function(e){h[e]=t.style[n(e)]||l.getPropertyValue(s(e))}),h}}var c="";if("string"==typeof o)a||0===a?c=s(o)+":"+r(o,a):t.style.removeProperty(s(o));else for(key in o)void 0!==o[key]&&(o[key]||0===o[key]?c+=s(key)+":"+r(key,o[key])+";":t.style.removeProperty(s(key)));return t.style.cssText+=";"+c,this},disabled:function(t,e){if(arguments.length<2)return!!this.dom.disabled;return t.disabled=e,this},hasClass:function(t,e){var i=l(e);return t.className&&t.className.match(i)},hide:function(t){return f.css(t,"display","none"),this},isInvisible:function(t){return"none"==f.css(t,"display")||0==f.css(t,"opacity")},removeClass:function(t,i){if(i){var n=h(t);(e.isString(i)?i.split(/\s+/g):i).forEach(function(t){var e=l(t);n.match(e)&&(n=n.replace(e," "))}),h(t,n.trim())}else h(t,"");return this},show:function(t){f.css(t,"display",""),"none"==f.css(t,"display")&&f.css(t,"display",function(t){var e,i;c[t]||(e=document.createElement(t),document.body.appendChild(e),i=u(e).getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),c[t]=i);return c[t]}(t.nodeName));return this},toggleClass:function(t,e,i){var n=this;return e.split(/\s+/g).forEach(function(e){void 0===i&&(i=!n.hasClass(t,e)),i?n.addClass(t,e):n.removeClass(t,e)}),n}}),t.styler=f}),define("skylark-utils-dom/noder",["./dom","./langx","./browser","./styler"],function(t,e,i,n){var s=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g),r=/^\s*<(\w+|!)[^>]*>/,o=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,a=document.createElement("div"),l=document.createElement("table"),h=document.createElement("tbody"),c=document.createElement("tr"),u={tr:h,tbody:l,thead:l,tfoot:l,td:c,th:c,"*":a},f=/^(?:body|html)$/i,p=Array.prototype.map,d=Array.prototype.slice;function m(t,i){return e.isArrayLike(t)||(t=[t]),i&&(t=p.call(t,function(t){return t.cloneNode(!0)})),e.flatten(t)}function g(t,e,i){for(var n=t,s=m(e,i),r=0;r<s.length;r++)n.appendChild(s[r]);return this}function v(t,e,i){var n=document.createElement(t);if(e)for(var s in e)n.setAttribute(s,e[s]);return i&&g(i,n),n}var y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;function b(t,e,i){if(i)return t.parentNode===e;if(document.documentElement.contains)return e.contains(t);for(;t;){if(e===t)return!0;t=t.parentNode}return!1}function _(t){return t?9==t.nodeType?t:t.ownerDocument:document}function w(){return w}return e.mixin(w,{active:function(t){var e;t=t||document;try{e=t.activeElement}catch(i){e=t.body}e||(e=t.body);e.nodeName||(e=t.body);return e},blur:function(t){t.blur()},body:function(){return document.body},clone:function(t,e){var i,n=this;if(!s||1!==t.nodeType||e)return t.cloneNode(e);if(!e)return i=document.createElement(t.nodeName),each(n.getAttribs(t),function(e){n.setAttrib(i,e.nodeName,n.getAttrib(t,e.nodeName))}),i},contents:function(t){if(function(t,e){var i=t.nodeName&&t.nodeName.toLowerCase();if(void 0!==e)return i===e.toLowerCase();return i}(t,"iframe"))return t.contentDocument;return t.childNodes},createElement:v,createFragment:function(i){if(i=e.trim(i),o.test(i))return[v(RegExp.$1)];var n=r.test(i)&&RegExp.$1;n in u||(n="*");var s=u[n];return s.innerHTML=""+i,(t=d.call(s.childNodes)).forEach(function(t){s.removeChild(t)}),t},contains:function(t,e){return b(e,t)},createTextNode:function(t){return document.createTextNode(t)},doc:function(){return document},empty:function(t){for(;t.hasChildNodes();){var e=t.firstChild;t.removeChild(e)}return this},fullScreen:function(t){if(!1===t)i.exitFullScreen.apply(document);else{if(!t)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i.requestFullScreen.apply(t),t}},focusable:function(t,e){var i,n,s,r,o,a=t.nodeName.toLowerCase();if("area"===a)return i=t.parentNode,n=i.name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&((s=$("img[usemap='#"+n+"']")).length>0&&s.is(":visible"));/^(input|select|textarea|button|object)$/.test(a)?(r=!t.disabled)&&(o=$(t).closest("fieldset")[0])&&(r=!o.disabled):r="a"===a&&t.href||e;return r&&$(t).is(":visible")&&visible($(t))},html:function(t,i){if(void 0===i)return t.innerHTML;if(this.empty(t),i=i||"",e.isString(i)&&(i=i.replace(y,"<$1></$2>")),e.isString(i)||e.isNumber(i))t.innerHTML=i;else if(e.isArrayLike(i))for(var n=0;n<i.length;n++)t.appendChild(i[n]);else t.appendChild(i)},isChildOf:b,isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isInDocument:function(t){return t===document.body||document.body.contains(t)},isWindow:e.isWindow,offsetParent:function(t){var e=t.offsetParent||document.body;for(;e&&!f.test(e.nodeName)&&"static"==n.css(e,"position");)e=e.offsetParent;return e},ownerDoc:_,ownerWindow:function(t){var e=_(t);return e.defaultView||e.parentWindow},after:function(t,e,i){var n=(r=t).parentNode;if(n)for(var s=m(e,i),r=r.nextSibling,o=0;o<s.length;o++)r?n.insertBefore(s[o],r):n.appendChild(s[o]);return this},before:function(t,e,i){var n=t,s=n.parentNode;if(s)for(var r=m(e,i),o=0;o<r.length;o++)s.insertBefore(r[o],n);return this},prepend:function(t,e,i){for(var n=t,s=n.firstChild,r=m(e,i),o=0;o<r.length;o++)s?n.insertBefore(r[o],s):n.appendChild(r[o]);return this},append:g,remove:function(t){if(t&&t.parentNode)try{t.parentNode.removeChild(t)}catch(t){console.warn("The node is already removed",t)}return this},removeChild:function(t,i){e.isArrayLike(i)||(i=[i]);for(var n=0;n<i.length;n++)t.removeChild(i[n]);return this},replace:function(t,e){return e.parentNode.replaceChild(t,e),this},throb:function(t,e){var i,s=this,r=(e=e||{}).text,o=e.style,a=e.time,l=e.callback,h=this.createElement("div",{className:e.className||"throbber",style:o}),c=(function(t,e){var i=v("div",e);n.css(i,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),t.appendChild(i)}(h,{className:"overlay fade"}),this.createElement("div",{className:"throb"})),u=this.createTextNode(r||""),f=function(){i&&(clearTimeout(i),i=null),h&&(s.remove(h),h=null)};c.appendChild(u),h.appendChild(c),t.appendChild(h),a&&(i=setTimeout(function(){f(),l&&l()},a));return{remove:f,update:function(t){t&&t.text&&h&&(u.nodeValue=t.text)}}},traverse:function t(e,i){i(e);for(var n=0,s=e.childNodes.length;n<s;n++)t(e.childNodes[n],i);return this},reverse:function(t){for(var e=t.firstChild,i=t.children.length-1;i>0;i--)if(i>0){var n=t.children[i];t.insertBefore(n,e)}},wrapper:function(t,i){e.isString(i)&&(i=this.createFragment(i).firstChild);t.parentNode.insertBefore(i,t),i.appendChild(t)},wrapperInner:function(t,e){var i=d.call(t.childNodes);t.appendChild(e);for(var n=0;n<i.length;n++)e.appendChild(i[n]);return this},unwrap:function(t){var e=t.parentNode;if(e){if(this.isDoc(e.parentNode))return;e.parentNode.insertBefore(t,e)}}}),t.noder=w}),define("skylark-utils-dom/finder",["./dom","./langx","./browser","./noder"],function(t,e,n,s,r){var o={},a=Array.prototype.filter,l=Array.prototype.slice,h=n.matchesSelector;(function(){var t,e,i,n,s,r={},o={},a=/\\/g,l=function(i,s){if(null==i)return null;if(!0===i.Slick)return i;i=(""+i).replace(/^\s+|\s+$/g,"");var a=(n=!!s)?o:r;if(a[i])return a[i];for(t={Slick:!0,expressions:[],raw:i,reverse:function(){return l(this.raw,!0)}},e=-1;i!=(i=i.replace(f,p)););return t.length=t.expressions.length,a[t.raw]=n?c(t):t},h=function(t){return"!"===t?" ":" "===t?"!":/^!/.test(t)?t.replace(/^!/,""):"!"+t},c=function(t){for(var e=t.expressions,i=0;i<e.length;i++){for(var n=e[i],s={parts:[],tag:"*",combinator:h(n[0].combinator)},r=0;r<n.length;r++){var o=n[r];o.reverseCombinator||(o.reverseCombinator=" "),o.combinator=o.reverseCombinator,delete o.reverseCombinator}n.reverse().push(s)}return t},u=(s=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(t){return t.replace(s,"\\")}),f=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+u(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function p(s,r,o,l,c,f,p,d,m,g,v,y,b,_,w,x){if((r||-1===e)&&(t.expressions[++e]=[],i=-1,r))return"";if(o||l||-1===i){o=o||" ";var k=t.expressions[e];n&&k[i]&&(k[i].reverseCombinator=h(o)),k[++i]={combinator:o,tag:"*"}}var P=t.expressions[e][i];if(c)P.tag=c.replace(a,"");else if(f)P.id=f.replace(a,"");else if(p)p=p.replace(a,""),P.classList||(P.classList=[]),P.classes||(P.classes=[]),P.classList.push(p),P.classes.push({value:p,regexp:new RegExp("(^|\\s)"+u(p)+"(\\s|$)")});else if(b)x=(x=x||w)?x.replace(a,""):null,P.pseudos||(P.pseudos=[]),P.pseudos.push({key:b.replace(a,""),value:x,type:1==y.length?"class":"element"});else if(d){var C,S;switch(d=d.replace(a,""),v=(v||"").replace(a,""),m){case"^=":S=new RegExp("^"+u(v));break;case"$=":S=new RegExp(u(v)+"$");break;case"~=":S=new RegExp("(^|\\s)"+u(v)+"(\\s|$)");break;case"|=":S=new RegExp("^"+u(v)+"(-|$)");break;case"=":C=function(t){return v==t};break;case"*=":C=function(t){return t&&t.indexOf(v)>-1};break;case"!=":C=function(t){return v!=t};break;default:C=function(t){return!!t}}""==v&&/^[*$^]=$/.test(m)&&(C=function(){return!1}),C||(C=function(t){return t&&S.test(t)}),P.attributes||(P.attributes=[]),P.attributes.push({key:d,operator:m,value:v,test:C})}return""}var d=this.Slick||{};d.parse=function(t){return l(t)},d.escapeRegExp=u,this.Slick||(this.Slick=d)}).apply(o);var c=/^(?:input|select|textarea|button)$/i,u=/^h\d$/i,l=Array.prototype.slice;o.parseSelector=o.Slick.parse;var f=o.pseudos={button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},checked:function(t){return!!t.checked},contains:function(t,e,i,n){if($(this).text().indexOf(n)>-1)return this},disabled:function(t){return!!t.disabled},enabled:function(t){return!t.disabled},eq:function(t,e,i,n){return e==n},even:function(t,e,i,n){return e%2==0},focus:function(t){return document.activeElement===t&&(t.href||t.type||t.tabindex)},focusable:function(t){return s.focusable(t,null!=t.tabindex)},first:function(t,e){return 0===e},gt:function(t,e,i,n){return e>n},has:function(t,e,i,n){return b(t,n)},header:function(t){return u.test(t.nodeName)},hidden:function(t){return!o.pseudos.visible(t)},input:function(t){return c.test(t.nodeName)},last:function(t,e,i){return e===i.length-1},lt:function(t,e,i,n){return e<n},not:function(t,e,i,n){return!x(t,n)},odd:function(t,e,i,n){return e%2==1},parent:function(t){return!!t.parentNode},selected:function(t){return!!t.selected},tabbable:function(t){var e=t.tabindex,i=null!=e;return(!i||e>=0)&&s.focusable(element,i)},text:function(t){return"text"===t.type},visible:function(t){return t.offsetWidth&&t.offsetWidth}};function p(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function d(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}for(i in["first","eq","last"].forEach(function(t){f[t].isArrayFilter=!0}),f.nth=f.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f[i]=p(i);for(i in{submit:!0,reset:!0})f[i]=d(i);function m(t,i,n){for(var s=[],r=n&&e.isString(n);(t=t.parentNode)&&9!==t.nodeType;)if(s.push(t),n)if(r){if(x(t,n))break}else if(t==n)break;return i&&(s=o.filter(s,i)),s}function g(t,e){for(var i=t.childNodes,n=[],s=0;s<i.length;s++){var t=i[s];1==t.nodeType&&n.push(t)}return e&&(n=o.filter(n,e)),n}function v(t,e){try{return l.call(t.querySelectorAll(e))}catch(t){}return o.query(t,e)}function y(t,e){try{return t.querySelector(e)}catch(t){}var i=o.query(t,e);return i.length>0?i[0]:null}function b(t,e){return e||(e=t,t=document.body),x(t,e)?t:y(t,e)}function _(t,e,i){for(var n=t.childNodes,s=n[0];s;){if(1==s.nodeType){if(!e||x(s,e))return s;if(i)break}s=s.nextSibling}return null}function w(t,e,i){for(var n=t.childNodes,s=n[n.length-1];s;){if(1==s.nodeType){if(!e||x(s,e))return s;if(i)break}s=s.previousSibling}return null}function x(t,i){if(!i||!t||1!==t.nodeType)return!1;if(e.isString(i)){try{return h.call(t,i.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(t){}return o.match(t,i)}return e.isArrayLike(i)?e.inArray(t,i)>-1:e.isPlainObject(i)?o.check(t,i):t===i}function k(t,e,i){for(var n=t.nextSibling;n;){if(1==n.nodeType){if(!e||x(n,e))return n;if(i)break}n=n.nextSibling}return null}function P(t,e){for(var i=t.nextSibling,n=[];i;)1==i.nodeType&&(e&&!x(i,e)||n.push(i)),i=i.nextSibling;return n}function C(t,e){var i=t.parentNode;return!i||e&&!x(i,e)?null:i}function S(t,e,i){for(var n=t.previousSibling;n;){if(1==n.nodeType){if(!e||x(n,e))return n;if(i)break}n=n.previousSibling}return null}function z(t,e){for(var i=t.previousSibling,n=[];i;)1==i.nodeType&&(e&&!x(i,e)||n.push(i)),i=i.previousSibling;return n}function T(t,e){for(var i=t.parentNode.firstChild,n=[];i;)1==i.nodeType&&i!==t&&(e&&!x(i,e)||n.push(i)),i=i.nextSibling;return n}o.divide=function(t){var e,i,n,s,r,o="",a=[];if((i=t.id)&&(o+="#"+i),n=t.classes)for(var l=n.length;l--;)o+="."+n[l].value;if(s=t.attributes)for(var l=0;l<s.length;l++)s[l].operator?o+="["+s[l].key+s[l].operator+JSON.stringify(s[l].value)+"]":o+="["+s[l].key+"]";if(r=t.pseudos)for(l=r.length;l--;)part=r[l],this.pseudos[part.key]?a.push(part):void 0!==part.value&&(o+=":"+part.key+"("+JSON.stringify(part));return(e=t.tag)&&"*"!==e&&(o=e.toUpperCase()+o),o||(o="*"),{nativeSelector:o,customPseudos:a}},o.check=function(t,e,i,n,s){var r,o,a,l,c,u,f,p,d;if(!s){if(r=e.tag){var m=t.nodeName.toUpperCase();if("*"==r){if(m<"@")return!1}else if(m!=(r||"").toUpperCase())return!1}if((o=e.id)&&t.getAttribute("id")!=o)return!1;if(a=e.classes)for(u=a.length;u--;)if(!(p=t.getAttribute("class"))||!a[u].regexp.test(p))return!1;if(l=e.attributes)for(u=l.length;u--;)if((f=l[u]).operator?!f.test(t.getAttribute(f.key)):!t.hasAttribute(f.key))return!1}if(c=e.pseudos)for(u=c.length;u--;)if(f=c[u],d=this.pseudos[f.key]){if((s&&d.isArrayFilter||!s&&!d.isArrayFilter)&&!d(t,i,n,f.value))return!1}else if(!s&&!h.call(t,f.key))return!1;return!0},o.match=function(t,i){var n;if(!(n=e.isString(i)?o.Slick.parse(i):i))return!0;var s,r,a=n.expressions,l=0;for(s=0;r=a[s];s++)if(1==r.length){var h=r[0];if(this.check(t,h))return!0;l++}if(l==n.length)return!1;var c,u=this.query(document,n);for(s=0;c=u[s++];)if(c===t)return!0;return!1},o.filterSingle=function(t,e){var i=a.call(t,function(i,n){return o.check(i,e,n,t,!1)});return i=a.call(i,function(t,n){return o.check(t,e,n,i,!0)})},o.filter=function(t,i){if(!e.isString(i))return o.filterSingle(t,i);var n,s,r=o.Slick.parse(i).expressions,a=[];for(n=0;s=r[n];n++){if(1!=s.length)throw new Error("not supported selector:"+i);var l=s[0],h=o.filterSingle(t,l);a=e.uniq(a.concat(h))}return a},o.combine=function(t,e){var i,n=e.combinator,s=e,r=[];switch(n){case">":r=g(t,s);break;case"+":(i=k(t,s,!0))&&r.push(i);break;case"^":(i=_(t,s,!0))&&r.push(i);break;case"~":r=P(t,s);break;case"++":var h=S(t,s,!0),c=k(t,s,!0);h&&r.push(h),c&&r.push(c);break;case"~~":r=T(t,s);break;case"!":r=m(t,s);break;case"!>":(i=C(t,s))&&r.push(i);break;case"!+":r=S(t,s,!0);break;case"!^":(i=w(t,s,!0))&&r.push(i);break;case"!~":r=z(t,s);break;default:var u=this.divide(e);if(r=l.call(t.querySelectorAll(u.nativeSelector)),u.customPseudos)for(var f=u.customPseudos.length-1;f>=0;f--)r=a.call(r,function(t,e){return o.check(t,{pseudos:[u.customPseudos[f]]},e,r,!1)}),r=a.call(r,function(t,e){return o.check(t,{pseudos:[u.customPseudos[f]]},e,r,!0)})}return r},o.query=function(t,i,n){for(var s,r,a=this.Slick.parse(i),l=[],h=a.expressions,c=0;s=h[c];c++){for(var u,f=[t],p=0;r=s[p];p++)(u=e.map(f,function(t,e){return o.combine(t,r)}))&&(f=u);u&&(l=l.concat(u))}return l};var E=function(){return E};return e.mixin(E,{ancestor:function(t,i,n){var s=n&&e.isString(n);for(;t=t.parentNode;){if(x(t,i))return t;if(n)if(s){if(x(t,n))break}else if(t==n)break}return null},ancestors:m,byId:function(t,e){return(e=e||s.doc()).getElementById(t)},children:g,closest:function(t,e){for(;t&&!x(t,e);)t=t.parentNode;return t},descendant:y,descendants:v,find:b,findAll:function(t,e){e||(e=t,t=document.body);return v(t,e)},firstChild:_,lastChild:w,matches:x,nextSibling:k,nextSiblings:P,parent:C,previousSibling:S,previousSiblings:z,pseudos:o.pseudos,siblings:T}),t.finder=E}),define("skylark-utils-dom/datax",["./dom","./langx","./finder"],function(t,e,i){var n=Array.prototype.map,s=Array.prototype.filter,r=e.camelCase,o=e.deserializeValue,a=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};function h(t,e,i){if(void 0!==i)return t.setAttribute(e,i),this;if("object"==typeof e){for(var n in e)h(t,n,e[n]);return this}return t.hasAttribute&&t.hasAttribute(e)?t.getAttribute(e):void 0}function c(t,i){var n=t._$_store;return!n&&i&&(n=t._$_store=function(t){var i={};return e.each(t.attributes||[],function(t,e){0==e.name.indexOf("data-")&&(i[r(e.name.replace("data-",""))]=o(e.value))}),i}(t)),n}function u(t,e,i){var n=c(t,!0);n[r(e)]=i}function f(t,e,i){if(void 0===i){if("object"==typeof e){for(var n in e)u(t,n,e[n]);return this}return function(t,e){if(void 0===e)return c(t,!0);var i=c(t);if(i){if(e in i)return i[e];var n=r(e);if(n in i)return i[n]}var s="data-"+e.replace(a,"-$1").toLowerCase();return h(t,s)}(t,e)}return u(t,e,i),this}function p(t){t._$_store&&delete t._$_store}function d(t,e){return n.call(t,function(t){return t[e]})}function m(){return m}return i.pseudos.data=function(t,e,i,n){return!!f(t,n||i[3])},e.mixin(m,{aria:function(t,e,i){return this.attr(t,"aria-"+e,i)},attr:h,cleanData:p,data:f,pluck:d,prop:function(t,e,i){return e=l[e]||e,void 0===i?t[e]:(t[e]=i,this)},removeAttr:function(t,e){return e.split(" ").forEach(function(e){!function(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}(t,e)}),this},removeData:function(t,i){if(i){e.isString(i)&&(i=i.split(/\s+/));var n=c(t,!0);i.forEach(function(t){delete n[t]})}else p(t);return this},removeProp:function(t,e){return e.split(" ").forEach(function(e){delete t[e]}),this},text:function(t,e){return void 0===e?t.textContent:(t.textContent=null==e?"":""+e,this)},val:function(t,e){if(void 0===e){if(t.multiple){var n=s.call(i.find(t,"option"),function(t){return t.selected});return d(n,"value")}return t.value}return t.value=e,this}}),t.datax=m}),define("skylark-utils-dom/eventer",["./dom","./langx","./browser","./finder","./noder","./datax"],function(t,e,i,n,s,r){e.mixin,e.each,Array.prototype.slice;var o=e.uid,a=/^([A-Z]|returnValue$|layer[XY]$)/,l={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},h=/complete|loaded|interactive/;function c(t,i){return!i&&t.isDefaultPrevented||(i||(i=t),e.each(l,function(n,s){var r=i[n];t[n]=function(){return this[s]=e.returnTrue,r&&r.apply(i,arguments)},t[s]=e.returnFalse})),t}function u(t){var e=(""+t).split(".");return{type:e[0],ns:e.slice(1).sort().join(" ")}}var f=function(){var t=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent],i={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,textInput:12,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15};return function(n,s){e.isString(n)?s=s||{}:n=(s=n||{}).type||"";var r=u(n);n=r.type,s=e.mixin({bubbles:!0,cancelable:!0},s),r.ns&&(s.namespace=r.ns);var o=function(e){var n=i[e];n||(n=0);return t[n]}(n),a=new o(n,s);return e.safeMixin(a,s),c(a)}}();function p(t,i){var n,s={originalEvent:t};for(n in t)"keyIdentifier"===n||a.test(n)||void 0===t[n]||(s[n]=t[n]);return i&&e.mixin(s,i),c(s,t)}var d={},m="onfocusin"in window,g={focus:"focusin",blur:"focusout"},v={mouseenter:"mouseover",mouseleave:"mouseout"},y=function(t){return v[t]||m&&g[t]||t},b={},_=e.klass({init:function(t,e){this._target=t,this._event=e,this._bindings=[]},add:function(t,i){var r=this._bindings,o={fn:t,options:e.mixin({},i)};r.push(o);var a=this;if(!a._listener){a._listener=function(t){var i=this,r=p(t),o=t._args,l=a._bindings,h=r.namespace;o=e.isDefined(o)?[r].concat(o):[r],e.each(l,function(t,l){var c=i;if(r.isImmediatePropagationStopped&&r.isImmediatePropagationStopped())return!1;var u=l.fn,f=l.options||{},p=f.selector,d=f.one,m=f.data;if(!h||h==f.ns||-1!==f.ns.indexOf(h)){if(p){if(!(c=n.closest(r.target,p))||c===i)return;e.mixin(r,{currentTarget:c,liveFired:i})}var g=a._event;if(g in v){var y=r.relatedTarget;if(y&&(y===c||s.contains(c,y)))return}e.isDefined(m)&&(r.data=m),d&&a.remove(u,f);var b=u.apply(c,o);!1===b&&(r.preventDefault(),r.stopPropagation())}})};var l=a._event;a._target.addEventListener?a._target.addEventListener(y(l),a._listener,!1):console.warn("invalid eventer object",a._target)}},remove:function(t,i){var n,s;(i=e.mixin({},i)).ns&&(s=i.ns,n=new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var s=(!t||t===e.fn)&&(!n||n.test(e.options.ns))&&(!i.selector||i.selector==e.options.selector);return!s}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(y(this._event),this._listener,!1),this._listener=null)}}),w=e.klass({init:function(t){this._target=t,this._handler={}},register:function(t,i,n){var s=u(t),t=s.type,r=d[t],o=r&&(r.bindType||r.bindEventName),a=this._handler;void 0===a[t]&&(a[t]=new _(this._target,o||t)),a[t].add(i,e.mixin({ns:s.ns},n))},unregister:function(t,i,n){var s=this._handler,r=u(t);if(t=r.type){var o=s[t];o&&o.remove(i,e.mixin({ns:r.ns},n))}else for(t in s){var o=s[t];o.remove(i,e.mixin({ns:r.ns},n))}}}),x=function(t){var e=o(t),i=b[e];return i||(i=b[e]=new w(t)),i};function k(t,i,n,s,r,o){if(e.isPlainObject(i))return e.each(i,function(e,i){k(t,e,n,s,i,o)}),this;e.isString(n)||e.isFunction(r)||(r=s,s=n,n=void 0),e.isFunction(s)&&(r=s,s=void 0),!1===r&&(r=e.returnFalse),"string"==typeof i&&(i=i.indexOf(",")>-1?i.split(","):i.split(/\s/));var a=x(t);return i.forEach(function(t){if("ready"==t)return P(r);a.register(t,r,{data:s,selector:n,one:!!o})}),this}function P(t){return h.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1),this}var C={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38};function S(){return S}return i.support.transition&&(d.transitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end}),e.mixin(S,{create:f,keys:C,off:function t(i,n,s,r){if(e.isPlainObject(n))return e.each(n,function(e,n){t(i,e,s,n)}),this;e.isString(s)||e.isFunction(r)||!1===r||(r=s,s=void 0);!1===r&&(r=e.returnFalse);"string"==typeof n&&(n=n.indexOf(",")>-1?n.split(","):n.split(/\s/));var o=x(i);n&&n.forEach(function(t){o.unregister(t,r,{selector:s})});return this},on:k,one:function(t,e,i,n,s){return k(t,e,i,n,s,1),this},proxy:p,ready:P,shortcuts:function(t){var e=r.data(t,"shortcuts");if(!e){e={},r.data(t,"shortcuts",e);var i=function(t,e){var i=e.metaKey||e.ctrlKey;if(t.ctrl==i&&t.alt==e.altKey&&t.shift==e.shiftKey&&(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode))return e.preventDefault(),"keydown"==e.type&&t.fn(e),!0};k(t,"keyup keypress keydown",function(t){if(!/INPUT|TEXTAREA/.test(t.target.nodeName))for(var n in e)i(e[n],t)})}return{add:function(t,i){(t.indexOf(",")>-1?t.toLowerCase().split(","):t.toLowerCase().split(" ")).forEach(function(t){var n={fn:i,alt:!1,ctrl:!1,shift:!1};t.split("+").forEach(function(t){switch(t){case"alt":case"ctrl":case"shift":n[t]=!0;break;default:n.charCode=t.charCodeAt(0),n.keyCode=C[t]||t.toUpperCase().charCodeAt(0)}});var s=(n.ctrl?"ctrl":"")+","+(n.alt?"alt":"")+","+(n.shift?"shift":"")+","+n.keyCode;e[s]=n})}}},special:d,stop:function(t){window.document.all&&(t.keyCode=0);t.preventDefault&&(t.preventDefault(),t.stopPropagation());return this},trigger:function(t,e,i){var n;n=e instanceof Event?e:f(e,i);n._args=i;var s=t.dispatchEvent||t.trigger;s?s.call(t,n):console.warn("The evented parameter is not a eventable object");return this}}),t.eventer=S}),define("skylark-utils-dom/geom",["./dom","./langx","./noder","./styler"],function(t,e,i,n){var s,r=/^(?:body|html)$/i,o=e.toPixel,a=i.offsetParent;function l(){if(void 0!==s)return s;var t,e,r=i.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],o=r.childNodes[0];return i.append(document.body,r),t=o.offsetWidth,n.css(r,"overflow","scroll"),e=o.offsetWidth,t===e&&(e=r[0].clientWidth),i.remove(r),s=t-e}function h(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.borderLeftWidth,t),top:o(e.borderTopWidth,t),right:o(e.borderRightWidth,t),bottom:o(e.borderBottomWidth,t)}}function c(t,e){if(void 0===e)return r.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var i=a(t),n=c(i),s=d(t),o=h(i);return y(t,{top:e.top-n.top-s.top-o.top,left:e.left-n.left-s.left-o.left}),this}function u(t,e){return void 0===e?t.getBoundingClientRect():(c(t,e),x(t,e),this)}function f(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var i="border-box"===n.css(t,"box-sizing"),s={width:e.width,height:e.height};if(i){var r=h(t);void 0!==s.width&&(s.width=s.width+r.left+r.right),void 0!==s.height&&(s.height=s.height+r.top+r.bottom)}else{var o=g(t);void 0!==s.width&&(s.width=s.width-o.left-o.right),void 0!==s.height&&(s.height=s.height-o.top-o.bottom)}return n.css(t,s),this}function p(t){var e=t.documentElement,i=t.body,n=Math.max,s=n(e.scrollWidth,i.scrollWidth),r=n(e.clientWidth,i.clientWidth),o=n(e.offsetWidth,i.offsetWidth),a=n(e.scrollHeight,i.scrollHeight),l=n(e.clientHeight,i.clientHeight),h=n(e.offsetHeight,i.offsetHeight);return{width:s<o?r:s,height:a<h?l:a}}function d(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.marginLeft),top:o(e.marginTop),right:o(e.marginRight),bottom:o(e.marginBottom)}}function m(t){var e=x(t),i=d(t);return{width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function g(t){if(i.isWindow(t))return{left:0,top:0,right:0,bottom:0};var e=getComputedStyle(t);return{left:o(e.paddingLeft),top:o(e.paddingTop),right:o(e.paddingRight),bottom:o(e.paddingBottom)}}function v(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset}}var n=a(t),s=v(n),r=d(t),o=h(n);return y(t,{top:e.top-s.top-r.top-o.top,left:e.left-s.left-r.left-o.left}),this}function y(t,e){if(void 0==e){var i=a(t),s=c(t),r=c(i),o=(d(t),h(i));return{top:s.top-r.top-o.top,left:s.left-r.left-o.left}}var l={top:e.top,left:e.left};return"static"==n.css(t,"position")&&(l.position="relative"),n.css(t,l),this}function b(t,e){if(void 0===e){var i=a(t),n=u(t),s=c(i),r=(d(t),h(i));return{top:n.top-s.top-r.top,left:n.left-s.left-r.left,width:n.width,height:n.height}}return y(t,e),x(t,e),this}function _(t,e){var i="scrollLeft"in t;return void 0===e?i?t.scrollLeft:t.pageXOffset:(i?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function w(t,e){var i="scrollTop"in t;return void 0===e?i?t.scrollTop:t.pageYOffset:(i?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function x(t,i){if(void 0==i)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?p(document):{width:t.offsetWidth,height:t.offsetHeight};var s="border-box"===n.css(t,"box-sizing"),r={width:i.width,height:i.height};if(!s){var o=g(t),a=h(t);void 0!==r.width&&""!==r.width&&null!==r.width&&(r.width=r.width-o.left-o.right-a.left-a.right),void 0!==r.height&&""!==r.height&&null!==r.height&&(r.height=r.height-o.top-o.bottom-a.top-a.bottom)}return n.css(t,r),this}function k(){return k}return e.mixin(k,{borderExtents:h,boundingPosition:c,boundingRect:u,clientHeight:function(t,e){return void 0==e?f(t).height:f(t,{height:e})},clientSize:f,clientWidth:function(t,e){return void 0==e?f(t).width:(f(t,{width:e}),this)},contentRect:function(t){var e=f(t),i=g(t);return{left:i.left,top:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom}},getDocumentSize:p,height:function(t,e){return void 0==e?x(t).height:(x(t,{height:e}),this)},marginExtents:d,marginRect:function(t){var e=b(t),i=d(t);return{left:e.left,top:e.top,width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}},marginSize:m,offsetParent:a,paddingExtents:g,pagePosition:v,pageRect:function(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}}return v(t,e),x(t,e),this},relativePosition:y,relativeRect:b,scrollbarWidth:l,scrollIntoView:function(t,e){var i,n,s,r,o,a,l=t.parentNode,h=function(t,e){var i,n,s=t;i=n=0;for(;s&&s!=e&&s.nodeType;)i+=s.offsetLeft||0,n+=s.offsetTop||0,s=s.offsetParent;return{x:i,y:n}}(t,l);i=h.x,n=h.y,s=t.offsetWidth,r=t.offsetHeight,o=l.clientWidth,a=l.clientHeight,"end"==e?(i-=o-s,n-=a-r):"center"==e&&(i-=o/2-s/2,n-=a/2-r/2);return l.scrollLeft=i,l.scrollTop=n,this},scrollLeft:_,scrollTop:w,size:x,width:function(t,e){return void 0==e?x(t).width:(x(t,{width:e}),this)}}),function(){var t=Math.max,s=Math.abs,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,c=/%$/;function u(t,e,i){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?i/100:1)]}function f(t,e){return parseInt(n.css(t,e),10)||0}var p={fit:{left:function(e,i){var n,s=i.within,r=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,a=e.left-i.collisionPosition.marginLeft,l=r-a,h=a+i.collisionWidth-o-r;i.collisionWidth>o?l>0&&h<=0?(n=e.left+l+i.collisionWidth-o-r,e.left+=l-n):e.left=h>0&&l<=0?r:l>h?r+o-i.collisionWidth:r:l>0?e.left+=l:h>0?e.left-=h:e.left=t(e.left-a,e.left)},top:function(e,i){var n,s=i.within,r=s.isWindow?s.scrollTop:s.offset.top,o=i.within.height,a=e.top-i.collisionPosition.marginTop,l=r-a,h=a+i.collisionHeight-o-r;i.collisionHeight>o?l>0&&h<=0?(n=e.top+l+i.collisionHeight-o-r,e.top+=l-n):e.top=h>0&&l<=0?r:l>h?r+o-i.collisionHeight:r:l>0?e.top+=l:h>0?e.top-=h:e.top=t(e.top-a,e.top)}},flip:{left:function(t,e){var i,n,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-a-l,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];c<0?((i=t.left+f+p+d+e.collisionWidth-a-o)<0||i<s(c))&&(t.left+=f+p+d):u>0&&((n=t.left-e.collisionPosition.marginLeft+f+p+d-l)>0||s(n)<u)&&(t.left+=f+p+d)},top:function(t,e){var i,n,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-a-l,f="top"===e.my[1],p=f?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];c<0?((n=t.top+p+d+m+e.collisionHeight-a-o)<0||n<s(c))&&(t.top+=p+d+m):u>0&&((i=t.top-e.collisionPosition.marginTop+p+d+m-l)>0||s(i)<u)&&(t.top+=p+d+m)}},flipfit:{left:function(){p.flip.left.apply(this,arguments),p.fit.left.apply(this,arguments)},top:function(){p.flip.top.apply(this,arguments),p.fit.top.apply(this,arguments)}}};k.posit=function(c,d){var g,y,b,k,P,C,S=(d=e.extend({},d)).of,z=(A=d.within,I=A||window,H=i.isWindow(I),O=!!I&&9===I.nodeType,D=!H&&!O,j=m(I),{element:I,isWindow:H,isDocument:O,offset:D?v(A):{left:0,top:0},scrollLeft:_(I),scrollTop:w(I),width:j.width,height:j.height}),T=function(t){var e=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-x"),i=t.isWindow||t.isDocument?"":n.css(t.element,"overflow-y"),s="scroll"===e||"auto"===e&&t.width<scrollWidth(t.element);return{width:"scroll"===i||"auto"===i&&t.height<scrollHeight(t.element)?l():0,height:s?l():0}}(z),E=(d.collision||"flip").split(" "),N={};var A,I,H,O,D,j;W=S,C=9===W.nodeType?{size:x(W),offset:{top:0,left:0}}:i.isWindow(W)?{size:x(W),offset:{top:w(W),left:_(W)}}:W.preventDefault?{size:{width:0,height:0},offset:{top:W.pageY,left:W.pageX}}:{size:x(W),offset:v(W)},S.preventDefault&&(d.at="left top");var W;y=C.size.width,b=C.size.height,k=C.offset,P=e.extend({},k),e.each(["my","at"],function(){var t,e,i=(d[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",t=a.exec(i[0]),e=a.exec(i[1]),N[this]=[t?t[0]:0,e?e[0]:0],d[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===E.length&&(E[1]=E[0]);"right"===d.at[0]?P.left+=y:"center"===d.at[0]&&(P.left+=y/2);"bottom"===d.at[1]?P.top+=b:"center"===d.at[1]&&(P.top+=b/2);return g=u(N.at,y,b),P.left+=g[0],P.top+=g[1],function(i){var n,r,o=m(i),a=o.width,l=o.height,h=f(i,"marginLeft"),c=f(i,"marginTop"),_=a+h+f(i,"marginRight")+T.width,w=l+c+f(i,"marginBottom")+T.height,x=e.extend({},P),C=u(N.my,o.width,o.height);"right"===d.my[0]?x.left-=a:"center"===d.my[0]&&(x.left-=a/2),"bottom"===d.my[1]?x.top-=l:"center"===d.my[1]&&(x.top-=l/2),x.left+=C[0],x.top+=C[1],n={marginLeft:h,marginTop:c},e.each(["left","top"],function(t,e){p[E[t]]&&p[E[t]][e](x,{targetWidth:y,targetHeight:b,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:_,collisionHeight:w,offset:[g[0]+C[0],g[1]+C[1]],my:d.my,at:d.at,within:z,elem:i})}),d.using&&(r=function(e){var n=k.left-x.left,r=n+y-a,o=k.top-x.top,h=o+b-l,c={target:{element:S,left:k.left,top:k.top,width:y,height:b},element:{element:i,left:x.left,top:x.top,width:a,height:l},horizontal:r<0?"left":n>0?"right":"center",vertical:h<0?"top":o>0?"bottom":"middle"};y<a&&s(n+r)<y&&(c.horizontal="center"),b<l&&s(o+h)<b&&(c.vertical="middle"),t(s(n),s(r))>t(s(o),s(h))?c.important="horizontal":c.important="vertical",d.using.call(this,e,c)}),v(i,e.extend(x,{using:r}))}(c)}}(),t.geom=k}),define("skylark-utils-dom/fx",["./dom","./langx","./browser","./geom","./styler","./eventer"],function(t,e,i,n,s,r){var o,a,l,h,c,u,f,p=i.normalizeCssEvent("AnimationEnd"),d=i.normalizeCssEvent("TransitionEnd"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,g=i.css3PropPrefix+"transform",v={};function y(t,i,y,b,_,x){var k,P,C,S={},T=[],E="",N=this,A=!1,I=!1;if(e.isPlainObject(y)&&(b=y.easing,_=y.complete,x=y.delay,y=y.duration),e.isString(y)&&(y=z.speeds[y]),void 0===y&&(y=z.speeds.normal),y/=1e3,z.off&&(y=0),e.isFunction(b)?(_=b,eace="swing"):b=b||"swing",x?x/=1e3:x=0,e.isString(i))S[o]=i,S[a]=y+"s",S[l]=b,P=p;else{for(k in i){var H=i[k];if(m.test(k))E+=k+"("+H+") ";else{if("scrollTop"===k&&(I=!0),"clip"==k&&e.isPlainObject(H)){if(S[k]="rect("+H.top+"px,"+H.right+"px,"+H.bottom+"px,"+H.left+"px)","auto"==s.css(t,"clip")){var O=n.size(t);s.css(t,"clip","rect(0px,"+O.width+"px,"+O.height+"px,0px)"),!0}}else S[k]=H;T.push(e.dasherize(k))}}P=d}return E&&(S[g]=E,T.push(g)),y>0&&e.isPlainObject(i)&&(S[h]=T.join(", "),S[c]=y+"s",S[f]=x+"s",S[u]=b),C=function(e){if(A=!0,e){if(e.target!==e.currentTarget)return;r.off(e.target,P,C)}else r.off(t,p,C);s.css(t,v),_&&_.call(this)},y>0&&(r.on(t,P,C),e.debounce(function(){A||C.call(N)},1e3*(y+x)+25)()),t.clientLeft,s.css(t,S),y<=0&&e.debounce(function(){A||C.call(N)},0)(),I&&w(t,i.scrollTop,y,_),this}function b(t,i,n){return s.show(t),i&&(!n&&e.isFunction(i)&&(n=i,i="normal"),s.css(t,"opacity",0),y(t,{opacity:1,scale:"1,1"},i,n)),this}function _(t,i,n){return i?(!n&&e.isFunction(i)&&(n=i,i="normal"),y(t,{opacity:0,scale:"0,0"},i,function(){s.hide(t),n&&n.call(t)})):s.hide(t),this}function w(t,i,n,s){var r=parseInt(t.scrollTop),o=0,a=1e3*n/5,l=parseInt(i),h=setInterval(function(){++o<=a&&(t.scrollTop=(l-r)/a*o+r),o>=a+1&&(clearInterval(h),s&&e.debounce(s,1e3)())},5)}function x(t,e,i,n,s){return y(t,{opacity:i},e,n,s),this}function k(t,e,i,n){var r=s.css(t,"opacity");return r>0?s.css(t,"opacity",0):r=1,s.show(t),x(t,e,r,i,n),this}function P(t,i,n,r){var o,a=s.css(t,"opacity"),l={};return e.isPlainObject(i)?(l.easing=i.easing,l.duration=i.duration,o=i.complete):(l.duration=i,r?(o=r,l.easing=n):o=n),l.complete=function(){s.css(t,"opacity",a),s.hide(t),o&&o.call(t)},x(t,l,0),this}function C(t,e,i){var n=s.css(t,"position");b(t),s.css(t,{position:"absolute",visibility:"hidden"});var r=s.css(t,"margin-top"),o=s.css(t,"margin-bottom"),a=s.css(t,"padding-top"),l=s.css(t,"padding-bottom"),h=s.css(t,"height");return s.css(t,{position:n,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),y(t,{height:h,marginTop:r,marginBottom:o,paddingTop:a,paddingBottom:l},{duration:e,complete:function(){i&&i.apply(t)}}),this}function S(t,e,i){if(n.height(t)>0){s.css(t,"position");var r=s.css(t,"height"),o=s.css(t,"margin-top"),a=s.css(t,"margin-bottom"),l=s.css(t,"padding-top"),h=s.css(t,"padding-bottom");s.css(t,{visibility:"visible",overflow:"hidden",height:r,marginTop:o,marginBottom:a,paddingTop:l,paddingBottom:h}),y(t,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:e,queue:!1,complete:function(){_(t),s.css(t,{visibility:"visible",overflow:"hidden",height:r,marginTop:o,marginBottom:a,paddingTop:l,paddingBottom:h}),i&&i.apply(t)}})}return this}function z(){return z}return v[o=i.normalizeCssProperty("animation-name")]=v[a=i.normalizeCssProperty("animation-duration")]=v[i.normalizeCssProperty("animation-delay")]=v[l=i.normalizeCssProperty("animation-timing-function")]="",v[h=i.normalizeCssProperty("transition-property")]=v[c=i.normalizeCssProperty("transition-duration")]=v[f=i.normalizeCssProperty("transition-delay")]=v[u=i.normalizeCssProperty("transition-timing-function")]="",e.mixin(z,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:y,emulateTransitionEnd:function(t,e){var i=!1;r.one(t,"transitionEnd",function(){i=!0});return setTimeout(function(){i||r.trigger(t,"transitionEnd")},e),this},fadeIn:k,fadeOut:P,fadeTo:x,fadeToggle:function(t,e,i,n){s.isInvisible(t)?k(t,e,easing,callback):P(t,e,easing,callback);return this},hide:_,scrollToTop:w,slideDown:C,slideToggle:function(t,e,i){0==n.height(t)?C(t,e,i):S(t,e,i);return this},slideUp:S,show:b,toggle:function(t,e,i){s.isInvisible(t)?b(t,e,i):_(t,e,i);return this}}),t.fx=z}),define("skylark-utils-dom/query",["./dom","./langx","./noder","./datax","./eventer","./finder","./geom","./styler","./fx"],function(t,e,i,n,s,r,o,a,l){var h,c=Array.prototype.some,u=Array.prototype.push,f=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),p=(Array.prototype.map,Array.prototype.filter),d=Array.prototype.forEach,m=Array.prototype.indexOf,g=Array.prototype.sort,v=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,y=e.funcArg,b=e.isArrayLike,_=e.isString,w=e.uniq,x=e.isFunction,k=e.type,P=(e.isArray,e.isWindow,e.isDocument,e.isObject);e.isPlainObject,e.compact,e.flatten,e.camelCase,e.dasherize,r.children;function C(t,i){return function(){var n=f.call(arguments),s=e.map(this,function(e,s){return t.apply(i,[e].concat(n))});return H(w(s))}}function S(t,e,i){return function(n){f.call(arguments);var s=this.map(function(s,r){if(r.querySelector)return t.apply(e,i?[r]:[r,n])});return i&&n?s.filter(n):s}}function z(t,e){return function(){var i=f.call(arguments);return this.each(function(n){t.apply(e,[this].concat(i))}),this}}function T(t,e,i){return function(n){var s=f.call(arguments);return d.call(this,function(r,o){y(r,n,o,i(r));t.apply(e,[r,n].concat(s.slice(1)))}),this}}function E(t,i,n){return function(s,r){var o=f.call(arguments);return e.isPlainObject(s)||e.isDefined(r)?(d.call(this,function(e,a){n&&y(e,r,a,n(e,s)),t.apply(i,[e].concat(o))}),this):this[0]?t.apply(i,[this[0],s]):void 0}}function N(t,i,n){return function(s){return e.isDefined(s)?(d.call(this,function(e,r){var o;o=n?y(e,s,r,n(e)):s,t.apply(i,[e,o])}),this):this[0]?t.apply(i,[this[0]]):void 0}}var A,I=e.klass({klassName:"SkNodeList",init:function(t,n){var s,o,a,l;if(t&&(this.context=n=n||i.doc(),_(t)?(this.selector=t,(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:v.exec(t))?s[1]?(o=i.createFragment(t),e.isPlainObject(n)&&(l=n)):(a=r.byId(s[2],i.ownerDoc(n)))&&(o=[a]):(e.isString(n)&&(n=r.find(n)),o=r.descendants(n,t))):o=t!==window&&b(t)?t:[t]),o&&(u.apply(this,o),l))for(var h in l)e.isFunction(this[h])?this[h](l[h]):this.attr(h,l[h]);return this}}),H=function(){h=function(t){return t instanceof I},init=function(t,e){return new I(t,e)};var t,v,y,A=function(t,e){if(!x(t))return h(t)?t:e&&h(e)&&_(t)?e.find(t):init(t,e);s.ready(function(){t(A)})};A.fn=I.prototype,e.mixin(A.fn,{length:0,map:function(t){return A(w(e.map(this,function(e,i){return t.call(e,i,e)})))},slice:function(){return A(f.apply(this,arguments))},forEach:function(){return d.apply(this,arguments)},get:function(t){return void 0===t?f.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return m.apply(this,arguments)},sort:function(){return g.apply(this,arguments)},toArray:function(){return f.call(this)},size:function(){return this.length},remove:z(i.remove,i),each:function(t){return e.each(this,t),this},filter:function(t){return x(t)?this.not(this.not(t)):A(p.call(this,function(e){return r.matches(e,t)}))},add:function(t,e){return A(w(this.toArray().concat(A(t,e).toArray())))},is:function(t){if(this.length>0){if(e.isString(t))return c.call(this,function(e){return r.matches(e,t)});if(e.isArrayLike(t))return c.call(this,function(i){return e.inArray(i,t)>-1});if(e.isHtmlNode(t))return c.call(this,function(e){return e==t})}return!1},not:function(t){var e=[];if(x(t)&&void 0!==t.call)this.each(function(i){t.call(this,i)||e.push(this)});else{var i="string"==typeof t?this.filter(t):b(t)&&x(t.item)?f.call(t):A(t);this.forEach(function(t){i.indexOf(t)<0&&e.push(t)})}return A(e)},has:function(t){return this.filter(function(){return P(t)?i.contains(this,t):A(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:S(r.descendants,r),closest:S(r.closest,r),parents:S(r.ancestors,r),parentsUntil:(t=r.ancestors,v=r,function(e,i){f.call(arguments),void 0===i&&(i=e,e=void 0);var n=this.map(function(n,s){if(s.querySelector)return t.apply(v,y?[s,e]:[s,i,e])});return y&&i?n.filter(i):n}),parent:S(r.parent,r),children:S(r.children,r),contents:C(i.contents,i),empty:z(i.empty,i),pluck:function(t){return e.map(this,function(e){return e[t]})},pushStack:function(t){var e=A(t);return e.prevObject=this,e},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=x(t);if(this[0]&&!e)var i=A(t).get(0),n=i.parentNode||this.length>1;return this.each(function(s){A(this).wrapAll(e?t.call(this,s):n?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){var e;for(A(this[0]).before(t=A(t));(e=t.children()).length;)t=e.first();A(t).append(this)}return this},wrapInner:function(t){var e=x(t);return this.each(function(i){var n=A(this),s=n.contents(),r=e?t.call(this,i):t;s.length?s.wrapAll(r):n.append(r)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){A(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){A(this).replaceWith(A(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:z(l.hide,l),toggle:function(t){return this.each(function(){var e=A(this);(void 0===t?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return A(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:S(r.previousSibling,r),next:function(t){return A(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:S(r.nextSiblings,r),siblings:S(r.siblings,r),html:N(i.html,i,i.html),text:N(n.text,n,n.text),attr:E(n.attr,n,n.attr),removeAttr:z(n.removeAttr,n),prop:E(n.prop,n,n.prop),removeProp:z(n.removeProp,n),data:E(n.data,n,n.data),removeData:z(n.removeData,n),val:N(n.val,n,n.val),offset:N(o.pagePosition,o,o.pagePosition),style:E(a.css,a),css:E(a.css,a),index:function(t){return t?this.indexOf(A(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t,e){return function(){var i=f.call(arguments);return c.call(this,function(n){return t.apply(e,[n].concat(i))})}}(a.hasClass,a),addClass:T(a.addClass,a,a.className),removeClass:T(a.removeClass,a,a.className),toggleClass:T(a.toggleClass,a,a.className),scrollTop:N(o.scrollTop,o),scrollLeft:N(o.scrollLeft,o),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&((t=e.clone(t)).of=t.of[0]),this.each(function(){o.posit(this,t)});var i=this[0];return o.relativePosition(i)}},offsetParent:C(o.offsetParent,o)}),A.fn.detach=A.fn.remove,A.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)},A.fn.size=N(o.size,o),A.fn.width=N(o.width,o,o.width),A.fn.height=N(o.height,o,o.height),A.fn.clientSize=N(o.clientSize,o.clientSize),["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});A.fn["outer"+e]=function(e,i){if(arguments.length?"boolean"!=typeof e&&(i=e,e=!1):(e=!1,i=void 0),void 0===i){var n=this[0];if(!n)return;var s=o.size(n);if(e){var r=o.marginExtents(n);s.width=s.width+r.left+r.right,s.height=s.height+r.top+r.bottom}return"width"===t?s.width:s.height}return this.each(function(n,s){var r={},a=o.marginExtents(s);"width"===t?(r.width=i,e&&(r.width=r.width-a.left-a.right)):(r.height=i,e&&(r.height=r.height-a.top-a.bottom)),o.size(s,r)})}}),A.fn.innerWidth=N(o.clientWidth,o,o.clientWidth),A.fn.innerHeight=N(o.clientHeight,o,o.clientHeight);i.traverse;function H(t,n,s){return function(s){var r,o=e.map(arguments,function(t){return"object"==(r=k(t))||"array"==r||null==t?t:i.createFragment(t)});return o.length<1?this:(this.each(function(e){t.apply(n,[this,o,e>0])}),this)}}return A.fn.after=H(i.after,i),A.fn.prepend=H(i.prepend,i),A.fn.before=H(i.before,i),A.fn.append=H(i.append,i),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){A.fn[t]=function(t){for(var i,n=[],s=A(t),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),A(s[o])[e](i),u.apply(n,i.get());return this.pushStack(n)}}),A}();return(A=H).fn.on=z(s.on,s),A.fn.off=z(s.off,s),A.fn.trigger=z(s.trigger,s),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(t){A.fn[t]=function(e,i){return 0 in arguments?this.on(t,e,i):this.trigger(t)}}),A.fn.one=function(t,i,n,s){return e.isString(i)||e.isFunction(s)||(s=n,n=i,i=null),e.isFunction(n)&&(s=n,n=null),this.on(t,i,n,s,1)},A.fn.animate=z(l.animate,l),A.fn.emulateTransitionEnd=z(l.emulateTransitionEnd,l),A.fn.show=z(l.show,l),A.fn.hide=z(l.hide,l),A.fn.toogle=z(l.toogle,l),A.fn.fadeTo=z(l.fadeTo,l),A.fn.fadeIn=z(l.fadeIn,l),A.fn.fadeOut=z(l.fadeOut,l),A.fn.fadeToggle=z(l.fadeToggle,l),A.fn.slideDown=z(l.slideDown,l),A.fn.slideToggle=z(l.slideToggle,l),A.fn.slideUp=z(l.slideUp,l),A.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=A(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&s.length?s:A(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=i.apply(this,arguments);return t.prevObject=this,t}})}(H),function(t){var n;t.fn.query=t.fn.find,t.fn.place=function(t,n){return e.isString(t)?t=r.descendant(t):h(t)&&(t=t[0]),this.each(function(e,s){switch(n){case"before":i.before(t,s);break;case"after":i.after(t,s);break;case"replace":i.replace(t,s);break;case"only":i.empty(t),i.append(t,s);break;case"first":i.prepend(t,s);break;default:i.append(t,s)}})},t.fn.addContent=function(t,i){return t.template&&(t=e.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.replaceClass=function(t,e){return this.removeClass(e),this.addClass(t),this},t.fn.disableSelection=(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(n+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")}}(H),H.fn.plugin=function(t,e){var i=f.call(arguments,1),n=this,s=this;return this.each(function(){s=plugins.instantiate.apply(n,[this,t].concat(i))}),s},t.query=H}),define("skylark-utils-dom/elmx",["./dom","./langx","./datax","./eventer","./finder","./fx","./geom","./noder","./styler","./query"],function(t,e,i,n,s,r,o,a,l,h){var c=Array.prototype.map,u=Array.prototype.slice,f=e.klass({klassName:"VisualElement",_construct:function(t){e.isString(t)&&(t="<"===t.charAt(0)?a.createFragment(t)[0]:document.getElementById(t)),this._elm=t}});f.prototype.$=f.prototype.query=function(t){return h(t,this._elm)},f.prototype.elm=function(){return this._elm};var p=new f(document.body),d=function(t){return t?new f(t):p};e.mixin(d,{batch:function(t,e,i){return t.forEach(function(t){var n=t instanceof f?t:d(t);n[e].apply(n,i)}),this},root:new f(document.body),VisualElement:f,partial:function(t,e){var i={};i[t]=e,f.partial(i)},delegate:function(t,i){var n={};t.forEach(function(t){n[t]=function(t,i){return function(){var n=this._elm,s=t.apply(i,[n].concat(u.call(arguments)));if(s){if(s===i)return this;s instanceof HTMLElement?s=new f(s):e.isArrayLike(s)&&(s=c.call(s,function(t){return t instanceof HTMLElement?new f(t):t}))}return s}}(i[t],i)}),f.partial(n)}}),d.delegate(["attr","data","prop","removeAttr","removeData","text","val"],i),d.delegate(["off","on","one","shortcuts","trigger"],n),d.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],s),d.find=function(t){return"body"===t?this.root:this.root.descendant(t)},d.delegate(["animate","fadeIn","fadeOut","fadeTo","fadeToggle","hide","scrollToTop","show","toggle"],r),d.delegate(["borderExtents","boundingPosition","boundingRect","clientHeight","clientSize","clientWidth","contentRect","height","marginExtents","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop","size","width"],o),d.delegate(["after","append","before","clone","contains","contents","empty","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],a),d.delegate(["addClass","className","css","hasClass","hide","isInvisible","removeClass","show","toggleClass"],l);["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(t){var e=t;f.prototype[e]=function(e){return this.css(t,e),this}});return["keyUp","keyDown","mouseOver","mouseOut","click","dblClick","change"].forEach(function(t){var e=t;f.prototype[e]=function(e){return this.on(t.toLowerCase(),e),this}}),t.elmx=d}),define("skylark-utils-dom/plugins",["./dom","./langx","./noder","./datax","./eventer","./finder","./geom","./styler","./fx","./query","./elmx"],function(t,e,i,n,s,r,o,a,l,h,c){"use strict";var u=Array.prototype.slice,f=(Array.prototype.concat,{}),p={};function d(t,e,i){var s=e.split(":"),r=s[1];e=s[0],r||(r=e);var o=n.data(t,r);if("instance"===i)return o;if("destroy"===i){if(!o)throw new Error("The plugin instance is not existed");o.destroy(),n.removeData(t,e),o=void 0}else if(o)i&&o.reset(i);else{if(void 0!==i&&"object"!=typeof i)throw new Error("The options must be a plain object");var a=f[e];o=new a(t,i),n.data(t,r,o)}return o}var m=e.Evented.inherit({klassName:"Plugin",_construct:function(t,e){this._elm=t,this._initOptions(e)},_initOptions:function(t){var i=this.constructor,n=i.cache=i.cache||{},s=n.defaults;if(!s){var r=[];do{if(r.unshift(i),i===m)break;i=i.superclass}while(i);s=n.defaults={};for(var o=0;o<r.length;o++)(i=r[o]).prototype.hasOwnProperty("options")&&e.mixin(s,i.prototype.options),i.hasOwnProperty("options")&&e.mixin(s,i.options)}return Object.defineProperty(this,"options",{value:e.mixin({},s,t)}),this.options},destroy:function(){this._destroy(),n.removeData(this._elm,this.pluginName)},_destroy:e.noop,_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},option:function(t,i){var n,s,r,o=t;if(0===arguments.length)return e.mixin({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(s=o[t]=e.mixin({},this.options[t]),r=0;r<n.length-1;r++)s[n[r]]=s[n[r]]||{},s=s[n[r]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,this}});function g(){return g}return h.fn.plugin=function(t,e){var i=u.call(arguments,1),n=this,s=this;return this.each(function(){s=d.apply(n,[this,t].concat(i))}),s},c.partial("plugin",function(t,e){var i=u.call(arguments,1);return d.apply(this,[this.domNode,t].concat(i))}),e.mixin(g,{instantiate:d,Plugin:m,register:function(t,i,n,s){var r=t.prototype.pluginName;if(f[r]=t,i){n&&e.isFunction(n)&&(s=n,n=null),n&&(r=r+":"+n);var o=p[i]=function(t,i){return function(n,s){var r=d(n,t,"instance");if("instance"===s)return r||null;if(r||(r=d(n,t,"object"==typeof s&&s||{})),s){var o=u.call(arguments,2);if(i)return i.apply(r,o);if("string"==typeof s){var a=s;if(!r)throw new Error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'");if(!e.isFunction(r[a])||"_"===a.charAt(0))throw new Error("no such method '"+a+"' for "+t+" plugin instance");return r[a].apply(r,o)}}}}(r,s);h.fn[i]=function(t){var e=this;if(this.length||"instance"!==t){var i=u.call(arguments);this.each(function(){var t=u.call(i);t.unshift(this);var n=o.apply(null,t);if(void 0!==n)return e=n,!1})}else e=void 0;return e},c.partial(i,function(t){var e=o(this._elm,t);return void 0===e&&(e=this),e})}},shortcuts:p}),g}),define("skylark-jquery/JqueryPlugin",["skylark-langx/types","skylark-langx/objects","skylark-langx/arrays","skylark-langx/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/plugins","skylark-utils-dom/query"],function(t,e,i,n,s,r,o,a){var l=0,h=o.Plugin.inherit({klassName:"JqPlugin",pluginEventPrefix:"",options:{create:null},destroy:function(){this.overrided(),this.element.off(this.eventNamespace),this.bindings.off(this.eventNamespace)},_construct:function(t,e){t=a(t||this.defaultElement||this)[0],this.overrided(t,e),this.element=a(t),this.uuid=l++,this.eventNamespace="."+this.pluginName+this.uuid,this.bindings=a(),this.classesElementLookup={},this.hoverable=a(),this.focusable=a(),t!==this&&(s.data(t,this.pluginName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=a(t.style?t.ownerDocument:t.document||t),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,_classes:function(t){var i=[],s=this;function r(e,r){var o,l;for(l=0;l<e.length;l++)o=s.classesElementLookup[e[l]]||a(),t.add?(t.element.each(function(t,e){var i=n.map(s.classesElementLookup,function(t){return t}).some(function(t){return a(t).is(e)});i||s._on(a(e),{remove:"_untrackClassesElement"})}),o=a(n.uniq(o.get().concat(t.element.get())))):o=a(o.not(t.element).get()),s.classesElementLookup[e[l]]=o,i.push(e[l]),r&&t.classes[e[l]]&&i.push(t.classes[e[l]])}return(t=e.mixin({element:this.element,classes:this.options.classes||{}},t)).keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var e=this;n.each(e.classesElementLookup,function(n,s){-1!==i.inArray(t.target,s)&&(e.classesElementLookup[n]=a(s.not(t.target).get()))}),this._off(a(t.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(t,i,n){var s,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=a(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(e,n){function o(){if(t||!0!==r.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof n?r[n]:n).apply(r,arguments)}"string"!=typeof n&&(o.guid=n.guid=n.guid||o.guid||a.guid++);var l=e.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+r.eventNamespace,c=l[2];c?s.on(h,c,o):i.on(h,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=a(this.bindings.not(t).get()),this.focusable=a(this.focusable.not(t).get()),this.hoverable=a(this.hoverable.not(t).get())},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},(i=r.proxy(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}});return h}),define("skylark-jqueryui-interact/Mouse",["skylark-utils-dom/browser","skylark-utils-dom/datax","skylark-utils-dom/query","skylark-utils-dom/plugins","skylark-jquery/JqueryPlugin"],function(t,e,i,n,s){var r=!1;i(document).on("mouseup",function(){r=!1});var o=s.inherit({klassName:"MousePlugin",pluginName:"ui.mouse",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.pluginName,function(e){return t._mouseDown(e)}).on("click."+this.pluginName,function(i){if(!0===e.data(i.target,t.pluginName+".preventClickEvent"))return e.removeData(i.target,t.pluginName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.pluginName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.pluginName,this._mouseMoveDelegate).off("mouseup."+this.pluginName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,o=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&i(t.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.pluginName+".preventClickEvent")&&e.removeData(t.target,this.pluginName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.pluginName,this._mouseMoveDelegate).on("mouseup."+this.pluginName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.pluginName,this._mouseMoveDelegate).off("mouseup."+this.pluginName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.pluginName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});return n.register(o),o}),define("skylark-jqueryui-interact/patch",[],function(){return{add:function(t,e,i){var n,s=t.prototype;for(n in i)s.patches[n]=s.patches[n]||[],s.patches[n].push([e,i[n]])},call:function(t,e,i,n){var s,r=t.patches[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<r.length;s++)t.options[r[s][0]]&&r[s][1].apply(t.element,i)}}}),define("skylark-jqueryui-interact/Draggable",["skylark-utils-dom/langx","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=r.inherit({klassName:"Draggable",pluginName:"ui.draggable",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||n(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=i.active(this.document[0]),s=n(t.target);s.closest(e).length||i.blur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a&&(a.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===n(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),a&&!e.dropBehaviour&&a.prepareOffsets(this,t),this._mouseDrag(t,!0),a&&a.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.create("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a&&a.drag(this,t),!1},_mouseStop:function(e){var i=this,s=!1;return a&&!this.options.dropBehaviour&&(s=a.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),a&&a.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),this.overrided(t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(e.create("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!n(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),r=s?n(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,s=this.options,r=this.document[0];this.relativeContainer=null,s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),e=n(s.containment),(i=e[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=s.containment:this.containment=[0,0,n(r).width()-this.helperProportions.width-this.margins.left,(n(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),o.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),this.overrided(t,e,i)},patches:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});return s.register(l,"draggable"),o.add(l,"connectToSortable",{start:function(e,i,s){var r=t.extend({},i,{item:s.element});s.sortables=[],n(s.options.connectToSortable).each(function(){var t=n(this).sortable("instance");t&&!t.options.disabled&&(s.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,r))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,s))})},drag:function(e,n,s){t.each(s.sortables,function(){var r=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&i.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,s._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(s._parent),s._refreshOffsets(e),n.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),o.add(l,"cursor",{start:function(t,e,i){var s=n("body"),r=i.options;s.css("cursor")&&(r._cursor=s.css("cursor")),s.css("cursor",r.cursor)},stop:function(t,e,i){var s=i.options;s._cursor&&n("body").css("cursor",s._cursor)}}),o.add(l,"opacity",{start:function(t,e,i){var s=n(e.helper),r=i.options;s.css("opacity")&&(r._opacity=s.css("opacity")),s.css("opacity",r.opacity)},stop:function(t,e,i){var s=i.options;s._opacity&&n(e.helper).css("opacity",s._opacity)}}),o.add(l,"scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var s=i.options,r=!1,o=i.scrollParentNotHidden[0],l=i.document[0];o!==l&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<s.scrollSensitivity?o.scrollTop=r=o.scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<s.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-n(l).scrollTop()<s.scrollSensitivity?r=n(l).scrollTop(n(l).scrollTop()-s.scrollSpeed):n(window).height()-(t.pageY-n(l).scrollTop())<s.scrollSensitivity&&(r=n(l).scrollTop(n(l).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-n(l).scrollLeft()<s.scrollSensitivity?r=n(l).scrollLeft(n(l).scrollLeft()-s.scrollSpeed):n(window).width()-(t.pageX-n(l).scrollLeft())<s.scrollSensitivity&&(r=n(l).scrollLeft(n(l).scrollLeft()+s.scrollSpeed)))),!1!==r&&a&&!s.dropBehaviour&&a.prepareOffsets(i,t)}}),o.add(l,"snap",{start:function(t,e,i){var s=i.options;i.snapElements=[],n(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var t=n(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(e,n,s){var r,o,a,l,h,c,u,f,p,d,m=s.options,g=m.snapTolerance,v=n.offset.left,y=v+s.helperProportions.width,b=n.offset.top,_=b+s.helperProportions.height;for(p=s.snapElements.length-1;p>=0;p--)h=s.snapElements[p].left-s.margins.left,c=h+s.snapElements[p].width,u=s.snapElements[p].top-s.margins.top,f=u+s.snapElements[p].height,y<h-g||v>c+g||_<u-g||b>f+g||!i.contains(s.snapElements[p].item.ownerDocument,s.snapElements[p].item)?(s.snapElements[p].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[p].item})),s.snapElements[p].snapping=!1):("inner"!==m.snapMode&&(r=Math.abs(u-_)<=g,o=Math.abs(f-b)<=g,a=Math.abs(h-y)<=g,l=Math.abs(c-v)<=g,r&&(n.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),o&&(n.position.top=s._convertPositionTo("relative",{top:f,left:0}).top),a&&(n.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),l&&(n.position.left=s._convertPositionTo("relative",{top:0,left:c}).left)),d=r||o||a||l,"outer"!==m.snapMode&&(r=Math.abs(u-b)<=g,o=Math.abs(f-_)<=g,a=Math.abs(h-v)<=g,l=Math.abs(c-y)<=g,r&&(n.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top),a&&(n.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),l&&(n.position.left=s._convertPositionTo("relative",{top:0,left:c-s.helperProportions.width}).left)),!s.snapElements[p].snapping&&(r||o||a||l||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[p].item})),s.snapElements[p].snapping=r||o||a||l||d)}}),o.add(l,"stack",{start:function(e,i,s){var r,o=s.options,a=t.makeArray(n(o.stack)).sort(function(t,e){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(e).css("zIndex"),10)||0)});a.length&&(r=parseInt(n(a[0]).css("zIndex"),10)||0,n(a).each(function(t){n(this).css("zIndex",r+t)}),this.css("zIndex",r+a.length))}}),o.add(l,"zIndex",{start:function(t,e,i){var s=n(e.helper),r=i.options;s.css("zIndex")&&(r._zIndex=s.css("zIndex")),s.css("zIndex",r.zIndex)},stop:function(t,e,i){var s=i.options;s._zIndex&&n(e.helper).css("zIndex",s._zIndex)}}),l}),define("skylark-jqueryui-interact/Droppable",["skylark-utils-dom/langx","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","skylark-jquery/JqueryPlugin","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=r.inherit({klassName:"Droppable",pluginName:"ui.Droppable",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){a.droppables[t]=a.droppables[t]||[],a.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=a.droppables[this.options.scope];this._splice(t)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=a.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(t){var e=a.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=a.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=a.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=a.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,i){var s=i||a.current,r=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=n(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&a.intersect(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});return s.register(l,"droppable"),l}),define("skylark-jqueryui-interact/Resizable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./patch","./ddmanager"],function(t,e,i,n,s,r,o,a,l){var h=o.inherit({klassName:"Resizable",pluginName:"ui.resizable",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if("hidden"===s(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",n=!1;return t[i]>0||(t[i]=1,n=t[i]>0,t[i]=0,n)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(s("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&s(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var t,e=function(t){s(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!e}},_setupHandles:function(){var e,i,n,r,o,a=this.options,l=this;if(this.handles=a.handles||(s(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=s(),this._addedHandles=s(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),r="ui-resizable-"+e,o=s("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(o),this._addedHandles=this._addedHandles.add(o));this._renderAxis=function(t){var e,i,n,r;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=s(this.handles[e]),this._on(this.handles[e],{mousedown:l._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=s(this.handles[e],this.element),r=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(n,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){l.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var e,i,r=!1;for(e in this.handles)((i=s(this.handles[e])[0])===t.target||n.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var e,i,n,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(e+=s(r.containment).scrollLeft()||0,i+=s(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=s(".ui-resizable-"+this.axis).css("cursor"),s("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,r=this.axis,o=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[r];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,r,o,a,l,h,c=this.options;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),r=n&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,o=n?0:this.sizeDiff.width,a={width:this.helper.width()-o,height:this.helper.height()-r},l=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,h=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(t.extend(a,{top:h,left:l})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),s("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,r,o=this.options;r={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),o&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),r&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),o&&c&&(t.top=l-e.minHeight),s&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(s[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||s("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(t,e){a.call(this,t,[e,this.ui(),this],!0),"resize"!==t&&this._trigger(t,e,this.ui())},patches:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});return a.add(h,"animate",{stop:function(e){var i=s(this).resizable("instance"),n=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,l=o?0:i.sizeDiff.width,h={width:i.size.width-l,height:i.size.height-a},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&s(r[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),a.add(h,"containment",{start:function(){var t,e,i,n,r,o,a,l=s(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,f=u instanceof s?u.get(0):/parent/.test(u)?c.parent().get(0):u;f&&(l.containerElement=s(f),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:s(document),left:0,top:0,width:s(document).width(),height:s(document).height()||document.body.parentNode.scrollHeight}):(t=s(f),e=[],s(["Top","Right","Left","Bottom"]).each(function(i,n){e[i]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-e[3],width:t.innerWidth()-e[1]},i=l.containerOffset,n=l.containerSize.height,r=l.containerSize.width,o=l._hasScroll(f,"left")?f.scrollWidth:r,a=l._hasScroll(f)?f.scrollHeight:n,l.parentData={element:f,left:i.left,top:i.top,width:o,height:a}))},resize:function(t){var e,i,n,r,o=s(this).resizable("instance"),a=o.options,l=o.containerOffset,h=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},f=o.containerElement,p=!0;f[0]!==document&&/static/.test(f.css("position"))&&(u=l),h.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=a.helper?l.left:0),h.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?l.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),n&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-l.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-l.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,c&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,c&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=s(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,r=t.containerElement,o=s(t.helper),a=o.offset(),l=o.outerWidth()-t.sizeDiff.width,h=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(r.css("position"))&&s(this).css({left:a.left-n.left-i.left,width:l,height:h}),t._helper&&!e.animate&&/static/.test(r.css("position"))&&s(this).css({left:a.left-n.left-i.left,width:l,height:h})}}),a.add(h,"alsoResize",{start:function(){var t=s(this).resizable("instance"),e=t.options;s(e.alsoResize).each(function(){var t=s(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(e,i){var n=s(this).resizable("instance"),r=n.options,o=n.originalSize,a=n.originalPosition,l={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0};s(r.alsoResize).each(function(){var e=s(this),n=s(this).data("ui-resizable-alsoresize"),r={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(l[e]||0);i&&i>=0&&(r[e]=i||null)}),e.css(r)})},stop:function(){s(this).removeData("ui-resizable-alsoresize")}}),a.add(h,"ghost",{start:function(){var t=s(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),t.ghost.appendTo(t.helper)},resize:function(){var t=s(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=s(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),a.add(h,"grid",{resize:function(){var t,e=s(this).resizable("instance"),i=e.options,n=e.size,r=e.originalSize,o=e.originalPosition,a=e.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-r.width)/h)*h,f=Math.round((n.height-r.height)/c)*c,p=r.width+u,d=r.height+f,m=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<d,v=i.minWidth&&i.minWidth>p,y=i.minHeight&&i.minHeight>d;i.grid=l,v&&(p+=h),y&&(d+=c),m&&(p-=h),g&&(d-=c),/^(se|s|e)$/.test(a)?(e.size.width=p,e.size.height=d):/^(ne)$/.test(a)?(e.size.width=p,e.size.height=d,e.position.top=o.top-f):/^(sw)$/.test(a)?(e.size.width=p,e.size.height=d,e.position.left=o.left-u):((d-c<=0||p-h<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),d-c>0?(e.size.height=d,e.position.top=o.top-f):(d=c-t.height,e.size.height=d,e.position.top=o.top+r.height-d),p-h>0?(e.size.width=p,e.position.left=o.left-u):(p=h-t.width,e.size.width=p,e.position.left=o.left+r.width-p))}}),r.register(h,"resizable"),h}),define("skylark-jqueryui-interact/Selectable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse"],function(t,e,i,n,s,r,o){var a=o.inherit({klassName:"Selectable",pluginName:"ui.selectable",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=s(t.element[0]).offset(),t.selectees=s(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var i=s(this),n=i.offset(),r={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:r.left,top:r.top,right:r.left+i.outerWidth(),bottom:r.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=s("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=s(this.element[0]).offset(),this.options.disabled||(this.selectees=s(n.filter,this.element[0]),this._trigger("start",t),s(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),s(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");if(s)return n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),i._removeClass(s.$element,n?"ui-unselecting":"ui-selected")._addClass(s.$element,n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,r=this.opos[0],o=this.opos[1],a=t.pageX,l=t.pageY;return r>a&&(i=a,a=r,r=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:r,top:o,width:a-r,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),h=!1,c={};i&&i.element!==n.element[0]&&(c.left=i.left+n.elementPos.left,c.right=i.right+n.elementPos.left,c.top=i.top+n.elementPos.top,c.bottom=i.bottom+n.elementPos.top,"touch"===s.tolerance?h=!(c.left>a||c.right<r||c.top>l||c.bottom<o):"fit"===s.tolerance&&(h=c.left>r&&c.right<a&&c.top>o&&c.bottom<l),h?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,s(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),s(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}});return r.register(a,"selectable"),a}),define("skylark-jqueryui-interact/Sortable",["skylark-utils-dom/langx","skylark-utils-dom/datax","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/query","skylark-utils-dom/plugins","./Mouse","./ddmanager"],function(t,e,i,n,s,r,o,a){var l=o.inherit({klassName:"Sortable",pluginName:"ui.sortable",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.pluginName+"-item");return this},_mouseCapture:function(t,i){var n=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),s(t.target).parents().each(function(){if(e.data(this,o.pluginName+"-item")===o)return n=s(this),!1}),e.data(t.target,o.pluginName+"-item")===o&&(n=s(t.target)),!!n&&(!(this.options.handle&&!i&&(s(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var r,o,l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=s("parent"!==l.appendTo?l.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),t.extend(this.offset,{parent:this._getParentOffset()}),l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",l.cursor),this.storedStylesheet=s("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(o)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return a&&(a.current=this),a&&!l.dropBehaviour&&a.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(t){var e=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-this.document.scrollTop()<e.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<e.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),t.pageX-this.document.scrollLeft()<e.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),i},_mouseDrag:function(t){var e,i,s,r,o=this.options;if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this._contactContainers(t),null!==this.innermostContainer)for(o.scroll&&!1!==this._scroll(t)&&(this._refreshItemPositions(!0),a&&!o.dropBehaviour&&a.prepareOffsets(this,t)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},e=this.items.length-1;e>=0;e--)if(i=this.items[e],s=i.item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===s||n.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&n.contains(this.element[0],s))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return a&&a.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(a&&!this.options.dropBehaviour&&a.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,s(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new i.create("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?s(this.domPosition.prev).after(this.currentItem):s(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},s(e).each(function(){var e=(s(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(s(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n+h>a&&n+h<l,f="y"===this.options.axis||e+c>r&&e+c<o,p=u&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;return!!r&&(e=this.dragDirection.vertical,i=this.dragDirection.horizontal,this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this.dragDirection.vertical,s=this.dragDirection.horizontal;return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(i){var n,r,o,a,l=[],h=[],c=this._connectWith();if(c&&i)for(n=c.length-1;n>=0;n--)for(o=s(c[n],this.document[0]),r=o.length-1;r>=0;r--)(a=e.data(o[r],this.pluginName))&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):s(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);function u(){l.push(this)}for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):s(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=h.length-1;n>=0;n--)h[n][0].each(u);return s(l)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.pluginName+"-item)");this.items=this.items.filter(function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(i){this.items=[],this.containers=[this];var n,r,o,a,l,h,c,u,f=this.items,p=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],i,{item:this.currentItem}):s(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=s(d[n],this.document[0]),r=o.length-1;r>=0;r--)(a=e.data(o[r],this.pluginName))&&a!==this&&!a.options.disabled&&(p.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],i,{item:this.currentItem}):s(a.options.items,a.element),a]),this.containers.push(a));for(n=p.length-1;n>=0;n--)for(l=p[n][1],h=p[n][0],r=0,u=h.length;r<u;r++)(c=s(h[r])).data(this.pluginName+"-item",l),f.push({item:c,instance:l,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(t){var e,i,n,r;for(e=this.items.length-1;e>=0;e--)i=this.items[e],this.currentContainer&&i.instance!==this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?s(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),r=n.offset(),i.left=r.left,i.top=r.top)},refreshPositions:function(t){var e,i;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),null!==this.innermostContainer&&this._refreshItemPositions(t),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--)i=this.containers[e].element.offset(),this.containers[e].containerCache.left=i.left,this.containers[e].containerCache.top=i.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(t){var e,i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(e=n.placeholder,i=t.currentItem[0].nodeName.toLowerCase(),n.placeholder={element:function(){var n=s("<"+i+">",t.document[0]);return t._addClass(n,"ui-sortable-placeholder",e||t.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),s("<tr>",t.document[0]).appendTo(n)):"tr"===i?t._createTrPlaceholder(t.currentItem,n):"img"===i&&n.attr("src",t.currentItem.attr("src")),e||n.css("visibility","hidden"),n},update:function(s,r){e&&!n.forcePlaceholderSize||(r.height()&&(!n.forcePlaceholderSize||"tbody"!==i&&"tr"!==i)||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=s(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){s("<td>&#160;</td>",i.document[0]).attr("colspan",s(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,s,r,o,a,l,h,c,u,f=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!n.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(f&&n.contains(this.containers[e].element[0],f.element[0]))continue;f=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(this.innermostContainer=f,f)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(s=1e4,r=null,c=f.floating||this._isFloating(this.currentItem),o=c?"left":"top",a=c?"width":"height",u=c?"pageX":"pageY",i=this.items.length-1;i>=0;i--)n.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],h=!1,t[u]-l>this.items[i][a]/2&&(h=!0),Math.abs(t[u]-l)<s&&(s=Math.abs(t[u]-l),r=this.items[i],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?s(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||this.appendTo[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=s(n.containment)[0],e=s(n.containment).offset(),i="hidden"!==s(t).css("overflow"),this.containment=[e.left+(parseInt(s(t).css("borderLeftWidth"),10)||0)+(parseInt(s(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(s(t).css("borderTopWidth"),10)||0)+(parseInt(s(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(s(t).css("borderLeftWidth"),10)||0)-(parseInt(s(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(s(t).css("borderTopWidth"),10)||0)-(parseInt(s(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*i}},_generatePosition:function(t){var e,i,s=this.options,r=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-s.grid[1]:e+s.grid[1]:e,i=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function s(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(s("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(s("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(t,e,i){!1===this.overrided(t,e,i)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||s([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}});return r.register(l,"sortable"),l}),define("skylark-jqueryui-interact/main",["./ddmanager","./Draggable","./Droppable","./Mouse","./Resizable","./Selectable","./Sortable"],function(t,e,i,n,s,r,o){return{ddmanager:t,Draggable:e,Droppable:i,Mouse:n,Resizable:s,Selectable:r,Sortable:o}}),define("skylark-jqueryui-interact",["skylark-jqueryui-interact/main"],function(t){return t})}(define,require),!isAmd){var skylarkjs=require("skylark-langx/skylark");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-jqueryui-interact-all.js.map
