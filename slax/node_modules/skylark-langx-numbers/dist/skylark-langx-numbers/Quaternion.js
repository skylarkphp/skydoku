/**
 * skylark-langx-numbers - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-maths","./numbers"],function(t,i){function s(t,i,s,h){this._x=t||0,this._y=i||0,this._z=s||0,this._w=void 0!==h?h:1}return Object.assign(s,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,_,n,r){var a=s[h+0],e=s[h+1],o=s[h+2],u=s[h+3],l=_[n+0],c=_[n+1],y=_[n+2],x=_[n+3];if(u!==x||a!==l||e!==c||o!==y){var z=1-r,w=a*l+e*c+o*y+u*x,f=w>=0?1:-1,g=1-w*w;if(g>Number.EPSILON){var C=Math.sqrt(g),b=Math.atan2(C,w*f);z=Math.sin(z*b)/C,r=Math.sin(r*b)/C}var m=r*f;if(a=a*z+l*m,e=e*z+c*m,o=o*z+y*m,u=u*z+x*m,z===1-r){var p=1/Math.sqrt(a*a+e*e+o*o+u*u);a*=p,e*=p,o*=p,u*=p}}t[i]=a,t[i+1]=e,t[i+2]=o,t[i+3]=u}}),Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(s.prototype,{set:function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,h=t._y,_=t._z,n=t.order,r=Math.cos,a=Math.sin,e=r(s/2),o=r(h/2),u=r(_/2),l=a(s/2),c=a(h/2),y=a(_/2);return"XYZ"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u-l*c*y):"YXZ"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u+l*c*y):"ZXY"===n?(this._x=l*o*u-e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u-l*c*y):"ZYX"===n?(this._x=l*o*u-e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u+l*c*y):"YZX"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u-l*c*y):"XZY"===n&&(this._x=l*o*u-e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u+l*c*y),!1!==i&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){var s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var i,s=t.elements,h=s[0],_=s[4],n=s[8],r=s[1],a=s[5],e=s[9],o=s[2],u=s[6],l=s[10],c=h+a+l;return c>0?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(u-e)*i,this._y=(n-o)*i,this._z=(r-_)*i):h>a&&h>l?(i=2*Math.sqrt(1+h-a-l),this._w=(u-e)/i,this._x=.25*i,this._y=(_+r)/i,this._z=(n+o)/i):a>l?(i=2*Math.sqrt(1+a-h-l),this._w=(n-o)/i,this._x=(_+r)/i,this._y=.25*i,this._z=(e+u)/i):(i=2*Math.sqrt(1+l-h-a),this._w=(r-_)/i,this._x=(n+o)/i,this._y=(e+u)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(t,i){var s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},angleTo:function(i){return 2*Math.acos(Math.abs(t.clamp(this.dot(i),-1,1)))},rotateTowards:function(t,i){var s=this.angleTo(t);if(0===s)return this;var h=Math.min(1,i/s);return this.slerp(t,h),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var s=t._x,h=t._y,_=t._z,n=t._w,r=i._x,a=i._y,e=i._z,o=i._w;return this._x=s*o+n*r+h*e-_*a,this._y=h*o+n*a+_*r-s*e,this._z=_*o+n*e+s*a-h*r,this._w=n*o-s*r-h*a-_*e,this._onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,h=this._y,_=this._z,n=this._w,r=n*t._w+s*t._x+h*t._y+_*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=n,this._x=s,this._y=h,this._z=_,this;var a=1-r*r;if(a<=Number.EPSILON){var e=1-i;return this._w=e*n+i*this._w,this._x=e*s+i*this._x,this._y=e*h+i*this._y,this._z=e*_+i*this._z,this.normalize(),this._onChangeCallback(),this}var o=Math.sqrt(a),u=Math.atan2(o,r),l=Math.sin((1-i)*u)/o,c=Math.sin(i*u)/o;return this._w=n*l+this._w*c,this._x=s*l+this._x*c,this._y=h*l+this._y*c,this._z=_*l+this._z*c,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},fromBufferAttribute:function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),i.Quaternion=s});
//# sourceMappingURL=sourcemaps/Quaternion.js.map
