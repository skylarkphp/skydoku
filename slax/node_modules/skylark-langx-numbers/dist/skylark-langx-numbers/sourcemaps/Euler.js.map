{"version":3,"sources":["Euler.js"],"names":["define","maths","numbers","Quaternion","Vector3","Matrix4","_matrix","_quaternion","Euler","x","y","z","order","this","_x","_y","_z","_order","DefaultOrder","RotationOrders","Object","defineProperties","prototype","get","set","value","_onChangeCallback","assign","isEuler","clone","constructor","copy","euler","setFromRotationMatrix","m","update","clamp","te","elements","m11","m12","m13","m21","m22","m23","m31","m32","m33","Math","asin","abs","atan2","console","warn","setFromQuaternion","q","makeRotationFromQuaternion","setFromVector3","v","reorder","newOrder","setFromEuler","equals","fromArray","array","undefined","toArray","offset","toVector3","optionalResult","_onChange","callback"],"mappings":"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","file":"../Euler.js","sourcesContent":["define([\r\n\t\"skylark-langx-maths\",\r\n\t\"./numbers\",\r\n\t\"./Quaternion\",\r\n\t\"./Vector3\",\r\n\t\"./Matrix4\"\r\n] ,function(\r\n\tmaths,\r\n\tnumbers,\r\n\tQuaternion,\r\n\tVector3,\r\n\tMatrix4\r\n) {\r\n\r\n\r\n\tvar _matrix = new Matrix4();\r\n\tvar _quaternion = new Quaternion();\r\n\r\n\tfunction Euler( x, y, z, order ) {\r\n\r\n\t\tthis._x = x || 0;\r\n\t\tthis._y = y || 0;\r\n\t\tthis._z = z || 0;\r\n\t\tthis._order = order || Euler.DefaultOrder;\r\n\r\n\t}\r\n\r\n\tEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\n\tEuler.DefaultOrder = 'XYZ';\r\n\r\n\tObject.defineProperties( Euler.prototype, {\r\n\r\n\t\tx: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._x;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._x = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ty: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._y;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._y = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tz: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._z;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._z = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\torder: {\r\n\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn this._order;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tthis._order = value;\r\n\t\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n\tObject.assign( Euler.prototype, {\r\n\r\n\t\tisEuler: true,\r\n\r\n\t\tset: function ( x, y, z, order ) {\r\n\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._order = order || this._order;\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tclone: function () {\r\n\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t\t},\r\n\r\n\t\tcopy: function ( euler ) {\r\n\r\n\t\t\tthis._x = euler._x;\r\n\t\t\tthis._y = euler._y;\r\n\t\t\tthis._z = euler._z;\r\n\t\t\tthis._order = euler._order;\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\t\tvar clamp = maths.clamp;\r\n\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\t\tvar te = m.elements;\r\n\t\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\t\torder = order || this._order;\r\n\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._order = order;\r\n\r\n\t\t\tif ( update !== false ) this._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetFromQuaternion: function ( q, order, update ) {\r\n\r\n\t\t\t_matrix.makeRotationFromQuaternion( q );\r\n\r\n\t\t\treturn this.setFromRotationMatrix( _matrix, order, update );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t\t},\r\n\r\n\t\treorder: function ( newOrder ) {\r\n\r\n\t\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\t\t_quaternion.setFromEuler( this );\r\n\r\n\t\t\treturn this.setFromQuaternion( _quaternion, newOrder );\r\n\r\n\t\t},\r\n\r\n\t\tequals: function ( euler ) {\r\n\r\n\t\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t\t},\r\n\r\n\t\tfromArray: function ( array ) {\r\n\r\n\t\t\tthis._x = array[ 0 ];\r\n\t\t\tthis._y = array[ 1 ];\r\n\t\t\tthis._z = array[ 2 ];\r\n\t\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\t\tthis._onChangeCallback();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\ttoArray: function ( array, offset ) {\r\n\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t},\r\n\r\n\t\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\t\tif ( optionalResult ) {\r\n\r\n\t\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn new Vector3( this._x, this._y, this._z );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_onChange: function ( callback ) {\r\n\r\n\t\t\tthis._onChangeCallback = callback;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\t_onChangeCallback: function () {}\r\n\r\n\t} );\r\n\r\n\r\n\treturn numbers.Euler = Euler ;\r\n});\r\n"]}