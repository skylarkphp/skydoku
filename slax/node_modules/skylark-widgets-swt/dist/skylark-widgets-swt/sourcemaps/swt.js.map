{"version":3,"sources":["swt.js"],"names":["define","skylark","langx","browser","eventer","noder","geom","$","ui","sbswt","CONST","BACKSPACE_KEYCODE","COMMA_KEYCODE","DELETE_KEYCODE","DOWN_ARROW_KEYCODE","ENTER_KEYCODE","TAB_KEYCODE","UP_ARROW_KEYCODE","isKey","keyCode","e","isBackspaceKey","isDeleteKey","isTabKey","isUpArrow","isDownArrow","ENCODED_REGEX","mixin","cleanInput","questionableMarkup","test","html","text","isShiftHeld","shiftKey"],"mappings":";;;;;;;AAAAA,QACE,wBACA,sBACA,uBACA,uBACA,qBACA,oBACA,sBACA,SAASC,EAAQC,EAAMC,EAAQC,EAAQC,EAAMC,EAAKC,GACnD,IAAIC,EAAKP,EAAQO,GAAKP,EAAQO,OAC7BC,MAAQD,EAAGC,SAEZ,IAAIC,GACHC,kBAAmB,EACnBC,cAAe,IACfC,eAAgB,GAChBC,mBAAoB,GACpBC,cAAe,GACfC,YAAa,EACbC,iBAAkB,IAKfC,EAAQ,SAAgBC,GAC3B,OAAO,SAA0BC,GAChC,OAAOA,EAAED,UAAYA,IAInBE,EAAiBH,EAAMR,EAAMC,mBAC7BW,EAAcJ,EAAMR,EAAMG,gBAC1BU,EAAWL,EAAMR,EAAMM,aACvBQ,EAAYN,EAAMR,EAAMO,kBACxBQ,EAAcP,EAAMR,EAAMI,oBAE1BY,EAAgB,WAyBpB,OAXAxB,EAAMyB,MAAMnB,GACXE,MAAOA,EACPkB,WAZgB,SAAqBC,GAErC,KAAOH,EAAcI,KAAKD,IACzBA,EAAqBtB,EAAE,OAAOwB,KAAKF,GAAoBG,OAIxD,OAAOzB,EAAE,OAAOyB,KAAKH,GAAoBE,QAMzCV,eAAgBA,EAChBC,YAAaA,EACbW,YAjCiB,SAAsBb,GAAK,OAAsB,IAAfA,EAAEc,UAkCrDX,SAAUA,EACVC,UAAWA,EACXC,YAAaA,IAGPjB","file":"../swt.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-query\"\r\n],function(skylark,langx,browser,eventer,noder,geom,$){\r\n\tvar ui = skylark.ui = skylark.ui || {};\r\n\t\tsbswt = ui.sbswt = {};\r\n\r\n\tvar CONST = {\r\n\t\tBACKSPACE_KEYCODE: 8,\r\n\t\tCOMMA_KEYCODE: 188, // `,` & `<`\r\n\t\tDELETE_KEYCODE: 46,\r\n\t\tDOWN_ARROW_KEYCODE: 40,\r\n\t\tENTER_KEYCODE: 13,\r\n\t\tTAB_KEYCODE: 9,\r\n\t\tUP_ARROW_KEYCODE: 38\r\n\t};\r\n\r\n\tvar isShiftHeld = function isShiftHeld (e) { return e.shiftKey === true; };\r\n\r\n\tvar isKey = function isKey (keyCode) {\r\n\t\treturn function compareKeycodes (e) {\r\n\t\t\treturn e.keyCode === keyCode;\r\n\t\t};\r\n\t};\r\n\r\n\tvar isBackspaceKey = isKey(CONST.BACKSPACE_KEYCODE);\r\n\tvar isDeleteKey = isKey(CONST.DELETE_KEYCODE);\r\n\tvar isTabKey = isKey(CONST.TAB_KEYCODE);\r\n\tvar isUpArrow = isKey(CONST.UP_ARROW_KEYCODE);\r\n\tvar isDownArrow = isKey(CONST.DOWN_ARROW_KEYCODE);\r\n\r\n\tvar ENCODED_REGEX = /&[^\\s]*;/;\r\n\t/*\r\n\t * to prevent double encoding decodes content in loop until content is encoding free\r\n\t */\r\n\tvar cleanInput = function cleanInput (questionableMarkup) {\r\n\t\t// check for encoding and decode\r\n\t\twhile (ENCODED_REGEX.test(questionableMarkup)) {\r\n\t\t\tquestionableMarkup = $('<i>').html(questionableMarkup).text();\r\n\t\t}\r\n\r\n\t\t// string completely decoded now encode it\r\n\t\treturn $('<i>').text(questionableMarkup).html();\r\n\t};\r\n\r\n\tlangx.mixin(ui, {\r\n\t\tCONST: CONST,\r\n\t\tcleanInput: cleanInput,\r\n\t\tisBackspaceKey: isBackspaceKey,\r\n\t\tisDeleteKey: isDeleteKey,\r\n\t\tisShiftHeld: isShiftHeld,\r\n\t\tisTabKey: isTabKey,\r\n\t\tisUpArrow: isUpArrow,\r\n\t\tisDownArrow: isDownArrow\r\n\t});\r\n\r\n\treturn ui;\r\n\r\n});\r\n"]}