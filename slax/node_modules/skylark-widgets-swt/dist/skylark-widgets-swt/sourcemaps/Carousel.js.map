{"version":3,"sources":["Carousel.js"],"names":["define","langx","browser","eventer","noder","geom","$","swt","Widget","Carousel","inherit","klassName","pluginName","options","items","indicatorTemplate","slideTemplate","templates","container","indicators","item","slides","_init","this","_bs_carousel","_velm","carousel","self","on","e","$this","slideIndex","attr","to","prev","next","preventDefault","pos","pause","cycle","add","createIndicator","obj","thumbnailUrl","thumbnail","gallery","indicator","indicatorPrototype","cloneNode","title","getItemTitle","thumbnailProperty","thumbnailIndicators","Gallery","getItemProperty","undefined","getElementsByTagName","find","src","style","backgroundImage","addIndicator","index","indicatorContainer","length","list","setAttribute","appendChild","push","setActiveIndicator","activeIndicator","removeClass","activeIndicatorClass","addClass","initSlides","reload","document","createElement","children","overrided","addSlide","resetSlides","empty"],"mappings":";;;;;;;AAAAA,QACI,sBACA,uBACA,uBACA,qBACA,oBACA,qBACA,QACA,WACA,+BACD,SAASC,EAAOC,EAASC,EAASC,EAAOC,EAAOC,EAAGC,EAAKC,GAEvD,IAAIC,EAAYD,EAAOE,SACnBC,UAAY,WACZC,WAAa,gBAEbC,SAEIC,SAEAC,kBAAoB,GACpBC,cAAgB,GAEhBC,WACEC,UAAY,wDAEZC,YACID,UAAY,wCAEZE,KAAQ,aAGZC,QACIH,UAAY,mCAEZE,KAAQ,kFAOlBE,MAAQ,WACNC,KAAKC,aAAeD,KAAKE,MAAMC,SAASH,KAAKV,SAC7C,IAAIc,EAAOJ,KACXA,KAAKE,MAAMG,GAAG,aAAc,+BAAgC,SAASC,GACnE,IAAIC,EAAQxB,EAAEiB,MACVQ,EAAaD,EAAME,KAAK,iBACxBD,EACAJ,EAAKM,GAAGF,GAGS,QADDD,EAAME,KAAK,cAE3BL,EAAKO,OAELP,EAAKQ,OAITN,EAAEO,oBAKNH,GAAK,SAASI,GACZ,OAAOd,KAAKC,aAAaS,GAAGI,IAG9BC,MAAQ,SAAST,GAEf,OADAN,KAAKC,aAAac,MAAMT,GACjBN,MAGTgB,MAAQ,SAASV,GACf,OAAON,KAAKC,aAAae,MAAMV,IAGjCM,KAAO,WACL,OAAOZ,KAAKC,aAAaW,QAG3BD,KAAO,WACL,OAAOX,KAAKC,aAAaU,QAG3BM,IAAM,aAINC,gBAAiB,SAAUC,GACzB,IAIIC,EACAC,EALAC,EAAUtB,KAAKsB,QACjBC,EAAYvB,KAAKwB,mBAAmBC,WAAU,GAC5CC,EAAQJ,EAAQK,aAAaR,GAC7BS,EAAoB5B,KAAKV,QAAQsC,kBAoBrC,OAjBI5B,KAAKV,QAAQuC,sBACXD,IACFR,EAAeU,QAAQC,gBAAgBZ,EAAKS,SAEzBI,IAAjBZ,IACFC,EAAYF,EAAIc,sBAAwBlD,EAAEoC,GAAKe,KAAK,OAAO,MAEzDd,EAAeC,EAAUc,KAGzBf,IACFG,EAAUa,MAAMC,gBAAkB,QAAUjB,EAAe,OAG3DM,IACFH,EAAUG,MAAQA,GAEbH,GAGXe,aAAc,SAAUC,GACtB,GAAIvC,KAAKwC,mBAAmBC,OAAQ,CAClC,IAAIlB,EAAYvB,KAAKkB,gBAAgBlB,KAAK0C,KAAKH,IAC/ChB,EAAUoB,aAAa,gBAAiBJ,GACxCvC,KAAKwC,mBAAmB,GAAGI,YAAYrB,GACvCvB,KAAKJ,WAAWiD,KAAKtB,KAIzBuB,mBAAoB,SAAUP,GACxBvC,KAAKJ,aACHI,KAAK+C,iBACP/C,KAAK+C,gBAAgBC,YAAYhD,KAAKV,QAAQ2D,sBAEhDjD,KAAK+C,gBAAkBhE,EAAEiB,KAAKJ,WAAW2C,IACzCvC,KAAK+C,gBAAgBG,SAASlD,KAAKV,QAAQ2D,wBAI/CE,WAAY,SAAUC,GACfA,IACHpD,KAAKwC,mBAAqBxC,KAAKL,UAAUuC,KACvClC,KAAKV,QAAQkD,oBAEXxC,KAAKwC,mBAAmBC,SAC1BzC,KAAKwB,mBAAqB6B,SAASC,cAAc,MACjDtD,KAAKJ,WAAaI,KAAKwC,mBAAmB,GAAGe,WAGjDvD,KAAKwD,UAAUJ,IAGjBK,SAAU,SAAUlB,GAClBvC,KAAKwD,UAAUjB,GACfvC,KAAKsC,aAAaC,IAGpBmB,YAAa,WACX1D,KAAKwD,YACLxD,KAAKwC,mBAAmBmB,QACxB3D,KAAKJ,iBAKT,OAAOZ,EAAIE,SAAWA","file":"../Carousel.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-browser\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-query\",\r\n    \"./swt\",\r\n    \"./Widget\",\r\n    \"skylark-bootstrap3/carousel\"\r\n], function(langx, browser, eventer, noder, geom,  $, swt, Widget) {\r\n\r\n    var Carousel =  Widget.inherit({\r\n        klassName : \"Carousel\",\r\n        pluginName : \"lark.carousel\",\r\n\r\n        options : {\r\n\r\n            items : [],\r\n\r\n            indicatorTemplate : \"\",\r\n            slideTemplate : \"\",\r\n\r\n            templates : {\r\n              container : \"<div class=\\\"carousel slide\\\" data-ride=\\\"carousel\\\">\" +\r\n                          \"/div\",\r\n              indicators : {\r\n                  container : \"<ol class=\\\"carousel-indicators\\\">\" +\r\n                              \"</ol>\",\r\n                  item :  \"<li></li>\"\r\n              },\r\n\r\n              slides : {\r\n                  container : \"<div class=\\\"carousel-inner\\\">\" +\r\n                              \"/div\",\r\n                  item :  \"<div class=\\\"item carousel-item\\\">\" +\r\n                            \"<img alt=\\\"First slide\\\"  src=\\\"{{url}}\\\">\" +\r\n                          \"</div>\"\r\n              }\r\n            }\r\n        },\r\n\r\n        _init : function() {\r\n          this._bs_carousel = this._velm.carousel(this.options);\r\n          var self = this;          \r\n          this._velm.on(\"click.lark\", \"[data-slide],[data-slide-to]\", function(e) {\r\n            var $this = $(this)\r\n            var slideIndex = $this.attr('data-slide-to');\r\n            if (slideIndex) {\r\n                self.to(slideIndex);\r\n            } else {\r\n              var slideAction = $this.attr('data-slide');\r\n              if (slideAction == \"prev\") {\r\n                self.prev();\r\n              } else {\r\n                self.next();\r\n              }\r\n            }\r\n\r\n            e.preventDefault();\r\n\r\n        });\r\n        },\r\n\r\n        to : function(pos) {\r\n          return this._bs_carousel.to(pos);\r\n        },\r\n\r\n        pause : function(e) {\r\n          this._bs_carousel.pause(e);\r\n          return this;\r\n        },\r\n\r\n        cycle : function(e) {\r\n          return this._bs_carousel.cycle(e);\r\n        },\r\n\r\n        next : function() {\r\n          return this._bs_carousel.next();\r\n        },\r\n\r\n        prev : function() {\r\n          return this._bs_carousel.prev();\r\n        },\r\n\r\n        add : function() {\r\n            \r\n        },\r\n\r\n        createIndicator: function (obj) {\r\n          var gallery = this.gallery,\r\n            indicator = this.indicatorPrototype.cloneNode(false)\r\n          var title = gallery.getItemTitle(obj)\r\n          var thumbnailProperty = this.options.thumbnailProperty\r\n          var thumbnailUrl\r\n          var thumbnail\r\n          if (this.options.thumbnailIndicators) {\r\n            if (thumbnailProperty) {\r\n              thumbnailUrl = Gallery.getItemProperty(obj, thumbnailProperty)\r\n            }\r\n            if (thumbnailUrl === undefined) {\r\n              thumbnail = obj.getElementsByTagName && $(obj).find('img')[0]\r\n              if (thumbnail) {\r\n                thumbnailUrl = thumbnail.src\r\n              }\r\n            }\r\n            if (thumbnailUrl) {\r\n              indicator.style.backgroundImage = 'url(\"' + thumbnailUrl + '\")'\r\n            }\r\n          }\r\n          if (title) {\r\n            indicator.title = title;\r\n          }\r\n          return indicator;\r\n      },\r\n\r\n      addIndicator: function (index) {\r\n        if (this.indicatorContainer.length) {\r\n          var indicator = this.createIndicator(this.list[index])\r\n          indicator.setAttribute('data-slide-to', index)\r\n          this.indicatorContainer[0].appendChild(indicator)\r\n          this.indicators.push(indicator)\r\n        }\r\n      },\r\n\r\n      setActiveIndicator: function (index) {\r\n        if (this.indicators) {\r\n          if (this.activeIndicator) {\r\n            this.activeIndicator.removeClass(this.options.activeIndicatorClass)\r\n          }\r\n          this.activeIndicator = $(this.indicators[index])\r\n          this.activeIndicator.addClass(this.options.activeIndicatorClass)\r\n        }\r\n      },\r\n\r\n      initSlides: function (reload) {\r\n        if (!reload) {\r\n          this.indicatorContainer = this.container.find(\r\n            this.options.indicatorContainer\r\n          )\r\n          if (this.indicatorContainer.length) {\r\n            this.indicatorPrototype = document.createElement('li')\r\n            this.indicators = this.indicatorContainer[0].children\r\n          }\r\n        }\r\n        this.overrided(reload);\r\n      },\r\n\r\n      addSlide: function (index) {\r\n        this.overrided(index);\r\n        this.addIndicator(index)\r\n      },\r\n\r\n      resetSlides: function () {\r\n        this.overrided();\r\n        this.indicatorContainer.empty();\r\n        this.indicators = [];\r\n      },\r\n\r\n    });\r\n\r\n    return swt.Carousel = Carousel;\r\n\r\n});"]}