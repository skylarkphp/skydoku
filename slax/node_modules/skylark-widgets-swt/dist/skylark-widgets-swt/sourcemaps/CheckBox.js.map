{"version":3,"sources":["CheckBox.js"],"names":["define","langx","browser","eventer","noder","geom","$","swt","_Toggler","CheckBox","inherit","klassName","pluginName","options","selectors","chk","lbl","template","undefined","checked","label","value","_parse","elm","this","overrided","$el","chkSelector","lblSelector","$chk","find","prop","disabled","_create","_init","_elm","$lbl","_velm","_startup","self","on","evt","state","set","_refresh","updates","changed","$containerToggle","$label","$toggleContainer","addClass","removeClass","setDisabledState"],"mappings":";;;;;;;AAAAA,QACE,sBACA,uBACA,uBACA,qBACA,oBACA,qBACA,QACA,cACA,SAASC,EAAMC,EAAQC,EAAQC,EAAMC,EAAKC,EAAEC,EAAIC,GAEhD,IAAIC,EAAYD,EAASE,SACvBC,UAAW,WAEXC,WAAa,gBAEbC,SACEC,WACEC,IAAM,uBACNC,IAAM,kBAERC,cAAWC,EACXC,aAAUD,EACVE,WAAQF,EACRG,WAAQH,GAMVI,OAAS,SAASC,EAAIV,GACpBA,EAAUW,KAAKC,UAAUF,EAAIV,GAC7B,IAAIa,EAAMpB,EAAEiB,GACRI,EAAcd,EAAQC,WAAaD,EAAQC,UAAUC,IACrDa,EAAcf,EAAQC,WAAaD,EAAQC,UAAUE,IAEpDW,IACHA,EAAcH,KAAKX,QAAQC,UAAUC,KAElCa,IACHA,EAAcJ,KAAKX,QAAQC,UAAUE,KAGvC,IAAIa,EAAOH,EAAII,KAAKH,GACTD,EAAII,KAAKF,GAcpB,YAZuBV,GAAnBL,EAAQM,QACVN,EAAQM,QAAUU,EAAKE,KAAK,WAE5BF,EAAKE,KAAK,UAAUlB,EAAQM,cAGND,GAApBL,EAAQmB,SACVnB,EAAQmB,SAAWH,EAAKE,KAAK,YAE7BF,EAAKE,KAAK,WAAWlB,EAAQmB,UAGxBnB,GAMToB,QAAU,aAOVC,MAAQ,WACIV,KAAKW,KAGfX,KAAKY,KAAOZ,KAAKa,MAAM/B,EAAEkB,KAAKX,QAAQC,UAAUE,KAChDQ,KAAKK,KAAOL,KAAKa,MAAM/B,EAAEkB,KAAKX,QAAQC,UAAUC,MAOlDuB,SAAW,WAET,IAAIC,EAAOf,KACXA,KAAKK,KAAKW,GAAG,SAAU,SAASC,GAE9B,IAAItB,EAAUoB,EAAKV,KAAKE,KAAK,WAC7BQ,EAAKG,MAAMC,IAAI,UAAUxB,MAO7ByB,SAAW,SAASC,GAgChBrB,KAAKC,UAAUqB,SACf,IA/B0B3B,EACpBU,EACAO,EACAW,EA4BFR,EAAQf,KAERqB,EAAiB,UAjCK1B,EAkCR0B,EAAiB,QAAExB,MAjC/BQ,EAAOU,EAAKV,KACZO,EAAOG,EAAKS,OACZD,EAAmBR,EAAKU,iBAExB9B,GACFU,EAAKE,KAAK,WAAW,GACrBK,EAAKc,SAAS,WACdH,EAAiBI,YAAY,iBAE7BtB,EAAKE,KAAK,WAAW,GACrBK,EAAKe,YAAY,WACjBJ,EAAiBG,SAAS,YAwB1BL,EAAkB,UApBtB,SAA2Bb,GACzB,IAAIH,EAAOU,EAAKV,KACZO,EAAOG,EAAKS,OAEZhB,GACFH,EAAKE,KAAK,YAAY,GACtBK,EAAKc,SAAS,cAEdrB,EAAKE,KAAK,YAAY,GACtBK,EAAKe,YAAY,aAYnBC,CAAiBP,EAAkB,SAAExB,UAK9C,OAAOd,EAAIE,SAAWA","file":"../CheckBox.js","sourcesContent":["define([\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-browser\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-query\",\r\n  \"./swt\",\r\n  \"./_Toggler\"\r\n],function(langx,browser,eventer,noder,geom,$,swt,_Toggler){\r\n\r\n  var CheckBox =  _Toggler.inherit({\r\n    klassName: \"CheckBox\",\r\n\r\n    pluginName : \"lark.checkbox\",\r\n\r\n    options : {\r\n      selectors : {\r\n        chk : \"input[type=checkbox]\",\r\n        lbl : \"checkbox-label\"\r\n      },\r\n      template : undefined,\r\n      checked : undefined,\r\n      label : undefined,\r\n      value : undefined\r\n    },\r\n\r\n    /*\r\n     *@override\r\n     */\r\n    _parse : function(elm,options) {\r\n      options = this.overrided(elm,options);\r\n      var $el = $(elm),\r\n          chkSelector = options.selectors && options.selectors.chk,\r\n          lblSelector = options.selectors && options.selectors.lbl;\r\n\r\n      if (!chkSelector) {\r\n        chkSelector = this.options.selectors.chk;\r\n      }\r\n      if (!lblSelector) {\r\n        lblSelector = this.options.selectors.lbl;\r\n      }\r\n\r\n      var $chk = $el.find(chkSelector),\r\n          $lbl = $el.find(lblSelector);\r\n\r\n      if (options.checked == undefined) {\r\n        options.checked = $chk.prop('checked')\r\n      } else {\r\n        $chk.prop('checked',options.checked);\r\n      }\r\n\r\n      if (options.disabled == undefined) {\r\n        options.disabled = $chk.prop('disabled')\r\n      } else {\r\n        $chk.prop('disabled',options.disabled);\r\n      }\r\n\r\n      return options;\r\n    },\r\n\r\n    /*\r\n     *@override\r\n     */\r\n    _create : function() {\r\n      //TODO\r\n    },\r\n\r\n    /*\r\n     *@override\r\n     */\r\n    _init : function() {\r\n      var elm = this._elm;\r\n\r\n      // cache elements\r\n      this.$lbl = this._velm.$(this.options.selectors.lbl);\r\n      this.$chk = this._velm.$(this.options.selectors.chk);\r\n    },\r\n\r\n\r\n    /*\r\n     *@override\r\n     */\r\n    _startup : function() {\r\n      // handle internal events\r\n      var self = this;\r\n      this.$chk.on('change', function(evt) {\r\n        //var $chk = $(evt.target);\r\n        var checked = self.$chk.prop('checked');\r\n        self.state.set(\"checked\",checked);\r\n      });\r\n    },\r\n\r\n    /*\r\n     *@override\r\n     */\r\n    _refresh : function(updates) {\r\n\r\n        function setCheckedState (checked) {\r\n          var $chk = self.$chk;\r\n          var $lbl = self.$label;\r\n          var $containerToggle = self.$toggleContainer;\r\n\r\n          if (checked) {\r\n            $chk.prop('checked', true);\r\n            $lbl.addClass('checked');\r\n            $containerToggle.removeClass('hide hidden');\r\n          } else {\r\n            $chk.prop('checked', false);\r\n            $lbl.removeClass('checked');\r\n            $containerToggle.addClass('hidden');\r\n          }\r\n        }\r\n\r\n        function setDisabledState (disabled) {\r\n          var $chk = self.$chk;\r\n          var $lbl = self.$label;\r\n\r\n          if (disabled) {\r\n            $chk.prop('disabled', true);\r\n            $lbl.addClass('disabled');\r\n          } else {\r\n            $chk.prop('disabled', false);\r\n            $lbl.removeClass('disabled');\r\n          }\r\n        }\r\n\r\n        // update visual with attribute values from control\r\n        this.overrided(changed);\r\n        var self  = this;\r\n\r\n        if (updates[\"checked\"]) {\r\n          setCheckedState(updates[\"checked\"].value);\r\n        }\r\n        if (updates[\"disabled\"]) {\r\n          setDisabledState(updates[\"disabled\"].value);\r\n        }\r\n    }\r\n  });\r\n\r\n\treturn swt.CheckBox = CheckBox;\r\n});\r\n"]}