{"version":3,"sources":["select.js"],"names":["define","diskfs","fileInput","maxFileSize","select","params","directory","multiple","accept","title","fileSelected","picked","input","document","createElement","selectFiles","pickedFiles","i","length","size","splice","type","style","position","left","top","opacity","body","appendChild","onchange","e","entries","target","webkitEntries","webentry","all","then","files","Array","prototype","slice","call","value","webkitdirectory","click"],"mappings":";;;;;;;AAAAA,QACI,YACF,SAASC,GACP,IAAIC,EAGAC,EAAc,EAAA,EAkDlB,OAAOF,EAAOG,OAhDd,SAAgBC,GAEZ,IAAIC,GADJD,EAASA,OACcC,YAAa,EAChCC,EAAWF,EAAOE,WAAY,EAC9BC,EAASH,EAAOG,QAAU,GAC1BC,EAAQJ,EAAOI,OAAS,GACxBC,EAAeL,EAAOM,OAC1B,IAAKT,EAAW,CACZ,IAAIU,EAAQV,EAAYW,SAASC,cAAc,SAE/C,SAASC,EAAYC,GACjB,IAAK,IAAIC,EAAID,EAAYE,OAAQD,KACzBD,EAAYC,GAAGE,KAAOhB,GACtBa,EAAYI,OAAOH,EAAG,GAG9BP,EAAaM,GAGjBJ,EAAMS,KAAO,OACbT,EAAMU,MAAMC,SAAW,QACvBX,EAAMU,MAAME,KAAO,EACnBZ,EAAMU,MAAMG,IAAM,EAClBb,EAAMU,MAAMI,QAAU,KACtBb,SAASc,KAAKC,YAAYhB,GAE1BA,EAAMiB,SAAW,SAASC,GACtB,IAAIC,EAAUD,EAAEE,OAAOC,eAAiBH,EAAEE,OAAOD,QAE7CA,GAAWA,EAAQb,OACnBgB,SAASC,IAAIJ,GAASK,KAAK,SAASC,GAChCtB,EAAYsB,KAGhBtB,EAAYuB,MAAMC,UAAUC,MAAMC,KAAKX,EAAEE,OAAOK,QAGpDzB,EAAM8B,MAAQ,IAGtBxC,EAAUK,SAAWA,EACrBL,EAAUM,OAASA,EACnBN,EAAUO,MAAQA,EAElBP,EAAUyC,gBAAkBrC,EAC5BJ,EAAU0C","file":"../select.js","sourcesContent":["define([\r\n    \"./diskfs\"\r\n],function(diskfs){\r\n    var fileInput,\r\n        fileInputForm,\r\n        fileSelected,\r\n        maxFileSize = 1 / 0;\r\n\r\n    function select(params) {\r\n        params = params || {};\r\n        var directory = params.directory || false,\r\n            multiple = params.multiple || false,\r\n            accept = params.accept || \"\", //'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n            title = params.title || \"\",\r\n            fileSelected = params.picked;\r\n        if (!fileInput) {\r\n            var input = fileInput = document.createElement(\"input\");\r\n\r\n            function selectFiles(pickedFiles) {\r\n                for (var i = pickedFiles.length; i--;) {\r\n                    if (pickedFiles[i].size > maxFileSize) {\r\n                        pickedFiles.splice(i, 1);\r\n                    }\r\n                }\r\n                fileSelected(pickedFiles);\r\n            }\r\n\r\n            input.type = \"file\";\r\n            input.style.position = \"fixed\";\r\n            input.style.left = 0;\r\n            input.style.top = 0;\r\n            input.style.opacity = .001;\r\n            document.body.appendChild(input);\r\n\r\n            input.onchange = function(e) {\r\n                var entries = e.target.webkitEntries || e.target.entries;\r\n\r\n                if (entries && entries.length) {\r\n                    webentry.all(entries).then(function(files) {\r\n                        selectFiles(files);\r\n                    });\r\n                } else {\r\n                    selectFiles(Array.prototype.slice.call(e.target.files));\r\n                }\r\n                // reset to \"\", so selecting the same file next time still trigger the change handler\r\n                input.value = \"\";\r\n            };\r\n        }\r\n        fileInput.multiple = multiple;\r\n        fileInput.accept = accept;\r\n        fileInput.title = title;\r\n\r\n        fileInput.webkitdirectory = directory;\r\n        fileInput.click();\r\n    }\r\n\r\n    return diskfs.select = select;\r\n});\r\n\r\n"]}