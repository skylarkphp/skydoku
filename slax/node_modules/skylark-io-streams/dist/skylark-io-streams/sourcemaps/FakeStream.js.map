{"version":3,"sources":["FakeStream.js"],"names":["define","skylark","langx","streams","DecodeStream","FakeStream","inherit","klassName","init","stream","this","dict","Stream","prototype","call","readBlock","bufferLength","ensureBuffer","getBytes","length","end","pos","eof","bufEnd","buffer","subarray"],"mappings":";;;;;;;AACAA,QACI,wBACA,sBACA,YACA,kBACD,SAASC,EAASC,EAAOC,EAASC,GAEjC,IAAIC,EAAaD,EAAaE,SAC1BC,UAAY,aAEZC,KAAO,SAASC,GACZC,KAAKC,KAAOF,EAAOE,KACnBC,OAAOC,UAAUL,KAAKM,KAAKJ,OAG/BK,UAAY,WACR,IAAIC,EAAeN,KAAKM,aACxBA,GAAgB,KACHN,KAAKO,aAAaD,GAC/BN,KAAKM,aAAeA,GAGxBE,SAAW,SAAUC,GACjB,IAAIC,EAAKC,EAAMX,KAAKW,IAEpB,GAAIF,EAAQ,CAIR,IAHAT,KAAKO,aAAaI,EAAMF,GACxBC,EAAMC,EAAMF,GAEJT,KAAKY,KAAOZ,KAAKM,aAAeI,GACpCV,KAAKK,YAET,IAAIQ,EAASb,KAAKM,aACdI,EAAMG,IACNH,EAAMG,QAEVb,KAAKY,KAAM,EACXF,EAAMV,KAAKM,aAIf,OADAN,KAAKW,IAAMD,EACJV,KAAKc,OAAOC,SAASJ,EAAKD,MAKzC,OAAOjB,EAAQE,WAAaA","file":"../FakeStream.js","sourcesContent":["\r\ndefine([\r\n    \"skylark-langx/skylark\",\r\n    \"skylark-langx/langx\",\r\n    \"./streams\",\r\n    \"./DecodeStream\"\r\n], function(skylark, langx, streams, DecodeStream) {\r\n\r\n    var FakeStream = DecodeStream.inherit({\r\n        klassName : \"FakeStream\",\r\n\r\n        init : function(stream) {\r\n            this.dict = stream.dict;\r\n            Stream.prototype.init.call(this);          \r\n        },\r\n\r\n        readBlock : function() {\r\n            var bufferLength = this.bufferLength;\r\n            bufferLength += 1024;\r\n            var buffer = this.ensureBuffer(bufferLength);\r\n            this.bufferLength = bufferLength;\r\n        },\r\n\r\n        getBytes : function (length) {\r\n            var end, pos = this.pos;\r\n\r\n            if (length) {\r\n                this.ensureBuffer(pos + length);\r\n                end = pos + length;\r\n\r\n                while (!this.eof && this.bufferLength < end)\r\n                    this.readBlock();\r\n\r\n                var bufEnd = this.bufferLength;\r\n                if (end > bufEnd)\r\n                    end = bufEnd;\r\n            } else {\r\n                this.eof = true;\r\n                end = this.bufferLength;\r\n            }\r\n\r\n            this.pos = end;\r\n            return this.buffer.subarray(pos, end);\r\n        }\r\n\r\n    });\r\n\r\n    return streams.FakeStream = FakeStream;\r\n});\r\n"]}