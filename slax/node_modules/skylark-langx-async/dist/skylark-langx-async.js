/**
 * skylark-langx-async - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(e,r){var t=r.define,n=r.require,o="function"==typeof t&&t.amd,i=!o&&"undefined"!=typeof exports;if(!o&&!t){var s={};t=r.define=function(e,r,t){"function"==typeof t?(s[e]={factory:t,deps:r.map(function(r){return function(e,r){if("."!==e[0])return e;var t=r.split("/"),n=e.split("/");t.pop();for(var o=0;o<n.length;o++)"."!=n[o]&&(".."==n[o]?t.pop():t.push(n[o]));return t.join("/")}(r,e)}),resolved:!1,exports:null},n(e)):s[e]={factory:null,resolved:!0,exports:t}},n=r.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var t=s[e];if(!t.resolved){var o=[];t.deps.forEach(function(e){o.push(n(e))}),t.exports=t.factory.apply(r,o)||null,t.resolved=!0}return t.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,r){e("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(e,r,t){"use strict";var n=Symbol?Symbol():"__pglisteners",o=Symbol?Symbol():"__pgnotifies",i=Array.prototype.slice,s=r.proxy,u=e.makeArray,a=t.result,l=t.mixin;l(Promise.prototype,{always:function(e){return this.then(e,e),this},done:function(){for(var e=0;e<arguments.length;e++)this.then(arguments[e]);return this},fail:function(e){return this.catch(e),this}});var c=function(){var e=this,r=this.promise=new Promise(function(r,t){e._resolve=r,e._reject=t});p(r,e),this[n]=[],this[o]=[]};function p(e,r){var t={state:function(){return r.isResolved()?"resolved":r.isRejected()?"rejected":"pending"},then:function(e,r,t){return t&&this.progress(t),p(Promise.prototype.then.call(this,e&&function(r){return r&&void 0!==r.__ctx__?e.apply(r.__ctx__,r):e(r)},r&&function(e){return e&&void 0!==e.__ctx__?r.apply(e.__ctx__,e):r(e)}))},progress:function(e){return r[o].forEach(function(r){e(r)}),r[n].push(e),this}};return t.pipe=t.then,l(e,t)}return c.prototype.resolve=function(e){var r=i.call(arguments);return this.resolveWith(null,r)},c.prototype.resolveWith=function(e,r){return(r=r?u(r):[]).__ctx__=e,this._resolve(r),this._resolved=!0,this},c.prototype.notify=function(e){try{return this[o].push(e),this[n].forEach(function(r){return r(e)})}catch(e){this.reject(e)}return this},c.prototype.reject=function(e){var r=i.call(arguments);return this.rejectWith(null,r)},c.prototype.rejectWith=function(e,r){return(r=r?u(r):[]).__ctx__=e,this._reject(r),this._rejected=!0,this},c.prototype.isResolved=function(){return!!this._resolved},c.prototype.isRejected=function(){return!!this._rejected},c.prototype.then=function(e,r,t){var n=a(this,"promise");return n.then(e,r,t)},c.prototype.progress=function(e){var r=a(this,"promise");return r.progress(e)},c.prototype.catch=function(e){var r=a(this,"promise");return r.catch(e)},c.prototype.done=function(){var e=a(this,"promise");return e.done.apply(e,arguments)},c.prototype.fail=function(e){var r=a(this,"promise");return r.fail(e)},c.all=function(e){var r=new c;return Promise.all(e).then(r.resolve.bind(r),r.reject.bind(r)),a(r,"promise")},c.first=function(e){return p(Promise.race(e))},c.when=function(e,r,t,n){var o=e&&"function"==typeof e.then,i=o&&e instanceof Promise;if(!o)return arguments.length>1?r?r(e):e:(new c).resolve(e);if(!i){var u=new c(e.cancel);e.then(s(u.resolve,u),s(u.reject,u),u.notify),e=u.promise}return r||t||n?e.then(r,t,n):e},c.reject=function(e){var r=new c;return r.reject(e),r.promise},c.immediate=c.resolve=function(e){var r=new c;return r.resolve.apply(r,arguments),r.promise},c}),e("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(e,r,t){var n=r.each,o={Deferred:t,parallel:function(e,r,o){var i=[];return o=o||null,r=r||[],n(e,function(e,t){i.push(t.apply(o,r))}),t.all(i)},series:function(e,r,o){var i=[],s=new t,u=s.promise;return o=o||null,r=r||[],s.resolve(),n(e,function(e,t){u=u.then(function(){return t.apply(o,r)}),i.push(u)}),t.all(i)},waterful:function(e,r,o){var i=new t,s=i.promise;return o=o||null,r=r||[],i.resolveWith(o,r),n(e,function(e,r){s=s.then(r)}),s}};return e.attach("langx.async",o)}),e("skylark-langx-async/main",["./async"],function(e){return e}),e("skylark-langx-async",["skylark-langx-async/main"],function(e){return e})}(t),!o){var u=n("skylark-langx/skylark");i?module.exports=u:r.skylarkjs=u}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-async.js.map
