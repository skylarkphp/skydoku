/**
 * skylark-langx-async - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(n,r){var t=r.define,require=r.require,e="function"==typeof t&&t.amd,i=!e&&"undefined"!=typeof exports;if(!e&&!t){var o={};t=r.define=function(n,r,t){"function"==typeof t?(o[n]={factory:t,deps:r.map(function(r){return function(n,r){if("."!==n[0])return n;var t=r.split("/"),e=n.split("/");t.pop();for(var i=0;i<e.length;i++)"."!=e[i]&&(".."==e[i]?t.pop():t.push(e[i]));return t.join("/")}(r,n)}),resolved:!1,exports:null},require(n)):o[n]={factory:null,resolved:!0,exports:t}},require=r.require=function(n){if(!o.hasOwnProperty(n))throw new Error("Module "+n+" has not been defined");var module=o[n];if(!module.resolved){var t=[];module.deps.forEach(function(n){t.push(require(n))}),module.exports=module.factory.apply(r,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(n,require){n("skylark-langx-ns/_attach",[],function(){return function(n,r,t){"string"==typeof r&&(r=r.split("."));for(var e=r.length,i=n,o=0,u=r[o++];o<e;)i=i[u]=i[u]||{},u=r[o++];return i[u]=t}}),n("skylark-langx-ns/ns",["./_attach"],function(n){var r={attach:function(t,e){return n(r,t,e)}};return r}),n("skylark-langx-ns/main",["./ns"],function(n){return n}),n("skylark-langx-ns",["skylark-langx-ns/main"],function(n){return n}),n("skylark-langx-types/types",["skylark-langx-ns"],function(n){var r,t=Array.isArray,e={}.toString,i=(r={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(n){r["[object "+n+"]"]=n.toLowerCase()}),function(n){return null==n?String(n):r[e.call(n)]||"object"}),o=t||function(n){return object&&object.constructor===Array};function u(n){var r;for(r in n)if(null!==n[r])return!1;return!0}function a(n){return"function"==i(n)}function s(n){return n&&n.nodeType}function l(n){return"number"==typeof n}function c(n){var r=typeof n;return"function"===r||"object"===r&&!!n}function f(n){return"string"==typeof n}function p(n){return n&&n==n.window}return n.attach("langx.types",{isArray:o,isArrayLike:function(n){return!f(n)&&!s(n)&&"number"==typeof n.length&&!a(n)},isBoolean:function(n){return!0===n||!1===n||"[object Boolean]"===e.call(n)},isDefined:function(n){return void 0!==n},isDocument:function(n){return null!=n&&n.nodeType==n.DOCUMENT_NODE},isElement:function(n){return!(!n||1!==n.nodeType)},isEmpty:u,isEmptyObject:u,isFunction:a,isHtmlNode:s,isNull:function(n){return null===n},isNumber:l,isNumeric:l,isObject:c,isPlainObject:function(n){return c(n)&&!p(n)&&Object.getPrototypeOf(n)==Object.prototype},isString:f,isSameOrigin:function(n){if(n){var r=location.protocol+"//"+location.hostname;return location.port&&(r+=":"+location.port),n.startsWith(r)}},isSymbol:function(n){return"symbol"==typeof n||isObjectLike(n)&&objectToString.call(n)==symbolTag},isUndefined:function(n){return void 0===n},isWindow:p,type:i})}),n("skylark-langx-types/main",["./types"],function(n){return n}),n("skylark-langx-types",["skylark-langx-types/main"],function(n){return n}),n("skylark-langx-numbers/numbers",["skylark-langx-ns","skylark-langx-types"],function(n,r){var t=r.isObject,e=r.isSymbol,i=1/0,o=1.7976931348623157e308,u=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;function p(n){if(!n)return 0===n?n:0;if((n=y(n))===i||n===-i){var r=n<0?-1:1;return r*o}return n==n?n:0}function y(n){if("number"==typeof n)return n;if(e(n))return u;if(t(n)){var r="function"==typeof n.valueOf?n.valueOf():n;n=t(r)?r+"":r}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(a,"");var i=l.test(n);return i||c.test(n)?f(n.slice(2),i?2:8):s.test(n)?u:+n}return n.attach("langx.numbers",{toFinite:p,toNumber:y,toInteger:function(n){var r=p(n),t=r%1;return r==r?t?r-t:r:0}})}),n("skylark-langx-numbers/main",["./numbers"],function(n){return n}),n("skylark-langx-numbers",["skylark-langx-numbers/main"],function(n){return n}),n("skylark-langx-objects/objects",["skylark-langx-ns/ns","skylark-langx-ns/_attach","skylark-langx-types","skylark-langx-numbers"],function(n,r,t,e){var i,o,u=Object.prototype.hasOwnProperty,a=Array.prototype.slice,s=t.isBoolean,l=t.isFunction,c=t.isObject,f=t.isPlainObject,p=t.isArray,y=t.isArrayLike,h=t.isString,v=e.toInteger;var g,k,m="undefined"!=typeof Symbol?Symbol.prototype:null;function d(n){if(!c(n))return[];var r=[];for(var t in n)r.push(t);return r}function x(n,r){if(!p(r))return null!=n&&u.call(n,r);for(var t=r.length,e=0;e<t;e++){var i=r[e];if(null==n||!u.call(n,i))return!1;n=n[i]}return!!t}function b(n,r,t,e){for(var i in r)e&&void 0!==n[i]||(t&&(f(r[i])||p(r[i]))?(f(r[i])&&!f(n[i])&&(n[i]={}),p(r[i])&&!p(n[i])&&(n[i]=[]),b(n[i],r[i],t,e)):void 0!==r[i]&&(n[i]=r[i]));return n}function j(n){var r=a.call(arguments,0),t=r.shift(),e=!1;return s(r[r.length-1])&&(e=r.pop()),{target:t,sources:r,deep:e}}function _(){var n=j.apply(this,arguments);return n.sources.forEach(function(r){b(n.target,r,n.deep,!1)}),n.target}function w(n){for(var r=d(n),t=r.length,e=Array(t),i=0;i<t;i++)e[i]=n[r[i]];return e}return i=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var i=typeof n;return("function"===i||"object"===i||"object"==typeof r)&&o(n,r,t,e)},o=function(n,r,t,e){var o=toString.call(n);if(o!==toString.call(r))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return m.valueOf.call(n)===m.valueOf.call(r)}var u="[object Array]"===o;if(!u){if("object"!=typeof n||"object"!=typeof r)return!1;var a=n.constructor,s=r.constructor;if(a!==s&&!(l(a)&&a instanceof a&&l(s)&&s instanceof s)&&"constructor"in n&&"constructor"in r)return!1}t=t||[],e=e||[];for(var c=t.length;c--;)if(t[c]===n)return e[c]===r;if(t.push(n),e.push(r),u){if((c=n.length)!==r.length)return!1;for(;c--;)if(!i(n[c],r[c],t,e))return!1}else{var f,p=Object.keys(n);if(c=p.length,Object.keys(r).length!==c)return!1;for(;c--;)if(f=p[c],void 0===r[f]||!i(n[f],r[f],t,e))return!1}return t.pop(),e.pop(),!0},n.attach("langx.objects",{allKeys:d,attach:r,clone:function n(r,t){var e;if(void 0===r||null===r)e=r;else if(t&&r.clone)e=r.clone();else if(p(r)){e=[];for(var i=0;i<r.length;i++)e.push(n(r[i]))}else if(f(r))for(var o in e={},r)e[o]=n(r[o]);else e=r;return e},defaults:(g=d,k=!0,function(n){var r=arguments.length;if(k&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],i=g(e),o=i.length,u=0;u<o;u++){var a=i[u];k&&void 0!==n[a]||(n[a]=e[a])}return n}),each:function(n,r){var t,e,i,o;if(n)if(void 0===(t=n.length)){for(e in n)if(n.hasOwnProperty(e)&&(o=n[e],!1===r.call(o,e,o)))break}else for(i=0;i<t&&(o=n[i],!1!==r.call(o,i,o));i++);return this},extend:function(n){var r,t=a.call(arguments,1);"boolean"==typeof n&&(r=n,n=t.shift());0==t.length&&(t=[n],n=this);return t.forEach(function(t){_(n,t,r)}),n},has:x,isEqual:function(n,r){return i(n,r)},includes:function(n,r,t,e){n=y(n)?n:w(n),t=t&&!e?v(t):0;var i=n.length;t<0&&(t=nativeMax(i+t,0));return h(n)?t<=i&&n.indexOf(r,t)>-1:!!i&&baseIndexOf(n,r,t)>-1},isMatch:function(n,r){var t=t(r),e=t.length;if(null==n)return!e;for(var i=Object(n),o=0;o<e;o++){var u=t[o];if(r[u]!==i[u]||!(u in i))return!1}return!0},keys:function(n){if(c(n))return[];var r=[];for(var t in n)x(n,t)&&r.push(t);return r},mixin:_,omit:function(n,r,t){if(!n)return null;for(var e=_({},n),i=1;i<arguments.length;i++){var o=arguments[i];o in n&&delete e[o]}return e},pick:function(n,r,t){if(!n)return null;for(var e={},i=1;i<arguments.length;i++){var o=arguments[i];o in n&&(e[o]=n[o])}return e},removeItem:function(n,r){if(p(n)){var t=n.indexOf(r);-1!=t&&n.splice(t,1)}else if(f(n))for(var e in n)if(n[e]==r){delete n[e];break}return this},result:function(n,r,t){p(r)||(r=r.split("."));var e=r.length;if(!e)return l(t)?t.call(n):t;for(var i=0;i<e;i++){var o=null==n?void 0:n[r[i]];void 0===o&&(o=t,i=e),n=l(o)?o.call(n):o}return n},safeMixin:function(){var n=j.apply(this,arguments);return n.sources.forEach(function(r){b(n.target,r,n.deep,!0)}),n.target},values:w})}),n("skylark-langx-objects/main",["./objects"],function(n){return n}),n("skylark-langx-objects",["skylark-langx-objects/main"],function(n){return n}),n("skylark-langx-arrays/arrays",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects"],function(n,r,t){var e=Array.prototype.filter,i=Array.prototype.find,o=r.isArrayLike;function u(n,r,t,e){for(var i=n.length,o=t+(e?1:-1);e?o--:++o<i;)if(r(n[o],o,n))return o;return-1}function a(n){return n!=n}function s(n){if(o(n)){for(var r=[],t=0;t<n.length;t++){var e=n[t];if(o(e))for(var i=0;i<e.length;i++)r.push(e[i]);else r.push(e)}return r}return n}return n.attach("langx.arrays",{baseFindIndex:u,baseIndexOf:function(n,r,t){if(r!=r)return u(n,a,t);var e=t-1,i=n.length;for(;++e<i;)if(n[e]===r)return e;return-1},compact:function(n){return e.call(n,function(n){return null!=n})},first:function(n,r){return r?n.slice(0,r):n[0]},filter:function(n,r){return e.call(n,r)},find:function(n,r){return i.call(n,r)},flatten:s,grep:function(n,r){var e=[];return t.each(n,function(n,t){r(t,n)&&e.push(t)}),e},inArray:function(n,r){if(!r)return-1;var t;if(r.indexOf)return r.indexOf(n);t=r.length;for(;t--;)if(r[t]===n)return t;return-1},makeArray:function(n,r,t){if(o(n))return(t||[]).concat(Array.prototype.slice.call(n,r||0));return[n]},merge:function(n,r){var t=r.length,e=n.length,i=0;if("number"==typeof t)for(;i<t;i++)n[e++]=r[i];else for(;void 0!==r[i];)n[e++]=r[i++];return n.length=e,n},forEach:function(n,r){if(n.forEach)return n.forEach(r);for(var t=0;t<n.length;t++)r(n[t],t)},map:function(n,r){var t,e,i,u=[];if(o(n))for(e=0;e<n.length;e++)null!=(t=r.call(n[e],n[e],e))&&u.push(t);else for(i in n)null!=(t=r.call(n[i],n[i],i))&&u.push(t);return s(u)},reduce:function(n,r,t){return Array.prototype.reduce.call(n,r,t)},uniq:function(n){return e.call(n,function(r,t){return n.indexOf(r)==t})}})}),n("skylark-langx-arrays/main",["./arrays"],function(n){return n}),n("skylark-langx-arrays",["skylark-langx-arrays/main"],function(n){return n}),n("skylark-langx-funcs/funcs",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects"],function(n,r,t){var e=t.mixin,i=Array.prototype.slice,o=r.isFunction,u=r.isString;function a(n,r){var t=2 in arguments&&i.call(arguments,2);if(o(n)){return function(){return n.apply(r,t?t.concat(i.call(arguments)):arguments)}}if(u(r))return t?(t.unshift(n[r],n),a.apply(null,t)):a(n[r],n);throw new TypeError("expected function")}var s=function(){function n(){}return function(r,t){n.prototype=r;var i=new n;return n.prototype=null,t&&e(i,t),i}}(),l={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},c=/(.)^/,f={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},p=/\\|'|\r|\n|\t|\u2028|\u2029/g;return n.attach("langx.funcs",{bind:a,debounce:function(n,r){var t;return function(){var e=this,i=arguments;t&&clearTimeout(t),t=setTimeout(function(){t=null,n.apply(e,i)},r)}},delegate:s,defer:function(n){requestAnimationFrame?requestAnimationFrame(n):setTimeoutout(n);return this},negate:function(n){if("function"!=typeof n)throw new TypeError("Expected a function");return function(...r){return!n.apply(this,r)}},noop:function(){},proxy:a,returnTrue:function(){return!0},returnFalse:function(){return!1},templateSettings:l,template:function(n,r,e){var i;e=t.defaults({},e,l);var o=RegExp([(e.escape||c).source,(e.interpolate||c).source,(e.evaluate||c).source].join("|")+"|$","g"),u=0,s="__p+='";n.replace(o,function(r,t,e,i,o){return s+=n.slice(u,o).replace(p,function(n){return"\\"+f[n]}),t&&(s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),e&&(s+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),u=o+r.length,r}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n");s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(e.variable||"obj","_",s)}catch(n){throw n.source=s,n}if(r)return i(r,this);var y=a(function(n){return i.call(this,n,this)},this),h=e.variable||"obj";return y.source="function("+h+"){\n"+s+"}",y}})}),n("skylark-langx-funcs/main",["./funcs"],function(n){return n}),n("skylark-langx-funcs",["skylark-langx-funcs/main"],function(n){return n}),n("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(n,r,t){"use strict";var e=Array.prototype.slice,i=r.proxy,o=n.makeArray,u=t.result,a=t.mixin;a(Promise.prototype,{always:function(n){return this.then(n,n),this},done:function(){for(var n=0;n<arguments.length;n++)this.then(arguments[n]);return this},fail:function(n){return this.catch(n),this}});var s=function(){var n=this;this.promise=l(new Promise(function(r,t){n._resolve=r,n._reject=t}))};function l(n){if(n.isResolved)return n;var r=!0,t=!1,e=!1,i=n.then(function(n){return e=!0,r=!1,n},function(n){throw t=!0,r=!1,n});i.isResolved=function(){return e},i.isPending=function(){return r},i.isRejected=function(){return t},i.state=function(){return e?"resolved":t?"rejected":"pending"};var o=[],u=[];return i.then=function(n,r,t){return t&&this.progress(t),l(Promise.prototype.then.call(this,n&&function(r){return r&&void 0!==r.__ctx__?n.apply(r.__ctx__,r):n(r)},r&&function(n){return n&&void 0!==n.__ctx__?r.apply(n.__ctx__,n):r(n)}))},i.progress=function(n){return o.forEach(function(r){n(r)}),u.push(n),this},i.pipe=i.then,i.notify=function(n){try{return o.push(n),u.forEach(function(r){return r(n)})}catch(n){this.reject(n)}return this},i}return s.prototype.resolve=function(n){var r=e.call(arguments);return this.resolveWith(null,r)},s.prototype.resolveWith=function(n,r){return(r=r?o(r):[]).__ctx__=n,this._resolve(r),this._resolved=!0,this},s.prototype.notify=function(n){var r=u(this,"promise");return r.notify(n),this},s.prototype.reject=function(n){var r=e.call(arguments);return this.rejectWith(null,r)},s.prototype.rejectWith=function(n,r){return(r=r?o(r):[]).__ctx__=n,this._reject(r),this._rejected=!0,this},s.prototype.isResolved=function(){var n=u(this,"promise");return n.isResolved()},s.prototype.isRejected=function(){var n=u(this,"promise");return n.isRejected()},s.prototype.state=function(){var n=u(this,"promise");return n.state()},s.prototype.then=function(n,r,t){var e=u(this,"promise");return e.then(n,r,t)},s.prototype.progress=function(n){var r=u(this,"promise");return r.progress(n)},s.prototype.catch=function(n){var r=u(this,"promise");return r.catch(n)},s.prototype.always=function(){var n=u(this,"promise");return n.always.apply(n,arguments),this},s.prototype.done=function(){var n=u(this,"promise");return n.done.apply(n,arguments),this},s.prototype.fail=function(n){var r=u(this,"promise");return r.fail(n),this},s.all=function(n){var r=new s;return Promise.all(n).then(r.resolve.bind(r),r.reject.bind(r)),u(r,"promise")},s.first=function(n){return l(Promise.race(n))},s.when=function(n,r,t,e){var o=n&&"function"==typeof n.then,u=o&&n instanceof Promise;if(!o)return arguments.length>1?r?r(n):n:(new s).resolve(n);if(!u){var a=new s(n.cancel);n.then(i(a.resolve,a),i(a.reject,a),a.notify),n=a.promise}return r||t||e?n.then(r,t,e):n},s.reject=function(n){var r=new s;return r.reject(n),r.promise},s.immediate=s.resolve=function(n){var r=new s;return r.resolve.apply(r,arguments),r.promise},s.promise=function(n){var r=new s;return n(r.resolve.bind(r),r.reject.bind(r),r.progress.bind(r)),r.promise},s}),n("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(n,r,t){var e=r.each,i={Deferred:t,parallel:function(n,r,i){var o=[];return i=i||null,r=r||[],e(n,function(n,t){o.push(t.apply(i,r))}),t.all(o)},series:function(n,r,i){var o=[],u=new t,a=u.promise;return i=i||null,r=r||[],u.resolve(),e(n,function(n,t){a=a.then(function(){return t.apply(i,r)}),o.push(a)}),t.all(o)},waterful:function(n,r,i){var o=new t,u=o.promise;return i=i||null,r=r||[],o.resolveWith(i,r),e(n,function(n,r){u=u.then(r)}),u}};return n.attach("langx.async",i)}),n("skylark-langx-async/main",["./async"],function(n){return n}),n("skylark-langx-async",["skylark-langx-async/main"],function(n){return n})}(t),!e){var u=require("skylark-langx/skylark");i?module.exports=u:r.skylarkjs=u}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-async-all.js.map
