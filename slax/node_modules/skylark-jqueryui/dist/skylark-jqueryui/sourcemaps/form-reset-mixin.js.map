{"version":3,"sources":["form-reset-mixin.js"],"names":["define","$","ui","formResetMixin","_formResetHandler","form","this","setTimeout","instances","data","each","refresh","_bindFormResetHandler","element","_form","length","on","push","_unbindFormResetHandler","splice","inArray","removeData","off"],"mappings":";;;;;;;AAAAA,QACC,iBACA,SACA,aACE,SAAUC,GAEb,OAAOA,EAAEC,GAAGC,gBACXC,kBAAmB,WAClB,IAAIC,EAAOJ,EAAGK,MAGdC,WAAY,WACX,IAAIC,EAAYH,EAAKI,KAAM,2BAC3BR,EAAES,KAAMF,EAAW,WAClBF,KAAKK,eAKRC,sBAAuB,WAEtB,GADAN,KAAKD,KAAOC,KAAKO,QAAQC,QACnBR,KAAKD,KAAKU,OAAhB,CAIA,IAAIP,EAAYF,KAAKD,KAAKI,KAAM,+BAC1BD,EAAUO,QAGfT,KAAKD,KAAKW,GAAI,sBAAuBV,KAAKF,mBAE3CI,EAAUS,KAAMX,MAChBA,KAAKD,KAAKI,KAAM,0BAA2BD,KAG5CU,wBAAyB,WACxB,GAAMZ,KAAKD,KAAKU,OAAhB,CAIA,IAAIP,EAAYF,KAAKD,KAAKI,KAAM,2BAChCD,EAAUW,OAAQlB,EAAEmB,QAASd,KAAME,GAAa,GAC3CA,EAAUO,OACdT,KAAKD,KAAKI,KAAM,0BAA2BD,GAE3CF,KAAKD,KACHgB,WAAY,2BACZC,IAAK","file":"../form-reset-mixin.js","sourcesContent":["define( [\r\n\t\"skylark-jquery\",\r\n\t\"./form\",\r\n\t\"./version\"\r\n], function( $ ) {\r\n\r\nreturn $.ui.formResetMixin = {\r\n\t_formResetHandler: function() {\r\n\t\tvar form = $( this );\r\n\r\n\t\t// Wait for the form reset to actually happen before refreshing\r\n\t\tsetTimeout( function() {\r\n\t\t\tvar instances = form.data( \"ui-form-reset-instances\" );\r\n\t\t\t$.each( instances, function() {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t} );\r\n\t\t} );\r\n\t},\r\n\r\n\t_bindFormResetHandler: function() {\r\n\t\tthis.form = this.element._form();\r\n\t\tif ( !this.form.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" ) || [];\r\n\t\tif ( !instances.length ) {\r\n\r\n\t\t\t// We don't use _on() here because we use a single event handler per form\r\n\t\t\tthis.form.on( \"reset.ui-form-reset\", this._formResetHandler );\r\n\t\t}\r\n\t\tinstances.push( this );\r\n\t\tthis.form.data( \"ui-form-reset-instances\", instances );\r\n\t},\r\n\r\n\t_unbindFormResetHandler: function() {\r\n\t\tif ( !this.form.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" );\r\n\t\tinstances.splice( $.inArray( this, instances ), 1 );\r\n\t\tif ( instances.length ) {\r\n\t\t\tthis.form.data( \"ui-form-reset-instances\", instances );\r\n\t\t} else {\r\n\t\t\tthis.form\r\n\t\t\t\t.removeData( \"ui-form-reset-instances\" )\r\n\t\t\t\t.off( \"reset.ui-form-reset\" );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n});\r\n"]}