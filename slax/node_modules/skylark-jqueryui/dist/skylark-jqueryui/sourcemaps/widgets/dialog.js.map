{"version":3,"sources":["widgets/dialog.js"],"names":["define","$","widget","version","options","appendTo","autoOpen","buttons","classes","ui-dialog","ui-dialog-titlebar","closeOnEscape","closeText","draggable","hide","height","maxHeight","maxWidth","minHeight","minWidth","modal","position","my","at","of","window","collision","using","pos","topOffset","this","css","offset","top","resizable","show","title","width","beforeClose","close","drag","dragStart","dragStop","focus","open","resize","resizeStart","resizeStop","sizeRelatedOptions","resizableRelatedOptions","_create","originalCss","display","element","style","originalPosition","parent","index","children","originalTitle","attr","disabled","_createWrapper","removeAttr","uiDialog","_addClass","_createTitlebar","_createButtonPane","fn","_makeDraggable","_makeResizable","_isOpen","_trackFocus","_init","_appendTo","jquery","nodeType","document","find","eq","_destroy","next","_untrackInstance","_destroyOverlay","removeUniqueId","detach","remove","length","before","append","disable","noop","enable","event","that","_trigger","_focusedElement","opener","filter","trigger","ui","safeBlur","safeActiveElement","_hide","isOpen","moveToTop","_moveToTop","silent","moved","zIndices","siblings","map","get","zIndexMax","Math","max","apply","_focusTabbable","_size","_position","_createOverlay","overlay","_show","_makeFocusTarget","hasFocus","uiDialogButtonPane","uiDialogTitlebarClose","_keepFocus","checkFocus","activeElement","contains","preventDefault","call","_delay","tabIndex","role","_on","keydown","isDefaultPrevented","keyCode","ESCAPE","TAB","tabbables","first","last","target","shiftKey","mousedown","aria-describedby","uniqueId","uiDialogTitle","uiDialogTitlebar","closest","button","label","text","html","icon","showLabel","click","prependTo","_title","aria-labelledby","uiButtonSet","_createButtons","empty","isEmptyObject","isArray","_removeClass","each","name","props","buttonOptions","isFunction","extend","type","iconPosition","icons","on","arguments","filteredUi","cancel","handle","containment","start","_blockFrames","stop","left","scrollLeft","scrollTop","_unblockFrames","handles","resizeHandles","originalSize","size","alsoResize","_minHeight","focusin","_trackingInstances","unshift","instances","exists","inArray","splice","data","min","isVisible","is","_setOptions","resizableOptions","key","value","_setOption","isDraggable","isResizable","_super","nonContentHeight","minContentHeight","maxContentHeight","outerHeight","iframeBlocks","iframe","outerWidth","_allowInteraction","isOpening","instance","bind","overlays","off","removeData","uiBackCompat","dialog","dialogClass","addClass","removeClass","_superApply"],"mappings":"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","file":"../../widgets/dialog.js","sourcesContent":["/*!\r\n * jQuery UI Dialog @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\n//>>label: Dialog\r\n//>>group: Widgets\r\n//>>description: Displays customizable dialog windows.\r\n//>>docs: http://api.jqueryui.com/dialog/\r\n//>>demos: http://jqueryui.com/dialog/\r\n//>>css.structure: ../../themes/base/core.css\r\n//>>css.structure: ../../themes/base/dialog.css\r\n//>>css.theme: ../../themes/base/theme.css\r\n\r\ndefine( [\r\n\t\"skylark-jquery\",\r\n\t\"./button\",\r\n\t\"./draggable\",\r\n\t\"./mouse\",\r\n\t\"./resizable\",\r\n\t\"../focusable\",\r\n\t\"../keycode\",\r\n\t\"../position\",\r\n\t\"../safe-active-element\",\r\n\t\"../safe-blur\",\r\n\t\"../tabbable\",\r\n\t\"../unique-id\",\r\n\t\"../version\",\r\n\t\"../widget\"\r\n],function( $ ) {\r\n\r\n$.widget( \"ui.dialog\", {\r\n\tversion: \"@VERSION\",\r\n\toptions: {\r\n\t\tappendTo: \"body\",\r\n\t\tautoOpen: true,\r\n\t\tbuttons: [],\r\n\t\tclasses: {\r\n\t\t\t\"ui-dialog\": \"ui-corner-all\",\r\n\t\t\t\"ui-dialog-titlebar\": \"ui-corner-all\"\r\n\t\t},\r\n\t\tcloseOnEscape: true,\r\n\t\tcloseText: \"Close\",\r\n\t\tdraggable: true,\r\n\t\thide: null,\r\n\t\theight: \"auto\",\r\n\t\tmaxHeight: null,\r\n\t\tmaxWidth: null,\r\n\t\tminHeight: 150,\r\n\t\tminWidth: 150,\r\n\t\tmodal: false,\r\n\t\tposition: {\r\n\t\t\tmy: \"center\",\r\n\t\t\tat: \"center\",\r\n\t\t\tof: window,\r\n\t\t\tcollision: \"fit\",\r\n\r\n\t\t\t// Ensure the titlebar is always visible\r\n\t\t\tusing: function( pos ) {\r\n\t\t\t\tvar topOffset = $( this ).css( pos ).offset().top;\r\n\t\t\t\tif ( topOffset < 0 ) {\r\n\t\t\t\t\t$( this ).css( \"top\", pos.top - topOffset );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresizable: true,\r\n\t\tshow: null,\r\n\t\ttitle: null,\r\n\t\twidth: 300,\r\n\r\n\t\t// Callbacks\r\n\t\tbeforeClose: null,\r\n\t\tclose: null,\r\n\t\tdrag: null,\r\n\t\tdragStart: null,\r\n\t\tdragStop: null,\r\n\t\tfocus: null,\r\n\t\topen: null,\r\n\t\tresize: null,\r\n\t\tresizeStart: null,\r\n\t\tresizeStop: null\r\n\t},\r\n\r\n\tsizeRelatedOptions: {\r\n\t\tbuttons: true,\r\n\t\theight: true,\r\n\t\tmaxHeight: true,\r\n\t\tmaxWidth: true,\r\n\t\tminHeight: true,\r\n\t\tminWidth: true,\r\n\t\twidth: true\r\n\t},\r\n\r\n\tresizableRelatedOptions: {\r\n\t\tmaxHeight: true,\r\n\t\tmaxWidth: true,\r\n\t\tminHeight: true,\r\n\t\tminWidth: true\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis.originalCss = {\r\n\t\t\tdisplay: this.element[ 0 ].style.display,\r\n\t\t\twidth: this.element[ 0 ].style.width,\r\n\t\t\tminHeight: this.element[ 0 ].style.minHeight,\r\n\t\t\tmaxHeight: this.element[ 0 ].style.maxHeight,\r\n\t\t\theight: this.element[ 0 ].style.height\r\n\t\t};\r\n\t\tthis.originalPosition = {\r\n\t\t\tparent: this.element.parent(),\r\n\t\t\tindex: this.element.parent().children().index( this.element )\r\n\t\t};\r\n\t\tthis.originalTitle = this.element.attr( \"title\" );\r\n\t\tif ( this.options.title == null && this.originalTitle != null ) {\r\n\t\t\tthis.options.title = this.originalTitle;\r\n\t\t}\r\n\r\n\t\t// Dialogs can't be disabled\r\n\t\tif ( this.options.disabled ) {\r\n\t\t\tthis.options.disabled = false;\r\n\t\t}\r\n\r\n\t\tthis._createWrapper();\r\n\r\n\t\tthis.element\r\n\t\t\t.show()\r\n\t\t\t.removeAttr( \"title\" )\r\n\t\t\t.appendTo( this.uiDialog );\r\n\r\n\t\tthis._addClass( \"ui-dialog-content\", \"ui-widget-content\" );\r\n\r\n\t\tthis._createTitlebar();\r\n\t\tthis._createButtonPane();\r\n\r\n\t\tif ( this.options.draggable && $.fn.draggable ) {\r\n\t\t\tthis._makeDraggable();\r\n\t\t}\r\n\t\tif ( this.options.resizable && $.fn.resizable ) {\r\n\t\t\tthis._makeResizable();\r\n\t\t}\r\n\r\n\t\tthis._isOpen = false;\r\n\r\n\t\tthis._trackFocus();\r\n\t},\r\n\r\n\t_init: function() {\r\n\t\tif ( this.options.autoOpen ) {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t},\r\n\r\n\t_appendTo: function() {\r\n\t\tvar element = this.options.appendTo;\r\n\t\tif ( element && ( element.jquery || element.nodeType ) ) {\r\n\t\t\treturn $( element );\r\n\t\t}\r\n\t\treturn this.document.find( element || \"body\" ).eq( 0 );\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar next,\r\n\t\t\toriginalPosition = this.originalPosition;\r\n\r\n\t\tthis._untrackInstance();\r\n\t\tthis._destroyOverlay();\r\n\r\n\t\tthis.element\r\n\t\t\t.removeUniqueId()\r\n\t\t\t.css( this.originalCss )\r\n\r\n\t\t\t// Without detaching first, the following becomes really slow\r\n\t\t\t.detach();\r\n\r\n\t\tthis.uiDialog.remove();\r\n\r\n\t\tif ( this.originalTitle ) {\r\n\t\t\tthis.element.attr( \"title\", this.originalTitle );\r\n\t\t}\r\n\r\n\t\tnext = originalPosition.parent.children().eq( originalPosition.index );\r\n\r\n\t\t// Don't try to place the dialog next to itself (#8613)\r\n\t\tif ( next.length && next[ 0 ] !== this.element[ 0 ] ) {\r\n\t\t\tnext.before( this.element );\r\n\t\t} else {\r\n\t\t\toriginalPosition.parent.append( this.element );\r\n\t\t}\r\n\t},\r\n\r\n\twidget: function() {\r\n\t\treturn this.uiDialog;\r\n\t},\r\n\r\n\tdisable: $.noop,\r\n\tenable: $.noop,\r\n\r\n\tclose: function( event ) {\r\n\t\tvar that = this;\r\n\r\n\t\tif ( !this._isOpen || this._trigger( \"beforeClose\", event ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isOpen = false;\r\n\t\tthis._focusedElement = null;\r\n\t\tthis._destroyOverlay();\r\n\t\tthis._untrackInstance();\r\n\r\n\t\tif ( !this.opener.filter( \":focusable\" ).trigger( \"focus\" ).length ) {\r\n\r\n\t\t\t// Hiding a focused element doesn't trigger blur in WebKit\r\n\t\t\t// so in case we have nothing to focus on, explicitly blur the active element\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=47182\r\n\t\t\t$.ui.safeBlur( $.ui.safeActiveElement( this.document[ 0 ] ) );\r\n\t\t}\r\n\r\n\t\tthis._hide( this.uiDialog, this.options.hide, function() {\r\n\t\t\tthat._trigger( \"close\", event );\r\n\t\t} );\r\n\t},\r\n\r\n\tisOpen: function() {\r\n\t\treturn this._isOpen;\r\n\t},\r\n\r\n\tmoveToTop: function() {\r\n\t\tthis._moveToTop();\r\n\t},\r\n\r\n\t_moveToTop: function( event, silent ) {\r\n\t\tvar moved = false,\r\n\t\t\tzIndices = this.uiDialog.siblings( \".ui-front:visible\" ).map( function() {\r\n\t\t\t\treturn +$( this ).css( \"z-index\" );\r\n\t\t\t} ).get(),\r\n\t\t\tzIndexMax = Math.max.apply( null, zIndices );\r\n\r\n\t\tif ( zIndexMax >= +this.uiDialog.css( \"z-index\" ) ) {\r\n\t\t\tthis.uiDialog.css( \"z-index\", zIndexMax + 1 );\r\n\t\t\tmoved = true;\r\n\t\t}\r\n\r\n\t\tif ( moved && !silent ) {\r\n\t\t\tthis._trigger( \"focus\", event );\r\n\t\t}\r\n\t\treturn moved;\r\n\t},\r\n\r\n\topen: function() {\r\n\t\tvar that = this;\r\n\t\tif ( this._isOpen ) {\r\n\t\t\tif ( this._moveToTop() ) {\r\n\t\t\t\tthis._focusTabbable();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isOpen = true;\r\n\t\tthis.opener = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\r\n\r\n\t\tthis._size();\r\n\t\tthis._position();\r\n\t\tthis._createOverlay();\r\n\t\tthis._moveToTop( null, true );\r\n\r\n\t\t// Ensure the overlay is moved to the top with the dialog, but only when\r\n\t\t// opening. The overlay shouldn't move after the dialog is open so that\r\n\t\t// modeless dialogs opened after the modal dialog stack properly.\r\n\t\tif ( this.overlay ) {\r\n\t\t\tthis.overlay.css( \"z-index\", this.uiDialog.css( \"z-index\" ) - 1 );\r\n\t\t}\r\n\r\n\t\tthis._show( this.uiDialog, this.options.show, function() {\r\n\t\t\tthat._focusTabbable();\r\n\t\t\tthat._trigger( \"focus\" );\r\n\t\t} );\r\n\r\n\t\t// Track the dialog immediately upon opening in case a focus event\r\n\t\t// somehow occurs outside of the dialog before an element inside the\r\n\t\t// dialog is focused (#10152)\r\n\t\tthis._makeFocusTarget();\r\n\r\n\t\tthis._trigger( \"open\" );\r\n\t},\r\n\r\n\t_focusTabbable: function() {\r\n\r\n\t\t// Set focus to the first match:\r\n\t\t// 1. An element that was focused previously\r\n\t\t// 2. First element inside the dialog matching [autofocus]\r\n\t\t// 3. Tabbable element inside the content element\r\n\t\t// 4. Tabbable element inside the buttonpane\r\n\t\t// 5. The close button\r\n\t\t// 6. The dialog itself\r\n\t\tvar hasFocus = this._focusedElement;\r\n\t\tif ( !hasFocus ) {\r\n\t\t\thasFocus = this.element.find( \"[autofocus]\" );\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.element.find( \":tabbable\" );\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialogButtonPane.find( \":tabbable\" );\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialogTitlebarClose.filter( \":tabbable\" );\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialog;\r\n\t\t}\r\n\t\thasFocus.eq( 0 ).trigger( \"focus\" );\r\n\t},\r\n\r\n\t_keepFocus: function( event ) {\r\n\t\tfunction checkFocus() {\r\n\t\t\tvar activeElement = $.ui.safeActiveElement( this.document[ 0 ] ),\r\n\t\t\t\tisActive = this.uiDialog[ 0 ] === activeElement ||\r\n\t\t\t\t\t$.contains( this.uiDialog[ 0 ], activeElement );\r\n\t\t\tif ( !isActive ) {\r\n\t\t\t\tthis._focusTabbable();\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.preventDefault();\r\n\t\tcheckFocus.call( this );\r\n\r\n\t\t// support: IE\r\n\t\t// IE <= 8 doesn't prevent moving focus even with event.preventDefault()\r\n\t\t// so we check again later\r\n\t\tthis._delay( checkFocus );\r\n\t},\r\n\r\n\t_createWrapper: function() {\r\n\t\tthis.uiDialog = $( \"<div>\" )\r\n\t\t\t.hide()\r\n\t\t\t.attr( {\r\n\r\n\t\t\t\t// Setting tabIndex makes the div focusable\r\n\t\t\t\ttabIndex: -1,\r\n\t\t\t\trole: \"dialog\"\r\n\t\t\t} )\r\n\t\t\t.appendTo( this._appendTo() );\r\n\r\n\t\tthis._addClass( this.uiDialog, \"ui-dialog\", \"ui-widget ui-widget-content ui-front\" );\r\n\t\tthis._on( this.uiDialog, {\r\n\t\t\tkeydown: function( event ) {\r\n\t\t\t\tif ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\r\n\t\t\t\t\t\tevent.keyCode === $.ui.keyCode.ESCAPE ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tthis.close( event );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent tabbing out of dialogs\r\n\t\t\t\tif ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar tabbables = this.uiDialog.find( \":tabbable\" ),\r\n\t\t\t\t\tfirst = tabbables.filter( \":first\" ),\r\n\t\t\t\t\tlast = tabbables.filter( \":last\" );\r\n\r\n\t\t\t\tif ( ( event.target === last[ 0 ] || event.target === this.uiDialog[ 0 ] ) &&\r\n\t\t\t\t\t\t!event.shiftKey ) {\r\n\t\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\t\tfirst.trigger( \"focus\" );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t} else if ( ( event.target === first[ 0 ] ||\r\n\t\t\t\t\t\tevent.target === this.uiDialog[ 0 ] ) && event.shiftKey ) {\r\n\t\t\t\t\tthis._delay( function() {\r\n\t\t\t\t\t\tlast.trigger( \"focus\" );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmousedown: function( event ) {\r\n\t\t\t\tif ( this._moveToTop( event ) ) {\r\n\t\t\t\t\tthis._focusTabbable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// We assume that any existing aria-describedby attribute means\r\n\t\t// that the dialog content is marked up properly\r\n\t\t// otherwise we brute force the content as the description\r\n\t\tif ( !this.element.find( \"[aria-describedby]\" ).length ) {\r\n\t\t\tthis.uiDialog.attr( {\r\n\t\t\t\t\"aria-describedby\": this.element.uniqueId().attr( \"id\" )\r\n\t\t\t} );\r\n\t\t}\r\n\t},\r\n\r\n\t_createTitlebar: function() {\r\n\t\tvar uiDialogTitle;\r\n\r\n\t\tthis.uiDialogTitlebar = $( \"<div>\" );\r\n\t\tthis._addClass( this.uiDialogTitlebar,\r\n\t\t\t\"ui-dialog-titlebar\", \"ui-widget-header ui-helper-clearfix\" );\r\n\t\tthis._on( this.uiDialogTitlebar, {\r\n\t\t\tmousedown: function( event ) {\r\n\r\n\t\t\t\t// Don't prevent click on close button (#8838)\r\n\t\t\t\t// Focusing a dialog that is partially scrolled out of view\r\n\t\t\t\t// causes the browser to scroll it into view, preventing the click event\r\n\t\t\t\tif ( !$( event.target ).closest( \".ui-dialog-titlebar-close\" ) ) {\r\n\r\n\t\t\t\t\t// Dialog isn't getting focus when dragging (#8063)\r\n\t\t\t\t\tthis.uiDialog.trigger( \"focus\" );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Support: IE\r\n\t\t// Use type=\"button\" to prevent enter keypresses in textboxes from closing the\r\n\t\t// dialog in IE (#9312)\r\n\t\tthis.uiDialogTitlebarClose = $( \"<button type='button'></button>\" )\r\n\t\t\t.button( {\r\n\t\t\t\tlabel: $( \"<a>\" ).text( this.options.closeText ).html(),\r\n\t\t\t\ticon: \"ui-icon-closethick\",\r\n\t\t\t\tshowLabel: false\r\n\t\t\t} )\r\n\t\t\t.appendTo( this.uiDialogTitlebar );\r\n\r\n\t\tthis._addClass( this.uiDialogTitlebarClose, \"ui-dialog-titlebar-close\" );\r\n\t\tthis._on( this.uiDialogTitlebarClose, {\r\n\t\t\tclick: function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.close( event );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tuiDialogTitle = $( \"<span>\" ).uniqueId().prependTo( this.uiDialogTitlebar );\r\n\t\tthis._addClass( uiDialogTitle, \"ui-dialog-title\" );\r\n\t\tthis._title( uiDialogTitle );\r\n\r\n\t\tthis.uiDialogTitlebar.prependTo( this.uiDialog );\r\n\r\n\t\tthis.uiDialog.attr( {\r\n\t\t\t\"aria-labelledby\": uiDialogTitle.attr( \"id\" )\r\n\t\t} );\r\n\t},\r\n\r\n\t_title: function( title ) {\r\n\t\tif ( this.options.title ) {\r\n\t\t\ttitle.text( this.options.title );\r\n\t\t} else {\r\n\t\t\ttitle.html( \"&#160;\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_createButtonPane: function() {\r\n\t\tthis.uiDialogButtonPane = $( \"<div>\" );\r\n\t\tthis._addClass( this.uiDialogButtonPane, \"ui-dialog-buttonpane\",\r\n\t\t\t\"ui-widget-content ui-helper-clearfix\" );\r\n\r\n\t\tthis.uiButtonSet = $( \"<div>\" )\r\n\t\t\t.appendTo( this.uiDialogButtonPane );\r\n\t\tthis._addClass( this.uiButtonSet, \"ui-dialog-buttonset\" );\r\n\r\n\t\tthis._createButtons();\r\n\t},\r\n\r\n\t_createButtons: function() {\r\n\t\tvar that = this,\r\n\t\t\tbuttons = this.options.buttons;\r\n\r\n\t\t// If we already have a button pane, remove it\r\n\t\tthis.uiDialogButtonPane.remove();\r\n\t\tthis.uiButtonSet.empty();\r\n\r\n\t\tif ( $.isEmptyObject( buttons ) || ( $.isArray( buttons ) && !buttons.length ) ) {\r\n\t\t\tthis._removeClass( this.uiDialog, \"ui-dialog-buttons\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$.each( buttons, function( name, props ) {\r\n\t\t\tvar click, buttonOptions;\r\n\t\t\tprops = $.isFunction( props ) ?\r\n\t\t\t\t{ click: props, text: name } :\r\n\t\t\t\tprops;\r\n\r\n\t\t\t// Default to a non-submitting button\r\n\t\t\tprops = $.extend( { type: \"button\" }, props );\r\n\r\n\t\t\t// Change the context for the click callback to be the main element\r\n\t\t\tclick = props.click;\r\n\t\t\tbuttonOptions = {\r\n\t\t\t\ticon: props.icon,\r\n\t\t\t\ticonPosition: props.iconPosition,\r\n\t\t\t\tshowLabel: props.showLabel,\r\n\r\n\t\t\t\t// Deprecated options\r\n\t\t\t\ticons: props.icons,\r\n\t\t\t\ttext: props.text\r\n\t\t\t};\r\n\r\n\t\t\tdelete props.click;\r\n\t\t\tdelete props.icon;\r\n\t\t\tdelete props.iconPosition;\r\n\t\t\tdelete props.showLabel;\r\n\r\n\t\t\t// Deprecated options\r\n\t\t\tdelete props.icons;\r\n\t\t\tif ( typeof props.text === \"boolean\" ) {\r\n\t\t\t\tdelete props.text;\r\n\t\t\t}\r\n\r\n\t\t\t$( \"<button></button>\", props )\r\n\t\t\t\t.button( buttonOptions )\r\n\t\t\t\t.appendTo( that.uiButtonSet )\r\n\t\t\t\t.on( \"click\", function() {\r\n\t\t\t\t\tclick.apply( that.element[ 0 ], arguments );\r\n\t\t\t\t} );\r\n\t\t} );\r\n\t\tthis._addClass( this.uiDialog, \"ui-dialog-buttons\" );\r\n\t\tthis.uiDialogButtonPane.appendTo( this.uiDialog );\r\n\t},\r\n\r\n\t_makeDraggable: function() {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options;\r\n\r\n\t\tfunction filteredUi( ui ) {\r\n\t\t\treturn {\r\n\t\t\t\tposition: ui.position,\r\n\t\t\t\toffset: ui.offset\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.uiDialog.draggable( {\r\n\t\t\tcancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\r\n\t\t\thandle: \".ui-dialog-titlebar\",\r\n\t\t\tcontainment: \"document\",\r\n\t\t\tstart: function( event, ui ) {\r\n\t\t\t\tthat._addClass( $( this ), \"ui-dialog-dragging\" );\r\n\t\t\t\tthat._blockFrames();\r\n\t\t\t\tthat._trigger( \"dragStart\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tdrag: function( event, ui ) {\r\n\t\t\t\tthat._trigger( \"drag\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tstop: function( event, ui ) {\r\n\t\t\t\tvar left = ui.offset.left - that.document.scrollLeft(),\r\n\t\t\t\t\ttop = ui.offset.top - that.document.scrollTop();\r\n\r\n\t\t\t\toptions.position = {\r\n\t\t\t\t\tmy: \"left top\",\r\n\t\t\t\t\tat: \"left\" + ( left >= 0 ? \"+\" : \"\" ) + left + \" \" +\r\n\t\t\t\t\t\t\"top\" + ( top >= 0 ? \"+\" : \"\" ) + top,\r\n\t\t\t\t\tof: that.window\r\n\t\t\t\t};\r\n\t\t\t\tthat._removeClass( $( this ), \"ui-dialog-dragging\" );\r\n\t\t\t\tthat._unblockFrames();\r\n\t\t\t\tthat._trigger( \"dragStop\", event, filteredUi( ui ) );\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\t_makeResizable: function() {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options,\r\n\t\t\thandles = options.resizable,\r\n\r\n\t\t\t// .ui-resizable has position: relative defined in the stylesheet\r\n\t\t\t// but dialogs have to use absolute or fixed positioning\r\n\t\t\tposition = this.uiDialog.css( \"position\" ),\r\n\t\t\tresizeHandles = typeof handles === \"string\" ?\r\n\t\t\t\thandles :\r\n\t\t\t\t\"n,e,s,w,se,sw,ne,nw\";\r\n\r\n\t\tfunction filteredUi( ui ) {\r\n\t\t\treturn {\r\n\t\t\t\toriginalPosition: ui.originalPosition,\r\n\t\t\t\toriginalSize: ui.originalSize,\r\n\t\t\t\tposition: ui.position,\r\n\t\t\t\tsize: ui.size\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.uiDialog.resizable( {\r\n\t\t\tcancel: \".ui-dialog-content\",\r\n\t\t\tcontainment: \"document\",\r\n\t\t\talsoResize: this.element,\r\n\t\t\tmaxWidth: options.maxWidth,\r\n\t\t\tmaxHeight: options.maxHeight,\r\n\t\t\tminWidth: options.minWidth,\r\n\t\t\tminHeight: this._minHeight(),\r\n\t\t\thandles: resizeHandles,\r\n\t\t\tstart: function( event, ui ) {\r\n\t\t\t\tthat._addClass( $( this ), \"ui-dialog-resizing\" );\r\n\t\t\t\tthat._blockFrames();\r\n\t\t\t\tthat._trigger( \"resizeStart\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tresize: function( event, ui ) {\r\n\t\t\t\tthat._trigger( \"resize\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tstop: function( event, ui ) {\r\n\t\t\t\tvar offset = that.uiDialog.offset(),\r\n\t\t\t\t\tleft = offset.left - that.document.scrollLeft(),\r\n\t\t\t\t\ttop = offset.top - that.document.scrollTop();\r\n\r\n\t\t\t\toptions.height = that.uiDialog.height();\r\n\t\t\t\toptions.width = that.uiDialog.width();\r\n\t\t\t\toptions.position = {\r\n\t\t\t\t\tmy: \"left top\",\r\n\t\t\t\t\tat: \"left\" + ( left >= 0 ? \"+\" : \"\" ) + left + \" \" +\r\n\t\t\t\t\t\t\"top\" + ( top >= 0 ? \"+\" : \"\" ) + top,\r\n\t\t\t\t\tof: that.window\r\n\t\t\t\t};\r\n\t\t\t\tthat._removeClass( $( this ), \"ui-dialog-resizing\" );\r\n\t\t\t\tthat._unblockFrames();\r\n\t\t\t\tthat._trigger( \"resizeStop\", event, filteredUi( ui ) );\r\n\t\t\t}\r\n\t\t} )\r\n\t\t\t.css( \"position\", position );\r\n\t},\r\n\r\n\t_trackFocus: function() {\r\n\t\tthis._on( this.widget(), {\r\n\t\t\tfocusin: function( event ) {\r\n\t\t\t\tthis._makeFocusTarget();\r\n\t\t\t\tthis._focusedElement = $( event.target );\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\t_makeFocusTarget: function() {\r\n\t\tthis._untrackInstance();\r\n\t\tthis._trackingInstances().unshift( this );\r\n\t},\r\n\r\n\t_untrackInstance: function() {\r\n\t\tvar instances = this._trackingInstances(),\r\n\t\t\texists = $.inArray( this, instances );\r\n\t\tif ( exists !== -1 ) {\r\n\t\t\tinstances.splice( exists, 1 );\r\n\t\t}\r\n\t},\r\n\r\n\t_trackingInstances: function() {\r\n\t\tvar instances = this.document.data( \"ui-dialog-instances\" );\r\n\t\tif ( !instances ) {\r\n\t\t\tinstances = [];\r\n\t\t\tthis.document.data( \"ui-dialog-instances\", instances );\r\n\t\t}\r\n\t\treturn instances;\r\n\t},\r\n\r\n\t_minHeight: function() {\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn options.height === \"auto\" ?\r\n\t\t\toptions.minHeight :\r\n\t\t\tMath.min( options.minHeight, options.height );\r\n\t},\r\n\r\n\t_position: function() {\r\n\r\n\t\t// Need to show the dialog to get the actual offset in the position plugin\r\n\t\tvar isVisible = this.uiDialog.is( \":visible\" );\r\n\t\tif ( !isVisible ) {\r\n\t\t\tthis.uiDialog.show();\r\n\t\t}\r\n\t\tthis.uiDialog.position( this.options.position );\r\n\t\tif ( !isVisible ) {\r\n\t\t\tthis.uiDialog.hide();\r\n\t\t}\r\n\t},\r\n\r\n\t_setOptions: function( options ) {\r\n\t\tvar that = this,\r\n\t\t\tresize = false,\r\n\t\t\tresizableOptions = {};\r\n\r\n\t\t$.each( options, function( key, value ) {\r\n\t\t\tthat._setOption( key, value );\r\n\r\n\t\t\tif ( key in that.sizeRelatedOptions ) {\r\n\t\t\t\tresize = true;\r\n\t\t\t}\r\n\t\t\tif ( key in that.resizableRelatedOptions ) {\r\n\t\t\t\tresizableOptions[ key ] = value;\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tif ( resize ) {\r\n\t\t\tthis._size();\r\n\t\t\tthis._position();\r\n\t\t}\r\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\r\n\t\t\tthis.uiDialog.resizable( \"option\", resizableOptions );\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tvar isDraggable, isResizable,\r\n\t\t\tuiDialog = this.uiDialog;\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\tif ( key === \"appendTo\" ) {\r\n\t\t\tthis.uiDialog.appendTo( this._appendTo() );\r\n\t\t}\r\n\r\n\t\tif ( key === \"buttons\" ) {\r\n\t\t\tthis._createButtons();\r\n\t\t}\r\n\r\n\t\tif ( key === \"closeText\" ) {\r\n\t\t\tthis.uiDialogTitlebarClose.button( {\r\n\r\n\t\t\t\t// Ensure that we always pass a string\r\n\t\t\t\tlabel: $( \"<a>\" ).text( \"\" + this.options.closeText ).html()\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( key === \"draggable\" ) {\r\n\t\t\tisDraggable = uiDialog.is( \":data(ui-draggable)\" );\r\n\t\t\tif ( isDraggable && !value ) {\r\n\t\t\t\tuiDialog.draggable( \"destroy\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !isDraggable && value ) {\r\n\t\t\t\tthis._makeDraggable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( key === \"position\" ) {\r\n\t\t\tthis._position();\r\n\t\t}\r\n\r\n\t\tif ( key === \"resizable\" ) {\r\n\r\n\t\t\t// currently resizable, becoming non-resizable\r\n\t\t\tisResizable = uiDialog.is( \":data(ui-resizable)\" );\r\n\t\t\tif ( isResizable && !value ) {\r\n\t\t\t\tuiDialog.resizable( \"destroy\" );\r\n\t\t\t}\r\n\r\n\t\t\t// Currently resizable, changing handles\r\n\t\t\tif ( isResizable && typeof value === \"string\" ) {\r\n\t\t\t\tuiDialog.resizable( \"option\", \"handles\", value );\r\n\t\t\t}\r\n\r\n\t\t\t// Currently non-resizable, becoming resizable\r\n\t\t\tif ( !isResizable && value !== false ) {\r\n\t\t\t\tthis._makeResizable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( key === \"title\" ) {\r\n\t\t\tthis._title( this.uiDialogTitlebar.find( \".ui-dialog-title\" ) );\r\n\t\t}\r\n\t},\r\n\r\n\t_size: function() {\r\n\r\n\t\t// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\r\n\t\t// divs will both have width and height set, so we need to reset them\r\n\t\tvar nonContentHeight, minContentHeight, maxContentHeight,\r\n\t\t\toptions = this.options;\r\n\r\n\t\t// Reset content sizing\r\n\t\tthis.element.show().css( {\r\n\t\t\twidth: \"auto\",\r\n\t\t\tminHeight: 0,\r\n\t\t\tmaxHeight: \"none\",\r\n\t\t\theight: 0\r\n\t\t} );\r\n\r\n\t\tif ( options.minWidth > options.width ) {\r\n\t\t\toptions.width = options.minWidth;\r\n\t\t}\r\n\r\n\t\t// Reset wrapper sizing\r\n\t\t// determine the height of all the non-content elements\r\n\t\tnonContentHeight = this.uiDialog.css( {\r\n\t\t\theight: \"auto\",\r\n\t\t\twidth: options.width\r\n\t\t} )\r\n\t\t\t.outerHeight();\r\n\t\tminContentHeight = Math.max( 0, options.minHeight - nonContentHeight );\r\n\t\tmaxContentHeight = typeof options.maxHeight === \"number\" ?\r\n\t\t\tMath.max( 0, options.maxHeight - nonContentHeight ) :\r\n\t\t\t\"none\";\r\n\r\n\t\tif ( options.height === \"auto\" ) {\r\n\t\t\tthis.element.css( {\r\n\t\t\t\tminHeight: minContentHeight,\r\n\t\t\t\tmaxHeight: maxContentHeight,\r\n\t\t\t\theight: \"auto\"\r\n\t\t\t} );\r\n\t\t} else {\r\n\t\t\tthis.element.height( Math.max( 0, options.height - nonContentHeight ) );\r\n\t\t}\r\n\r\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\r\n\t\t\tthis.uiDialog.resizable( \"option\", \"minHeight\", this._minHeight() );\r\n\t\t}\r\n\t},\r\n\r\n\t_blockFrames: function() {\r\n\t\tthis.iframeBlocks = this.document.find( \"iframe\" ).map( function() {\r\n\t\t\tvar iframe = $( this );\r\n\r\n\t\t\treturn $( \"<div>\" )\r\n\t\t\t\t.css( {\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\twidth: iframe.outerWidth(),\r\n\t\t\t\t\theight: iframe.outerHeight()\r\n\t\t\t\t} )\r\n\t\t\t\t.appendTo( iframe.parent() )\r\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\r\n\t\t} );\r\n\t},\r\n\r\n\t_unblockFrames: function() {\r\n\t\tif ( this.iframeBlocks ) {\r\n\t\t\tthis.iframeBlocks.remove();\r\n\t\t\tdelete this.iframeBlocks;\r\n\t\t}\r\n\t},\r\n\r\n\t_allowInteraction: function( event ) {\r\n\t\tif ( $( event.target ).closest( \".ui-dialog\" ).length ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// TODO: Remove hack when datepicker implements\r\n\t\t// the .ui-front logic (#8989)\r\n\t\treturn !!$( event.target ).closest( \".ui-datepicker\" ).length;\r\n\t},\r\n\r\n\t_createOverlay: function() {\r\n\t\tif ( !this.options.modal ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// We use a delay in case the overlay is created from an\r\n\t\t// event that we're going to be cancelling (#2804)\r\n\t\tvar isOpening = true;\r\n\t\tthis._delay( function() {\r\n\t\t\tisOpening = false;\r\n\t\t} );\r\n\r\n\t\tif ( !this.document.data( \"ui-dialog-overlays\" ) ) {\r\n\r\n\t\t\t// Prevent use of anchors and inputs\r\n\t\t\t// This doesn't use `_on()` because it is a shared event handler\r\n\t\t\t// across all open modal dialogs.\r\n\t\t\tthis.document.on( \"focusin.ui-dialog\", function( event ) {\r\n\t\t\t\tif ( isOpening ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar instance = this._trackingInstances()[ 0 ];\r\n\t\t\t\tif ( !instance._allowInteraction( event ) ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tinstance._focusTabbable();\r\n\t\t\t\t}\r\n\t\t\t}.bind( this ) );\r\n\t\t}\r\n\r\n\t\tthis.overlay = $( \"<div>\" )\r\n\t\t\t.appendTo( this._appendTo() );\r\n\r\n\t\tthis._addClass( this.overlay, null, \"ui-widget-overlay ui-front\" );\r\n\t\tthis._on( this.overlay, {\r\n\t\t\tmousedown: \"_keepFocus\"\r\n\t\t} );\r\n\t\tthis.document.data( \"ui-dialog-overlays\",\r\n\t\t\t( this.document.data( \"ui-dialog-overlays\" ) || 0 ) + 1 );\r\n\t},\r\n\r\n\t_destroyOverlay: function() {\r\n\t\tif ( !this.options.modal ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.overlay ) {\r\n\t\t\tvar overlays = this.document.data( \"ui-dialog-overlays\" ) - 1;\r\n\r\n\t\t\tif ( !overlays ) {\r\n\t\t\t\tthis.document.off( \"focusin.ui-dialog\" );\r\n\t\t\t\tthis.document.removeData( \"ui-dialog-overlays\" );\r\n\t\t\t} else {\r\n\t\t\t\tthis.document.data( \"ui-dialog-overlays\", overlays );\r\n\t\t\t}\r\n\r\n\t\t\tthis.overlay.remove();\r\n\t\t\tthis.overlay = null;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n// DEPRECATED\r\n// TODO: switch return back to widget declaration at top of file when this is removed\r\nif ( $.uiBackCompat !== false ) {\r\n\r\n\t// Backcompat for dialogClass option\r\n\t$.widget( \"ui.dialog\", $.ui.dialog, {\r\n\t\toptions: {\r\n\t\t\tdialogClass: \"\"\r\n\t\t},\r\n\t\t_createWrapper: function() {\r\n\t\t\tthis._super();\r\n\t\t\tthis.uiDialog.addClass( this.options.dialogClass );\r\n\t\t},\r\n\t\t_setOption: function( key, value ) {\r\n\t\t\tif ( key === \"dialogClass\" ) {\r\n\t\t\t\tthis.uiDialog\r\n\t\t\t\t\t.removeClass( this.options.dialogClass )\r\n\t\t\t\t\t.addClass( value );\r\n\t\t\t}\r\n\t\t\tthis._superApply( arguments );\r\n\t\t}\r\n\t} );\r\n}\r\n\r\nreturn $.ui.dialog;\r\n\r\n});\r\n"]}