{"version":3,"sources":["widgets/tooltip.js"],"names":["define","$","widget","version","options","classes","ui-tooltip","content","title","this","attr","text","html","hide","items","position","my","at","collision","show","track","close","open","_addDescribedBy","elem","id","describedby","split","push","data","trim","join","_removeDescribedBy","index","inArray","splice","removeData","removeAttr","_create","_on","mouseover","focusin","tooltips","parents","liveRegion","role","aria-live","aria-relevant","appendTo","document","body","_addClass","disabledTitles","_setOption","key","value","that","_super","each","tooltipData","_updateContent","element","_setOptionDisabled","_disable","event","Event","target","currentTarget","add","find","addBack","filter","is","_enable","closest","length","type","blurEvent","parent","uniqueId","_registerCloseHandlers","contentOption","eventType","nodeType","jquery","_open","call","response","_delay","tooltip","delayedShow","a11yContent","positionOption","extend","of","_find","_tooltip","children","test","mousemove","_show","delay","setInterval","clearInterval","fx","interval","_trigger","events","keyup","keyCode","ui","ESCAPE","fakeEvent","remove","_removeTooltip","mouseleave","focusout","closing","hiding","stop","_hide","_off","_appendTo","_destroy","uiBackCompat","tooltipClass","_superApply","arguments","addClass"],"mappings":"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","file":"../../widgets/tooltip.js","sourcesContent":["/*!\r\n * jQuery UI Tooltip @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\n//>>label: Tooltip\r\n//>>group: Widgets\r\n//>>description: Shows additional information for any element on hover or focus.\r\n//>>docs: http://api.jqueryui.com/tooltip/\r\n//>>demos: http://jqueryui.com/tooltip/\r\n//>>css.structure: ../../themes/base/core.css\r\n//>>css.structure: ../../themes/base/tooltip.css\r\n//>>css.theme: ../../themes/base/theme.css\r\n\r\ndefine( [\r\n\t\t\t\"skylark-jquery\",\r\n\t\t\t\"../keycode\",\r\n\t\t\t\"../position\",\r\n\t\t\t\"../unique-id\",\r\n\t\t\t\"../version\",\r\n\t\t\t\"../widget\"\r\n],function( $ ) {\r\n\r\n$.widget( \"ui.tooltip\", {\r\n\tversion: \"@VERSION\",\r\n\toptions: {\r\n\t\tclasses: {\r\n\t\t\t\"ui-tooltip\": \"ui-corner-all ui-widget-shadow\"\r\n\t\t},\r\n\t\tcontent: function() {\r\n\r\n\t\t\t// support: IE<9, Opera in jQuery <1.7\r\n\t\t\t// .text() can't accept undefined, so coerce to a string\r\n\t\t\tvar title = $( this ).attr( \"title\" ) || \"\";\r\n\r\n\t\t\t// Escape title, since we're going from an attribute to raw HTML\r\n\t\t\treturn $( \"<a>\" ).text( title ).html();\r\n\t\t},\r\n\t\thide: true,\r\n\r\n\t\t// Disabled elements have inconsistent behavior across browsers (#8661)\r\n\t\titems: \"[title]:not([disabled])\",\r\n\t\tposition: {\r\n\t\t\tmy: \"left top+15\",\r\n\t\t\tat: \"left bottom\",\r\n\t\t\tcollision: \"flipfit flip\"\r\n\t\t},\r\n\t\tshow: true,\r\n\t\ttrack: false,\r\n\r\n\t\t// Callbacks\r\n\t\tclose: null,\r\n\t\topen: null\r\n\t},\r\n\r\n\t_addDescribedBy: function( elem, id ) {\r\n\t\tvar describedby = ( elem.attr( \"aria-describedby\" ) || \"\" ).split( /\\s+/ );\r\n\t\tdescribedby.push( id );\r\n\t\telem\r\n\t\t\t.data( \"ui-tooltip-id\", id )\r\n\t\t\t.attr( \"aria-describedby\", $.trim( describedby.join( \" \" ) ) );\r\n\t},\r\n\r\n\t_removeDescribedBy: function( elem ) {\r\n\t\tvar id = elem.data( \"ui-tooltip-id\" ),\r\n\t\t\tdescribedby = ( elem.attr( \"aria-describedby\" ) || \"\" ).split( /\\s+/ ),\r\n\t\t\tindex = $.inArray( id, describedby );\r\n\r\n\t\tif ( index !== -1 ) {\r\n\t\t\tdescribedby.splice( index, 1 );\r\n\t\t}\r\n\r\n\t\telem.removeData( \"ui-tooltip-id\" );\r\n\t\tdescribedby = $.trim( describedby.join( \" \" ) );\r\n\t\tif ( describedby ) {\r\n\t\t\telem.attr( \"aria-describedby\", describedby );\r\n\t\t} else {\r\n\t\t\telem.removeAttr( \"aria-describedby\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis._on( {\r\n\t\t\tmouseover: \"open\",\r\n\t\t\tfocusin: \"open\"\r\n\t\t} );\r\n\r\n\t\t// IDs of generated tooltips, needed for destroy\r\n\t\tthis.tooltips = {};\r\n\r\n\t\t// IDs of parent tooltips where we removed the title attribute\r\n\t\tthis.parents = {};\r\n\r\n\t\t// Append the aria-live region so tooltips announce correctly\r\n\t\tthis.liveRegion = $( \"<div>\" )\r\n\t\t\t.attr( {\r\n\t\t\t\trole: \"log\",\r\n\t\t\t\t\"aria-live\": \"assertive\",\r\n\t\t\t\t\"aria-relevant\": \"additions\"\r\n\t\t\t} )\r\n\t\t\t.appendTo( this.document[ 0 ].body );\r\n\t\tthis._addClass( this.liveRegion, null, \"ui-helper-hidden-accessible\" );\r\n\r\n\t\tthis.disabledTitles = $( [] );\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\tif ( key === \"content\" ) {\r\n\t\t\t$.each( this.tooltips, function( id, tooltipData ) {\r\n\t\t\t\tthat._updateContent( tooltipData.element );\r\n\t\t\t} );\r\n\t\t}\r\n\t},\r\n\r\n\t_setOptionDisabled: function( value ) {\r\n\t\tthis[ value ? \"_disable\" : \"_enable\" ]();\r\n\t},\r\n\r\n\t_disable: function() {\r\n\t\tvar that = this;\r\n\r\n\t\t// Close open tooltips\r\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\r\n\t\t\tvar event = $.Event( \"blur\" );\r\n\t\t\tevent.target = event.currentTarget = tooltipData.element[ 0 ];\r\n\t\t\tthat.close( event, true );\r\n\t\t} );\r\n\r\n\t\t// Remove title attributes to prevent native tooltips\r\n\t\tthis.disabledTitles = this.disabledTitles.add(\r\n\t\t\tthis.element.find( this.options.items ).addBack()\r\n\t\t\t\t.filter( function() {\r\n\t\t\t\t\tvar element = $( this );\r\n\t\t\t\t\tif ( element.is( \"[title]\" ) ) {\r\n\t\t\t\t\t\treturn element\r\n\t\t\t\t\t\t\t.data( \"ui-tooltip-title\", element.attr( \"title\" ) )\r\n\t\t\t\t\t\t\t.removeAttr( \"title\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t);\r\n\t},\r\n\r\n\t_enable: function() {\r\n\r\n\t\t// restore title attributes\r\n\t\tthis.disabledTitles.each( function() {\r\n\t\t\tvar element = $( this );\r\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\r\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\r\n\t\t\t}\r\n\t\t} );\r\n\t\tthis.disabledTitles = $( [] );\r\n\t},\r\n\r\n\topen: function( event ) {\r\n\t\tvar that = this,\r\n\t\t\ttarget = $( event ? event.target : this.element )\r\n\r\n\t\t\t\t// we need closest here due to mouseover bubbling,\r\n\t\t\t\t// but always pointing at the same event target\r\n\t\t\t\t.closest( this.options.items );\r\n\r\n\t\t// No element to show a tooltip for or the tooltip is already open\r\n\t\tif ( !target.length || target.data( \"ui-tooltip-id\" ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( target.attr( \"title\" ) ) {\r\n\t\t\ttarget.data( \"ui-tooltip-title\", target.attr( \"title\" ) );\r\n\t\t}\r\n\r\n\t\ttarget.data( \"ui-tooltip-open\", true );\r\n\r\n\t\t// Kill parent tooltips, custom or native, for hover\r\n\t\tif ( event && event.type === \"mouseover\" ) {\r\n\t\t\ttarget.parents().each( function() {\r\n\t\t\t\tvar parent = $( this ),\r\n\t\t\t\t\tblurEvent;\r\n\t\t\t\tif ( parent.data( \"ui-tooltip-open\" ) ) {\r\n\t\t\t\t\tblurEvent = $.Event( \"blur\" );\r\n\t\t\t\t\tblurEvent.target = blurEvent.currentTarget = this;\r\n\t\t\t\t\tthat.close( blurEvent, true );\r\n\t\t\t\t}\r\n\t\t\t\tif ( parent.attr( \"title\" ) ) {\r\n\t\t\t\t\tparent.uniqueId();\r\n\t\t\t\t\tthat.parents[ this.id ] = {\r\n\t\t\t\t\t\telement: this,\r\n\t\t\t\t\t\ttitle: parent.attr( \"title\" )\r\n\t\t\t\t\t};\r\n\t\t\t\t\tparent.attr( \"title\", \"\" );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tthis._registerCloseHandlers( event, target );\r\n\t\tthis._updateContent( target, event );\r\n\t},\r\n\r\n\t_updateContent: function( target, event ) {\r\n\t\tvar content,\r\n\t\t\tcontentOption = this.options.content,\r\n\t\t\tthat = this,\r\n\t\t\teventType = event ? event.type : null;\r\n\r\n\t\tif ( typeof contentOption === \"string\" || contentOption.nodeType ||\r\n\t\t\t\tcontentOption.jquery ) {\r\n\t\t\treturn this._open( event, target, contentOption );\r\n\t\t}\r\n\r\n\t\tcontent = contentOption.call( target[ 0 ], function( response ) {\r\n\r\n\t\t\t// IE may instantly serve a cached response for ajax requests\r\n\t\t\t// delay this call to _open so the other call to _open runs first\r\n\t\t\tthat._delay( function() {\r\n\r\n\t\t\t\t// Ignore async response if tooltip was closed already\r\n\t\t\t\tif ( !target.data( \"ui-tooltip-open\" ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// JQuery creates a special event for focusin when it doesn't\r\n\t\t\t\t// exist natively. To improve performance, the native event\r\n\t\t\t\t// object is reused and the type is changed. Therefore, we can't\r\n\t\t\t\t// rely on the type being correct after the event finished\r\n\t\t\t\t// bubbling, so we set it back to the previous value. (#8740)\r\n\t\t\t\tif ( event ) {\r\n\t\t\t\t\tevent.type = eventType;\r\n\t\t\t\t}\r\n\t\t\t\tthis._open( event, target, response );\r\n\t\t\t} );\r\n\t\t} );\r\n\t\tif ( content ) {\r\n\t\t\tthis._open( event, target, content );\r\n\t\t}\r\n\t},\r\n\r\n\t_open: function( event, target, content ) {\r\n\t\tvar tooltipData, tooltip, delayedShow, a11yContent,\r\n\t\t\tpositionOption = $.extend( {}, this.options.position );\r\n\r\n\t\tif ( !content ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Content can be updated multiple times. If the tooltip already\r\n\t\t// exists, then just update the content and bail.\r\n\t\ttooltipData = this._find( target );\r\n\t\tif ( tooltipData ) {\r\n\t\t\ttooltipData.tooltip.find( \".ui-tooltip-content\" ).html( content );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If we have a title, clear it to prevent the native tooltip\r\n\t\t// we have to check first to avoid defining a title if none exists\r\n\t\t// (we don't want to cause an element to start matching [title])\r\n\t\t//\r\n\t\t// We use removeAttr only for key events, to allow IE to export the correct\r\n\t\t// accessible attributes. For mouse events, set to empty string to avoid\r\n\t\t// native tooltip showing up (happens only when removing inside mouseover).\r\n\t\tif ( target.is( \"[title]\" ) ) {\r\n\t\t\tif ( event && event.type === \"mouseover\" ) {\r\n\t\t\t\ttarget.attr( \"title\", \"\" );\r\n\t\t\t} else {\r\n\t\t\t\ttarget.removeAttr( \"title\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttooltipData = this._tooltip( target );\r\n\t\ttooltip = tooltipData.tooltip;\r\n\t\tthis._addDescribedBy( target, tooltip.attr( \"id\" ) );\r\n\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\r\n\r\n\t\t// Support: Voiceover on OS X, JAWS on IE <= 9\r\n\t\t// JAWS announces deletions even when aria-relevant=\"additions\"\r\n\t\t// Voiceover will sometimes re-read the entire log region's contents from the beginning\r\n\t\tthis.liveRegion.children().hide();\r\n\t\ta11yContent = $( \"<div>\" ).html( tooltip.find( \".ui-tooltip-content\" ).html() );\r\n\t\ta11yContent.removeAttr( \"name\" ).find( \"[name]\" ).removeAttr( \"name\" );\r\n\t\ta11yContent.removeAttr( \"id\" ).find( \"[id]\" ).removeAttr( \"id\" );\r\n\t\ta11yContent.appendTo( this.liveRegion );\r\n\r\n\t\tfunction position( event ) {\r\n\t\t\tpositionOption.of = event;\r\n\t\t\tif ( tooltip.is( \":hidden\" ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttooltip.position( positionOption );\r\n\t\t}\r\n\t\tif ( this.options.track && event && /^mouse/.test( event.type ) ) {\r\n\t\t\tthis._on( this.document, {\r\n\t\t\t\tmousemove: position\r\n\t\t\t} );\r\n\r\n\t\t\t// trigger once to override element-relative positioning\r\n\t\t\tposition( event );\r\n\t\t} else {\r\n\t\t\ttooltip.position( $.extend( {\r\n\t\t\t\tof: target\r\n\t\t\t}, this.options.position ) );\r\n\t\t}\r\n\r\n\t\ttooltip.hide();\r\n\r\n\t\tthis._show( tooltip, this.options.show );\r\n\r\n\t\t// Handle tracking tooltips that are shown with a delay (#8644). As soon\r\n\t\t// as the tooltip is visible, position the tooltip using the most recent\r\n\t\t// event.\r\n\t\t// Adds the check to add the timers only when both delay and track options are set (#14682)\r\n\t\tif ( this.options.track && this.options.show && this.options.show.delay ) {\r\n\t\t\tdelayedShow = this.delayedShow = setInterval( function() {\r\n\t\t\t\tif ( tooltip.is( \":visible\" ) ) {\r\n\t\t\t\t\tposition( positionOption.of );\r\n\t\t\t\t\tclearInterval( delayedShow );\r\n\t\t\t\t}\r\n\t\t\t}, $.fx.interval );\r\n\t\t}\r\n\r\n\t\tthis._trigger( \"open\", event, { tooltip: tooltip } );\r\n\t},\r\n\r\n\t_registerCloseHandlers: function( event, target ) {\r\n\t\tvar events = {\r\n\t\t\tkeyup: function( event ) {\r\n\t\t\t\tif ( event.keyCode === $.ui.keyCode.ESCAPE ) {\r\n\t\t\t\t\tvar fakeEvent = $.Event( event );\r\n\t\t\t\t\tfakeEvent.currentTarget = target[ 0 ];\r\n\t\t\t\t\tthis.close( fakeEvent, true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Only bind remove handler for delegated targets. Non-delegated\r\n\t\t// tooltips will handle this in destroy.\r\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\r\n\t\t\tevents.remove = function() {\r\n\t\t\t\tthis._removeTooltip( this._find( target ).tooltip );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif ( !event || event.type === \"mouseover\" ) {\r\n\t\t\tevents.mouseleave = \"close\";\r\n\t\t}\r\n\t\tif ( !event || event.type === \"focusin\" ) {\r\n\t\t\tevents.focusout = \"close\";\r\n\t\t}\r\n\t\tthis._on( true, target, events );\r\n\t},\r\n\r\n\tclose: function( event ) {\r\n\t\tvar tooltip,\r\n\t\t\tthat = this,\r\n\t\t\ttarget = $( event ? event.currentTarget : this.element ),\r\n\t\t\ttooltipData = this._find( target );\r\n\r\n\t\t// The tooltip may already be closed\r\n\t\tif ( !tooltipData ) {\r\n\r\n\t\t\t// We set ui-tooltip-open immediately upon open (in open()), but only set the\r\n\t\t\t// additional data once there's actually content to show (in _open()). So even if the\r\n\t\t\t// tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in\r\n\t\t\t// the period between open() and _open().\r\n\t\t\ttarget.removeData( \"ui-tooltip-open\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttooltip = tooltipData.tooltip;\r\n\r\n\t\t// Disabling closes the tooltip, so we need to track when we're closing\r\n\t\t// to avoid an infinite loop in case the tooltip becomes disabled on close\r\n\t\tif ( tooltipData.closing ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Clear the interval for delayed tracking tooltips\r\n\t\tclearInterval( this.delayedShow );\r\n\r\n\t\t// Only set title if we had one before (see comment in _open())\r\n\t\t// If the title attribute has changed since open(), don't restore\r\n\t\tif ( target.data( \"ui-tooltip-title\" ) && !target.attr( \"title\" ) ) {\r\n\t\t\ttarget.attr( \"title\", target.data( \"ui-tooltip-title\" ) );\r\n\t\t}\r\n\r\n\t\tthis._removeDescribedBy( target );\r\n\r\n\t\ttooltipData.hiding = true;\r\n\t\ttooltip.stop( true );\r\n\t\tthis._hide( tooltip, this.options.hide, function() {\r\n\t\t\tthat._removeTooltip( $( this ) );\r\n\t\t} );\r\n\r\n\t\ttarget.removeData( \"ui-tooltip-open\" );\r\n\t\tthis._off( target, \"mouseleave focusout keyup\" );\r\n\r\n\t\t// Remove 'remove' binding only on delegated targets\r\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\r\n\t\t\tthis._off( target, \"remove\" );\r\n\t\t}\r\n\t\tthis._off( this.document, \"mousemove\" );\r\n\r\n\t\tif ( event && event.type === \"mouseleave\" ) {\r\n\t\t\t$.each( this.parents, function( id, parent ) {\r\n\t\t\t\t$( parent.element ).attr( \"title\", parent.title );\r\n\t\t\t\tdelete that.parents[ id ];\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\ttooltipData.closing = true;\r\n\t\tthis._trigger( \"close\", event, { tooltip: tooltip } );\r\n\t\tif ( !tooltipData.hiding ) {\r\n\t\t\ttooltipData.closing = false;\r\n\t\t}\r\n\t},\r\n\r\n\t_tooltip: function( element ) {\r\n\t\tvar tooltip = $( \"<div>\" ).attr( \"role\", \"tooltip\" ),\r\n\t\t\tcontent = $( \"<div>\" ).appendTo( tooltip ),\r\n\t\t\tid = tooltip.uniqueId().attr( \"id\" );\r\n\r\n\t\tthis._addClass( content, \"ui-tooltip-content\" );\r\n\t\tthis._addClass( tooltip, \"ui-tooltip\", \"ui-widget ui-widget-content\" );\r\n\r\n\t\ttooltip.appendTo( this._appendTo( element ) );\r\n\r\n\t\treturn this.tooltips[ id ] = {\r\n\t\t\telement: element,\r\n\t\t\ttooltip: tooltip\r\n\t\t};\r\n\t},\r\n\r\n\t_find: function( target ) {\r\n\t\tvar id = target.data( \"ui-tooltip-id\" );\r\n\t\treturn id ? this.tooltips[ id ] : null;\r\n\t},\r\n\r\n\t_removeTooltip: function( tooltip ) {\r\n\r\n\t\t// Clear the interval for delayed tracking tooltips\r\n\t\tclearInterval( this.delayedShow );\r\n\r\n\t\ttooltip.remove();\r\n\t\tdelete this.tooltips[ tooltip.attr( \"id\" ) ];\r\n\t},\r\n\r\n\t_appendTo: function( target ) {\r\n\t\tvar element = target.closest( \".ui-front, dialog\" );\r\n\r\n\t\tif ( !element.length ) {\r\n\t\t\telement = this.document[ 0 ].body;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar that = this;\r\n\r\n\t\t// Close open tooltips\r\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\r\n\r\n\t\t\t// Delegate to close method to handle common cleanup\r\n\t\t\tvar event = $.Event( \"blur\" ),\r\n\t\t\t\telement = tooltipData.element;\r\n\t\t\tevent.target = event.currentTarget = element[ 0 ];\r\n\t\t\tthat.close( event, true );\r\n\r\n\t\t\t// Remove immediately; destroying an open tooltip doesn't use the\r\n\t\t\t// hide animation\r\n\t\t\t$( \"#\" + id ).remove();\r\n\r\n\t\t\t// Restore the title\r\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\r\n\r\n\t\t\t\t// If the title attribute has changed since open(), don't restore\r\n\t\t\t\tif ( !element.attr( \"title\" ) ) {\r\n\t\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\r\n\t\t\t\t}\r\n\t\t\t\telement.removeData( \"ui-tooltip-title\" );\r\n\t\t\t}\r\n\t\t} );\r\n\t\tthis.liveRegion.remove();\r\n\t}\r\n} );\r\n\r\n// DEPRECATED\r\n// TODO: Switch return back to widget declaration at top of file when this is removed\r\nif ( $.uiBackCompat !== false ) {\r\n\r\n\t// Backcompat for tooltipClass option\r\n\t$.widget( \"ui.tooltip\", $.ui.tooltip, {\r\n\t\toptions: {\r\n\t\t\ttooltipClass: null\r\n\t\t},\r\n\t\t_tooltip: function() {\r\n\t\t\tvar tooltipData = this._superApply( arguments );\r\n\t\t\tif ( this.options.tooltipClass ) {\r\n\t\t\t\ttooltipData.tooltip.addClass( this.options.tooltipClass );\r\n\t\t\t}\r\n\t\t\treturn tooltipData;\r\n\t\t}\r\n\t} );\r\n}\r\n\r\nreturn $.ui.tooltip;\r\n\r\n});\r\n"]}