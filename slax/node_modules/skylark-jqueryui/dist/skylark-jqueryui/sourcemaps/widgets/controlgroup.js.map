{"version":3,"sources":["widgets/controlgroup.js"],"names":["define","$","controlgroupCornerRegex","widget","version","defaultElement","options","direction","disabled","onlyVisible","items","button","controlgroupLabel","checkboxradio","selectmenu","spinner","_create","this","_enhance","element","attr","refresh","_destroy","_callChildMethod","childWidgets","removeData","removeAttr","find","contents","unwrap","_initWidgets","that","each","selector","labels","children","length","wrapAll","_addClass","concat","get","fn","classes","instance","instanceOptions","extend","parent","_resolveClassesValues","widgetElement","data","push","uniqueSort","method","_updateCornerClass","position","add","_buildSimpleOptions","label","_removeClass","key","result","middle","first","last","only","_spinnerOptions","_buttonOptions","_checkboxradioOptions","_selectmenuOptions","width","ui-selectmenu-button-open","ui-selectmenu-button-closed","current","trim","replace","_setOption","value","_super","filter","index","widgetName"],"mappings":"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","file":"../../widgets/controlgroup.js","sourcesContent":["/*!\r\n * jQuery UI Controlgroup @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\n//>>label: Controlgroup\r\n//>>group: Widgets\r\n//>>description: Visually groups form control widgets\r\n//>>docs: http://api.jqueryui.com/controlgroup/\r\n//>>demos: http://jqueryui.com/controlgroup/\r\n//>>css.structure: ../../themes/base/core.css\r\n//>>css.structure: ../../themes/base/controlgroup.css\r\n//>>css.theme: ../../themes/base/theme.css\r\n\r\ndefine( [\r\n\t\"skylark-jquery\",\r\n\t\"../widget\"\r\n],function( $ ) {\r\nvar controlgroupCornerRegex = /ui-corner-([a-z]){2,6}/g;\r\n\r\nreturn $.widget( \"ui.controlgroup\", {\r\n\tversion: \"@VERSION\",\r\n\tdefaultElement: \"<div>\",\r\n\toptions: {\r\n\t\tdirection: \"horizontal\",\r\n\t\tdisabled: null,\r\n\t\tonlyVisible: true,\r\n\t\titems: {\r\n\t\t\t\"button\": \"input[type=button], input[type=submit], input[type=reset], button, a\",\r\n\t\t\t\"controlgroupLabel\": \".ui-controlgroup-label\",\r\n\t\t\t\"checkboxradio\": \"input[type='checkbox'], input[type='radio']\",\r\n\t\t\t\"selectmenu\": \"select\",\r\n\t\t\t\"spinner\": \".ui-spinner-input\"\r\n\t\t}\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis._enhance();\r\n\t},\r\n\r\n\t// To support the enhanced option in jQuery Mobile, we isolate DOM manipulation\r\n\t_enhance: function() {\r\n\t\tthis.element.attr( \"role\", \"toolbar\" );\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis._callChildMethod( \"destroy\" );\r\n\t\tthis.childWidgets.removeData( \"ui-controlgroup-data\" );\r\n\t\tthis.element.removeAttr( \"role\" );\r\n\t\tif ( this.options.items.controlgroupLabel ) {\r\n\t\t\tthis.element\r\n\t\t\t\t.find( this.options.items.controlgroupLabel )\r\n\t\t\t\t.find( \".ui-controlgroup-label-contents\" )\r\n\t\t\t\t.contents().unwrap();\r\n\t\t}\r\n\t},\r\n\r\n\t_initWidgets: function() {\r\n\t\tvar that = this,\r\n\t\t\tchildWidgets = [];\r\n\r\n\t\t// First we iterate over each of the items options\r\n\t\t$.each( this.options.items, function( widget, selector ) {\r\n\t\t\tvar labels;\r\n\t\t\tvar options = {};\r\n\r\n\t\t\t// Make sure the widget has a selector set\r\n\t\t\tif ( !selector ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( widget === \"controlgroupLabel\" ) {\r\n\t\t\t\tlabels = that.element.find( selector );\r\n\t\t\t\tlabels.each( function() {\r\n\t\t\t\t\tvar element = $( this );\r\n\r\n\t\t\t\t\tif ( element.children( \".ui-controlgroup-label-contents\" ).length ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telement.contents()\r\n\t\t\t\t\t\t.wrapAll( \"<span class='ui-controlgroup-label-contents'></span>\" );\r\n\t\t\t\t} );\r\n\t\t\t\tthat._addClass( labels, null, \"ui-widget ui-widget-content ui-state-default\" );\r\n\t\t\t\tchildWidgets = childWidgets.concat( labels.get() );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Make sure the widget actually exists\r\n\t\t\tif ( !$.fn[ widget ] ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// We assume everything is in the middle to start because we can't determine\r\n\t\t\t// first / last elements until all enhancments are done.\r\n\t\t\tif ( that[ \"_\" + widget + \"Options\" ] ) {\r\n\t\t\t\toptions = that[ \"_\" + widget + \"Options\" ]( \"middle\" );\r\n\t\t\t} else {\r\n\t\t\t\toptions = { classes: {} };\r\n\t\t\t}\r\n\r\n\t\t\t// Find instances of this widget inside controlgroup and init them\r\n\t\t\tthat.element\r\n\t\t\t\t.find( selector )\r\n\t\t\t\t.each( function() {\r\n\t\t\t\t\tvar element = $( this );\r\n\t\t\t\t\tvar instance = element[ widget ]( \"instance\" );\r\n\r\n\t\t\t\t\t// We need to clone the default options for this type of widget to avoid\r\n\t\t\t\t\t// polluting the variable options which has a wider scope than a single widget.\r\n\t\t\t\t\tvar instanceOptions = $.widget.extend( {}, options );\r\n\r\n\t\t\t\t\t// If the button is the child of a spinner ignore it\r\n\t\t\t\t\t// TODO: Find a more generic solution\r\n\t\t\t\t\tif ( widget === \"button\" && element.parent( \".ui-spinner\" ).length ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Create the widget if it doesn't exist\r\n\t\t\t\t\tif ( !instance ) {\r\n\t\t\t\t\t\tinstance = element[ widget ]()[ widget ]( \"instance\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( instance ) {\r\n\t\t\t\t\t\tinstanceOptions.classes =\r\n\t\t\t\t\t\t\tthat._resolveClassesValues( instanceOptions.classes, instance );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telement[ widget ]( instanceOptions );\r\n\r\n\t\t\t\t\t// Store an instance of the controlgroup to be able to reference\r\n\t\t\t\t\t// from the outermost element for changing options and refresh\r\n\t\t\t\t\tvar widgetElement = element[ widget ]( \"widget\" );\r\n\t\t\t\t\t$.data( widgetElement[ 0 ], \"ui-controlgroup-data\",\r\n\t\t\t\t\t\tinstance ? instance : element[ widget ]( \"instance\" ) );\r\n\r\n\t\t\t\t\tchildWidgets.push( widgetElement[ 0 ] );\r\n\t\t\t\t} );\r\n\t\t} );\r\n\r\n\t\tthis.childWidgets = $( $.uniqueSort( childWidgets ) );\r\n\t\tthis._addClass( this.childWidgets, \"ui-controlgroup-item\" );\r\n\t},\r\n\r\n\t_callChildMethod: function( method ) {\r\n\t\tthis.childWidgets.each( function() {\r\n\t\t\tvar element = $( this ),\r\n\t\t\t\tdata = element.data( \"ui-controlgroup-data\" );\r\n\t\t\tif ( data && data[ method ] ) {\r\n\t\t\t\tdata[ method ]();\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\t_updateCornerClass: function( element, position ) {\r\n\t\tvar remove = \"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all\";\r\n\t\tvar add = this._buildSimpleOptions( position, \"label\" ).classes.label;\r\n\r\n\t\tthis._removeClass( element, null, remove );\r\n\t\tthis._addClass( element, null, add );\r\n\t},\r\n\r\n\t_buildSimpleOptions: function( position, key ) {\r\n\t\tvar direction = this.options.direction === \"vertical\";\r\n\t\tvar result = {\r\n\t\t\tclasses: {}\r\n\t\t};\r\n\t\tresult.classes[ key ] = {\r\n\t\t\t\"middle\": \"\",\r\n\t\t\t\"first\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" ),\r\n\t\t\t\"last\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" ),\r\n\t\t\t\"only\": \"ui-corner-all\"\r\n\t\t}[ position ];\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_spinnerOptions: function( position ) {\r\n\t\tvar options = this._buildSimpleOptions( position, \"ui-spinner\" );\r\n\r\n\t\toptions.classes[ \"ui-spinner-up\" ] = \"\";\r\n\t\toptions.classes[ \"ui-spinner-down\" ] = \"\";\r\n\r\n\t\treturn options;\r\n\t},\r\n\r\n\t_buttonOptions: function( position ) {\r\n\t\treturn this._buildSimpleOptions( position, \"ui-button\" );\r\n\t},\r\n\r\n\t_checkboxradioOptions: function( position ) {\r\n\t\treturn this._buildSimpleOptions( position, \"ui-checkboxradio-label\" );\r\n\t},\r\n\r\n\t_selectmenuOptions: function( position ) {\r\n\t\tvar direction = this.options.direction === \"vertical\";\r\n\t\treturn {\r\n\t\t\twidth: direction ? \"auto\" : false,\r\n\t\t\tclasses: {\r\n\t\t\t\tmiddle: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"\"\r\n\t\t\t\t},\r\n\t\t\t\tfirst: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-\" + ( direction ? \"top\" : \"tl\" ),\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" )\r\n\t\t\t\t},\r\n\t\t\t\tlast: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": direction ? \"\" : \"ui-corner-tr\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" )\r\n\t\t\t\t},\r\n\t\t\t\tonly: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-top\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-all\"\r\n\t\t\t\t}\r\n\r\n\t\t\t}[ position ]\r\n\t\t};\r\n\t},\r\n\r\n\t_resolveClassesValues: function( classes, instance ) {\r\n\t\tvar result = {};\r\n\t\t$.each( classes, function( key ) {\r\n\t\t\tvar current = instance.options.classes[ key ] || \"\";\r\n\t\t\tcurrent = $.trim( current.replace( controlgroupCornerRegex, \"\" ) );\r\n\t\t\tresult[ key ] = ( current + \" \" + classes[ key ] ).replace( /\\s+/g, \" \" );\r\n\t\t} );\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"direction\" ) {\r\n\t\t\tthis._removeClass( \"ui-controlgroup-\" + this.options.direction );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis._callChildMethod( value ? \"disable\" : \"enable\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar children,\r\n\t\t\tthat = this;\r\n\r\n\t\tthis._addClass( \"ui-controlgroup ui-controlgroup-\" + this.options.direction );\r\n\r\n\t\tif ( this.options.direction === \"horizontal\" ) {\r\n\t\t\tthis._addClass( null, \"ui-helper-clearfix\" );\r\n\t\t}\r\n\t\tthis._initWidgets();\r\n\r\n\t\tchildren = this.childWidgets;\r\n\r\n\t\t// We filter here because we need to track all childWidgets not just the visible ones\r\n\t\tif ( this.options.onlyVisible ) {\r\n\t\t\tchildren = children.filter( \":visible\" );\r\n\t\t}\r\n\r\n\t\tif ( children.length ) {\r\n\r\n\t\t\t// We do this last because we need to make sure all enhancment is done\r\n\t\t\t// before determining first and last\r\n\t\t\t$.each( [ \"first\", \"last\" ], function( index, value ) {\r\n\t\t\t\tvar instance = children[ value ]().data( \"ui-controlgroup-data\" );\r\n\r\n\t\t\t\tif ( instance && that[ \"_\" + instance.widgetName + \"Options\" ] ) {\r\n\t\t\t\t\tvar options = that[ \"_\" + instance.widgetName + \"Options\" ](\r\n\t\t\t\t\t\tchildren.length === 1 ? \"only\" : value\r\n\t\t\t\t\t);\r\n\t\t\t\t\toptions.classes = that._resolveClassesValues( options.classes, instance );\r\n\t\t\t\t\tinstance.element[ instance.widgetName ]( options );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat._updateCornerClass( children[ value ](), value );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Finally call the refresh method on each of the child widgets.\r\n\t\t\tthis._callChildMethod( \"refresh\" );\r\n\t\t}\r\n\t}\r\n} );\r\n});\r\n"]}