/**
 * skylark-langx-emitter - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,n){var e=n.define,require=n.require,r="function"==typeof e&&e.amd,i=!r&&"undefined"!=typeof exports;if(!r&&!e){var a={};e=n.define=function(t,n,e){"function"==typeof e?(a[t]={factory:e,deps:n.map(function(n){return function(t,n){if("."!==t[0])return t;var e=n.split("/"),r=t.split("/");e.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?e.pop():e.push(r[i]));return e.join("/")}(n,t)}),resolved:!1,exports:null},require(t)):a[t]={factory:null,resolved:!0,exports:e}},require=n.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=a[t];if(!module.resolved){var e=[];module.deps.forEach(function(t){e.push(require(t))}),module.exports=module.factory.apply(n,e)||null,module.resolved=!0}return module.exports}}if(!e)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-langx-emitter/Event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass"],function(t,n,e){var r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function i(e,i){return!i&&e.isDefaultPrevented||(i||(i=e),t.each(r,function(t,r){var a=i[t];e[t]=function(){return this[r]=n.returnTrue,a&&a.apply(i,arguments)},e[r]=n.returnFalse})),e}class a extends CustomEvent{constructor(n,e){super(n,e),t.safeMixin(this,e),i(this)}}return a.compatible=i,a}),t("skylark-langx-emitter/Emitter",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./Event"],function(t,n,e,r,i,a){var s=Array.prototype.slice,o=r.compact,l=n.isDefined,u=n.isPlainObject,f=n.isFunction,h=n.isString,c=n.isEmptyObject,p=e.mixin;e.safeMixin;function v(t){var n=(""+t).split(".");return{name:n[0],ns:n.slice(1).join(" ")}}var d=i({on:function(t,n,e,r,i,a){var s=this,o=this._hub||(this._hub={});return u(t)?(i=r,each(t,function(t,r){s.on(t,n,e,r,i,a)}),this):(h(n)||f(r)||(i=r,r=e,e=n,n=void 0),f(e)&&(i=r,r=e,e=null),h(t)&&(t=t.split(/\s/)),t.forEach(function(t){var s=v(t),l=s.name,u=s.ns;(o[l]||(o[l]=[])).push({fn:r,selector:n,data:e,ctx:i,ns:u,one:a})}),this)},one:function(t,n,e,r,i){return this.on(t,n,e,r,i,1)},emit:function(t){if(!this._hub)return this;var n=this;h(t)&&(t=new a(t)),Object.defineProperty(t,"target",{value:this});var e=s.call(arguments,1);return e=l(e)?[t].concat(e):[t],[t.type||t.name,"all"].forEach(function(r){var i=v(r),a=i.name,s=i.ns,l=n._hub[a];if(l){for(var u=l.length,f=!1,h=0;h<u;h++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var c=l[h];(!s||c.ns&&c.ns.startsWith(s))&&(t.data?c.data&&(t.data=p({},c.data,t.data)):t.data=c.data||null,c.fn.apply(c.ctx,e),c.one&&(l[h]=null,f=!0))}f&&(n._hub[r]=o(l))}}),this},listened:function(t){var n=(this._hub||(this._events={}))[t]||[];return n.length>0},listenTo:function(t,n,e,r){if(!t)return this;h(e)&&(e=this[e]),r?t.one(n,e,this):t.on(n,e,this);for(var i,a=this._listeningTo||(this._listeningTo=[]),s=0;s<a.length;s++)if(a[s].obj==t){i=a[s];break}i||a.push(i={obj:t,events:{}});var o=i.events,l=o[n]=o[n]||[];return-1==l.indexOf(e)&&l.push(e),this},listenToOnce:function(t,n,e){return this.listenTo(t,n,e,1)},off:function(t,n){var e=this._hub||(this._hub={});return h(t)&&(t=t.split(/\s/)),t.forEach(function(t){var r=v(t),i=r.name,a=r.ns,s=e[i];if(s){var o=[];if(n||a)for(var l=0,u=s.length;l<u;l++)n&&s[l].fn!==n&&s[l].fn._!==n?o.push(s[l]):!a||s[l].ns&&0==s[l].ns.indexOf(a)||o.push(s[l]);o.length?e[i]=o:delete e[i]}}),this},unlistenTo:function(t,n,e){var r=this._listeningTo;if(!r)return this;for(var i=0;i<r.length;i++){var a=r[i];if(!t||t==a.obj){var s=a.events;for(var l in s)if(!n||n==l){for(var u=s[l],f=0;f<u.length;f++)e&&e!=u[i]||(a.obj.off(l,u[i],this),u[i]=null);u=s[l]=o(u),c(u)&&(s[l]=null)}c(s)&&(r[i]=null)}}return r=this._listeningTo=o(r),c(r)&&(this._listeningTo=null),this},trigger:function(){return this.emit.apply(this,arguments)}});return d.createEvent=function(t,n){return new a(t,n)},d.Event=a,t.attach("langx.Emitter",d)}),t("skylark-langx-emitter/Evented",["skylark-langx-ns/ns","./Emitter"],function(t,n){return t.attach("langx.Evented",n)}),t("skylark-langx-emitter/main",["./Emitter","./Evented"],function(t){return t}),t("skylark-langx-emitter",["skylark-langx-emitter/main"],function(t){return t})}(e),!r){var s=require("skylark-langx-ns");i?module.exports=s:n.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-emitter.js.map
