/**
 * skylark-langx-emitter - The skylark JavaScript language extension library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(n,t){var e=t.define,r=t.require,i="function"==typeof e&&e.amd,s=!i&&"undefined"!=typeof exports;if(!i&&!e){var a={};e=t.define=function(n,t,e){"function"==typeof e?(a[n]={factory:e,deps:t.map(function(t){return function(n,t){if("."!==n[0])return n;var e=t.split("/"),r=n.split("/");e.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?e.pop():e.push(r[i]));return e.join("/")}(t,n)}),resolved:!1,exports:null},r(n)):a[n]={factory:null,resolved:!0,exports:e}},r=t.require=function(n){if(!a.hasOwnProperty(n))throw new Error("Module "+n+" has not been defined");var e=a[n];if(!e.resolved){var i=[];e.deps.forEach(function(n){i.push(r(n))}),e.exports=e.factory.apply(t,i)||null,e.resolved=!0}return e.exports}}if(!e)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(n,t){n("skylark-langx-emitter/Emitter",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass"],function(n,t,e,r,i){var s=Array.prototype.slice,a=r.compact,o=t.isDefined,l=t.isPlainObject,u=t.isFunction,f=t.isString,h=t.isEmptyObject,c=e.mixin,v=e.safeMixin;function p(n){var t=(""+n).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var d=i({on:function(n,t,e,r,i,s){var a=this,o=this._hub||(this._hub={});return l(n)?(i=r,each(n,function(n,r){a.on(n,t,e,r,i,s)}),this):(f(t)||u(r)||(i=r,r=e,e=t,t=void 0),u(e)&&(i=r,r=e,e=null),f(n)&&(n=n.split(/\s/)),n.forEach(function(n){var a=p(n),l=a.name,u=a.ns;(o[l]||(o[l]=[])).push({fn:r,selector:t,data:e,ctx:i,ns:u,one:s})}),this)},one:function(n,t,e,r,i){return this.on(n,t,e,r,i,1)},emit:function(n){if(!this._hub)return this;var t=this;f(n)&&(n=new CustomEvent(n)),Object.defineProperty(n,"target",{value:this});var e=s.call(arguments,1);return e=o(e)?[n].concat(e):[n],[n.type||n.name,"all"].forEach(function(r){var i=p(r),s=i.name,o=i.ns,l=t._hub[s];if(l){for(var u=l.length,f=!1,h=0;h<u;h++){var v=l[h];(!o||v.ns&&v.ns.startsWith(o))&&(n.data?v.data&&(n.data=c({},v.data,n.data)):n.data=v.data||null,v.fn.apply(v.ctx,e),v.one&&(l[h]=null,f=!0))}f&&(t._hub[r]=a(l))}}),this},listened:function(n){var t=(this._hub||(this._events={}))[n]||[];return t.length>0},listenTo:function(n,t,e,r){if(!n)return this;f(e)&&(e=this[e]),r?n.one(t,e,this):n.on(t,e,this);for(var i,s=this._listeningTo||(this._listeningTo=[]),a=0;a<s.length;a++)if(s[a].obj==n){i=s[a];break}i||s.push(i={obj:n,events:{}});var o=i.events,l=o[t]=o[t]||[];return-1==l.indexOf(e)&&l.push(e),this},listenToOnce:function(n,t,e){return this.listenTo(n,t,e,1)},off:function(n,t){var e=this._hub||(this._hub={});return f(n)&&(n=n.split(/\s/)),n.forEach(function(n){var r=p(n),i=r.name,s=r.ns,a=e[i];if(a){var o=[];if(t||s)for(var l=0,u=a.length;l<u;l++)t&&a[l].fn!==t&&a[l].fn._!==t?o.push(a[l]):!s||a[l].ns&&0==a[l].ns.indexOf(s)||o.push(a[l]);o.length?e[i]=o:delete e[i]}}),this},unlistenTo:function(n,t,e){var r=this._listeningTo;if(!r)return this;for(var i=0;i<r.length;i++){var s=r[i];if(!n||n==s.obj){var o=s.events;for(var l in o)if(!t||t==l){for(var u=o[l],f=0;f<u.length;f++)e&&e!=u[i]||(s.obj.off(l,u[i],this),u[i]=null);u=o[l]=a(u),h(u)&&(o[l]=null)}h(o)&&(r[i]=null)}}return r=this._listeningTo=a(r),h(r)&&(this._listeningTo=null),this},trigger:function(){return this.emit.apply(this,arguments)}});return d.createEvent=function(n,t){var e=new CustomEvent(n,t);return v(e,t)},n.attach("langx.Emitter",d)}),n("skylark-langx-emitter/Evented",["skylark-langx-ns/ns","./Emitter"],function(n,t){return n.attach("langx.Evented",t)}),n("skylark-langx-emitter/main",["./Emitter","./Evented"],function(n){return n}),n("skylark-langx-emitter",["skylark-langx-emitter/main"],function(n){return n})}(e),!i){var o=r("skylark-langx/skylark");s?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-emitter.js.map
