{"version":3,"sources":["views/TableView.js"],"names":["define","langx","browser","eventer","noder","geom","$","views","ViewBase","TableView","inherit","klassName","options","columnRendered","columnSizing","columnSyncing","highlightSortedColumn","infiniteScroll","noItemsHTML","selectable","sortClearing","rowRendered","frozenColumns","actions","clearSelectedItems","this","repeater","$canvas","find","remove","removeClass","highlightColumn","index","force","tbody","each","filter","parent","hasClass","addClass","getSelectedItems","selected","$item","push","data","element","positionHeadings","$wrapper","$element","offsetLeft","offset","left","scrollLeft","$heading","parents","css","setSelectedItems","itms","i","length","self","items","isArray","checkIfItemMatchesValue","rowIndex","property","value","selectItem","$itm","slct","$frozenCols","undefined","prepend","sizeHeadings","$th","height","outerHeight","outerWidth","setFrozenColumns","frozenTable","$table","repeaterWrapper","numFrozenColumns","$frozenColumnWrapper","insertBefore","$frozenColumn","clone","$frozenThead","$frozenTheadWrapper","append","$checkboxLabel","attr","sizeFrozenColumns","on","click","positionColumns","scrollTop","frozenEnabled","actionsEnabled","canvasWidth","shouldScroll","createItemActions","actionsHtml","$actionsTable","action","html","name","actionsDropdown","$actionsColumnWrapper","actions_width","$actionsColumn","label","rowNumber","sizeActionsTable","e","isDisabled","actionName","rows","getActionItems","selector","selectorIndex","selectedObj","actionObj","grep","selectedRowsL","clickedRow","item","rowData","clickAction","$actionsTableHeader","columnWidth","width","frozenOptionsInitialize","$checkboxes","$headerCheckbox","$everyTable","type","checkbox","$rowCheckboxes","$checkAll","revertCheckbox","$checkbox","revertingCheckbox","preventDefault","currentTarget","row","parseInt","numSelected","prop","is","trigger","cleared","dataOptions","sortDirection","sortProperty","enabled","helpers","status","removeAttr","toggleActionsHeaderButton","call","initialize","callback","specialBrowserClass","noItems","resize","sizeColumns","opts","infScroll","firstRender","$loader","infiniteScrolling","before","$listContainer","container","count","renderThead","renderTbody","renderItem","renderRow","subset","after","$sorted","renderColumn","$row","columns","columnIndex","className","content","$col","_auto_width","checkBoxMarkup","renderHeader","$tr","$both","sortable","$span","$spans","chevDown","chevUp","$div","$header","add","render","clearInfinite","pageIncrement","$tbody","isMulti","isActions","$repeater","$frozenRow","$actionsRow","$checkBox","keyup","keyCode","colLength","columnAttr","$empty","error","$thead","oldCols","newCols","newColsL","j","hasOwnProperty","areDifferentColumns","splice","actionsColumn","checkboxWidth","column","newWidth","widthTaken","automaticallyGeneratedWidths","col","minWidth","Math","floor","ua","window","navigator","userAgent","msie","indexOf","firefox","substring","selectedSelector","ctor"],"mappings":"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","file":"../../views/TableView.js","sourcesContent":["define([\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-browser\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-query\",\r\n    \"../views\",   \r\n    \"./ViewBase\"\r\n], function(langx, browser, eventer, noder, geom, $, views, ViewBase) {\r\n\r\n  var TableView = ViewBase.inherit({\r\n    klassName : \"TableView\",\r\n\r\n    options: {\r\n        columnRendered: null,\r\n        columnSizing: true,\r\n        columnSyncing: true,\r\n        highlightSortedColumn: true,\r\n        infiniteScroll: false,\r\n        noItemsHTML: 'no items found',\r\n        selectable: false,\r\n        sortClearing: false,\r\n        rowRendered: null,\r\n        frozenColumns: 0,\r\n        actions: false\r\n    },\r\n\r\n    clearSelectedItems : function listClearSelectedItems () {\r\n        this.repeater.$canvas.find('.repeater-table-check').remove();\r\n        this.repeater.$canvas.find('.repeater-table table tbody tr.selected').removeClass('selected');\r\n    },\r\n\r\n    highlightColumn : function listHighlightColumn (index, force) {\r\n        var tbody = this.repeater.$canvas.find('.repeater-table-wrapper > table tbody');\r\n        if (this.options.highlightSortedColumn || force) {\r\n            tbody.find('td.sorted').removeClass('sorted');\r\n            tbody.find('tr').each(function eachTR () {\r\n                var col = $(this).find('td:nth-child(' + (index + 1) + ')').filter(function filterChildren () { return !$(this).parent().hasClass('empty'); });\r\n                col.addClass('sorted');\r\n            });\r\n        }\r\n    },\r\n\r\n    getSelectedItems : function listGetSelectedItems () {\r\n        var selected = [];\r\n        this.repeater.$canvas.find('.repeater-table .repeater-table-wrapper > table tbody tr.selected').each(function eachSelectedTR () {\r\n            var $item = $(this);\r\n            selected.push({\r\n                data: $item.data('item_data'),\r\n                element: $item\r\n            });\r\n        });\r\n        return selected;\r\n    },\r\n\r\n    positionHeadings : function listPositionHeadings () {\r\n        var $wrapper = this.repeater.$element.find('.repeater-table-wrapper');\r\n        var offsetLeft = $wrapper.offset().left;\r\n        var scrollLeft = $wrapper.scrollLeft();\r\n        if (scrollLeft > 0) {\r\n            $wrapper.find('.repeater-table-heading').each(function eachListHeading () {\r\n                var $heading = $(this);\r\n                var left = ($heading.parents('th:first').offset().left - offsetLeft) + 'px';\r\n                $heading.addClass('shifted').css('left', left);\r\n            });\r\n        } else {\r\n            $wrapper.find('.repeater-table-heading').each(function eachListHeading () {\r\n                $(this).removeClass('shifted').css('left', '');\r\n            });\r\n        }\r\n    },\r\n\r\n    setSelectedItems : function listSetSelectedItems (itms, force) {\r\n        var selectable = this.options.selectable;\r\n        var self = this;\r\n        var data;\r\n        var i;\r\n        var $item;\r\n        var length;\r\n\r\n        var items = itms;\r\n        if (!$.isArray(items)) {\r\n            items = [items];\r\n        }\r\n\r\n        // this function is necessary because lint yells when a function is in a loop\r\n        var checkIfItemMatchesValue = function checkIfItemMatchesValue (rowIndex) {\r\n            $item = $(this);\r\n\r\n            data = $item.data('item_data') || {};\r\n            if (data[items[i].property] === items[i].value) {\r\n                selectItem($item, items[i].selected, rowIndex);\r\n            }\r\n        };\r\n\r\n        var selectItem = function selectItem ($itm, slct, index) {\r\n            var $frozenCols;\r\n\r\n            var select = (slct !== undefined) ? slct : true;\r\n            if (select) {\r\n                if (!force && selectable !== 'multi') {\r\n                    self.clearSelectedItems();\r\n                }\r\n\r\n                if (!$itm.hasClass('selected')) {\r\n                    $itm.addClass('selected');\r\n\r\n                    if (self.options.frozenColumns || self.options.selectable === 'multi') {\r\n                        $frozenCols = self.repeater.$element.find('.frozen-column-wrapper tr:nth-child(' + (index + 1) + ')');\r\n\r\n                        $frozenCols.addClass('selected');\r\n                        $frozenCols.find('.repeater-select-checkbox').addClass('checked');\r\n                    }\r\n\r\n                    if (self.options.actions) {\r\n                        self.repeater.$element.find('.actions-column-wrapper tr:nth-child(' + (index + 1) + ')').addClass('selected');\r\n                    }\r\n\r\n                    $itm.find('td:first').prepend('<div class=\"repeater-table-check\"><span class=\"glyphicon glyphicon-ok\"></span></div>');\r\n                }\r\n            } else {\r\n                if (self.options.frozenColumns) {\r\n                    $frozenCols = self.repeater.$element.find('.frozen-column-wrapper tr:nth-child(' + (index + 1) + ')');\r\n\r\n                    $frozenCols.addClass('selected');\r\n                    $frozenCols.find('.repeater-select-checkbox').removeClass('checked');\r\n                }\r\n\r\n                if (self.options.actions) {\r\n                    self.repeater.$element.find('.actions-column-wrapper tr:nth-child(' + (index + 1) + ')').removeClass('selected');\r\n                }\r\n\r\n                $itm.find('.repeater-table-check').remove();\r\n                $itm.removeClass('selected');\r\n            }\r\n        };\r\n\r\n        if (force === true || selectable === 'multi') {\r\n            length = items.length;\r\n        } else if (selectable) {\r\n            length = (items.length > 0) ? 1 : 0;\r\n        } else {\r\n            length = 0;\r\n        }\r\n\r\n        for (i = 0; i < length; i++) {\r\n            if (items[i].index !== undefined) {\r\n                $item = this.repeater.$canvas.find('.repeater-table .repeater-table-wrapper > table tbody tr:nth-child(' + (items[i].index + 1) + ')');\r\n                if ($item.length > 0) {\r\n                    selectItem($item, items[i].selected, items[i].index);\r\n                }\r\n            } else if (items[i].property !== undefined && items[i].value !== undefined) {\r\n                this.repeater.$canvas.find('.repeater-table .repeater-table-wrapper > table tbody tr').each(checkIfItemMatchesValue);\r\n            }\r\n        }\r\n    },\r\n\r\n    sizeHeadings : function listSizeHeadings () {\r\n        var $table = this.repeater.$element.find('.repeater-table table');\r\n        $table.find('thead th').each(function eachTH () {\r\n            var $th = $(this);\r\n            var $heading = $th.find('.repeater-table-heading');\r\n            $heading.css({ height: $th.outerHeight() });\r\n            $heading.outerWidth($heading.data('forced-width') || $th.outerWidth());\r\n        });\r\n    },\r\n\r\n    setFrozenColumns : function listSetFrozenColumns () {\r\n        var frozenTable = this.repeater.$canvas.find('.table-frozen');\r\n        var $wrapper = this.repeater.$element.find('.repeater-canvas');\r\n        var $table = this.repeater.$element.find('.repeater-table .repeater-table-wrapper > table');\r\n        var repeaterWrapper = this.repeater.$element.find('.repeater-table');\r\n        var numFrozenColumns = this.options.frozenColumns;\r\n        var self = this;\r\n\r\n        if (this.options.selectable === 'multi') {\r\n            numFrozenColumns = numFrozenColumns + 1;\r\n            $wrapper.addClass('multi-select-enabled');\r\n        }\r\n\r\n        if (frozenTable.length < 1) {\r\n            // setup frozen column markup\r\n            // main wrapper and remove unneeded columns\r\n            var $frozenColumnWrapper = $('<div class=\"frozen-column-wrapper\"></div>').insertBefore($table);\r\n            var $frozenColumn = $table.clone().addClass('table-frozen');\r\n            $frozenColumn.find('th:not(:lt(' + numFrozenColumns + '))').remove();\r\n            $frozenColumn.find('td:not(:nth-child(n+0):nth-child(-n+' + numFrozenColumns + '))').remove();\r\n\r\n            // need to set absolute heading for vertical scrolling\r\n            var $frozenThead = $frozenColumn.clone().removeClass('table-frozen');\r\n            $frozenThead.find('tbody').remove();\r\n            var $frozenTheadWrapper = $('<div class=\"frozen-thead-wrapper\"></div>').append($frozenThead);\r\n\r\n            // this gets a little messy with all the cloning. We need to make sure the ID and FOR\r\n            // attribs are unique for the 'top most' cloned checkbox\r\n            var $checkboxLabel = $frozenTheadWrapper.find('th label.checkbox-custom.checkbox-inline');\r\n            $checkboxLabel.attr('id', $checkboxLabel.attr('id') + '_cloned');\r\n\r\n            $frozenColumnWrapper.append($frozenColumn);\r\n            repeaterWrapper.append($frozenTheadWrapper);\r\n            this.repeater.$canvas.addClass('frozen-enabled');\r\n        }\r\n\r\n        this.sizeFrozenColumns();\r\n\r\n        $('.frozen-thead-wrapper .repeater-table-heading').on('click', function onClickHeading () {\r\n            var index = $(this).parent('th').index();\r\n            index = index + 1;\r\n            self.repeater.$element.find('.repeater-table-wrapper > table thead th:nth-child(' + index + ') .repeater-table-heading')[0].click();\r\n        });\r\n    },\r\n\r\n    positionColumns : function listPositionColumns () {\r\n        var $wrapper = this.repeater.$element.find('.repeater-canvas');\r\n        var scrollTop = $wrapper.scrollTop();\r\n        var scrollLeft = $wrapper.scrollLeft();\r\n        var frozenEnabled = this.options.frozenColumns || this.options.selectable === 'multi';\r\n        var actionsEnabled = this.options.actions;\r\n\r\n        var canvasWidth = this.repeater.$element.find('.repeater-canvas').outerWidth();\r\n        var tableWidth = this.repeater.$element.find('.repeater-table .repeater-table-wrapper > table').outerWidth();\r\n\r\n        var actionsWidth = this.repeater.$element.find('.table-actions') ? this.repeater.$element.find('.table-actions').outerWidth() : 0;\r\n\r\n        var shouldScroll = (tableWidth - (canvasWidth - actionsWidth)) >= scrollLeft;\r\n\r\n\r\n        if (scrollTop > 0) {\r\n            $wrapper.find('.repeater-table-heading').css('top', scrollTop);\r\n        } else {\r\n            $wrapper.find('.repeater-table-heading').css('top', '0');\r\n        }\r\n\r\n        if (scrollLeft > 0) {\r\n            if (frozenEnabled) {\r\n                $wrapper.find('.frozen-thead-wrapper').css('left', scrollLeft);\r\n                $wrapper.find('.frozen-column-wrapper').css('left', scrollLeft);\r\n            }\r\n            if (actionsEnabled && shouldScroll) {\r\n                $wrapper.find('.actions-thead-wrapper').css('right', -scrollLeft);\r\n                $wrapper.find('.actions-column-wrapper').css('right', -scrollLeft);\r\n            }\r\n        } else {\r\n            if (frozenEnabled) {\r\n                $wrapper.find('.frozen-thead-wrapper').css('left', '0');\r\n                $wrapper.find('.frozen-column-wrapper').css('left', '0');\r\n            }\r\n            if (actionsEnabled) {\r\n                $wrapper.find('.actions-thead-wrapper').css('right', '0');\r\n                $wrapper.find('.actions-column-wrapper').css('right', '0');\r\n            }\r\n        }\r\n    },\r\n\r\n    createItemActions : function listCreateItemActions () {\r\n        var actionsHtml = '';\r\n        var self = this;\r\n        var i;\r\n        var length;\r\n        var $table = this.repeater.$element.find('.repeater-table .repeater-table-wrapper > table');\r\n        var $actionsTable = this.repeater.$canvas.find('.table-actions');\r\n\r\n        for (i = 0, length = this.options.actions.items.length; i < length; i++) {\r\n            var action = this.options.actions.items[i];\r\n            var html = action.html;\r\n\r\n            actionsHtml += '<li><a href=\"#\" data-action=\"' + action.name + '\" class=\"action-item\"> ' + html + '</a></li>';\r\n        }\r\n\r\n        var actionsDropdown = '<div class=\"btn-group\">' +\r\n            '<button type=\"button\" class=\"btn btn-xs btn-default dropdown-toggle repeater-actions-button\" data-toggle=\"dropdown\" data-flip=\"auto\" aria-expanded=\"false\">' +\r\n            '<span class=\"caret\"></span>' +\r\n            '</button>' +\r\n            '<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">' +\r\n            actionsHtml +\r\n            '</ul></div>';\r\n\r\n        if ($actionsTable.length < 1) {\r\n            var $actionsColumnWrapper = $('<div class=\"actions-column-wrapper\" style=\"width: ' + this.actions_width + 'px\"></div>').insertBefore($table);\r\n            var $actionsColumn = $table.clone().addClass('table-actions');\r\n            $actionsColumn.find('th:not(:last-child)').remove();\r\n            $actionsColumn.find('tr td:not(:last-child)').remove();\r\n\r\n            // Dont show actions dropdown in header if not multi select\r\n            if (this.options.selectable === 'multi' || this.options.selectable === 'action') {\r\n                $actionsColumn.find('thead tr').html('<th><div class=\"repeater-table-heading\">' + actionsDropdown + '</div></th>');\r\n\r\n                if (this.options.selectable !== 'action') {\r\n                    // disable the header dropdown until an item is selected\r\n                    $actionsColumn.find('thead .btn').attr('disabled', 'disabled');\r\n                }\r\n            } else {\r\n                var label = this.options.actions.label || '<span class=\"actions-hidden\">a</span>';\r\n                $actionsColumn.find('thead tr').addClass('empty-heading').html('<th>' + label + '<div class=\"repeater-table-heading\">' + label + '</div></th>');\r\n            }\r\n\r\n            // Create Actions dropdown for each cell in actions table\r\n            var $actionsCells = $actionsColumn.find('td');\r\n\r\n            $actionsCells.each(function addActionsDropdown (rowNumber) {\r\n                $(this).html(actionsDropdown);\r\n                $(this).find('a').attr('data-row', rowNumber + 1);\r\n            });\r\n\r\n            $actionsColumnWrapper.append($actionsColumn);\r\n\r\n            this.repeater.$canvas.addClass('actions-enabled');\r\n        }\r\n\r\n        this.sizeActionsTable();\r\n\r\n        // row level actions click\r\n        this.repeater.$element.find('.table-actions tbody .action-item').on('click', function onBodyActionItemClick (e) {\r\n            if (!self.isDisabled) {\r\n                var actionName = $(this).data('action');\r\n                var row = $(this).data('row');\r\n                var selected = {\r\n                    actionName: actionName,\r\n                    rows: [row]\r\n                };\r\n                self.getActionItems(selected, e);\r\n            }\r\n        });\r\n        // bulk actions click\r\n        this.repeater.$element.find('.table-actions thead .action-item').on('click', function onHeadActionItemClick (e) {\r\n            if (!self.isDisabled) {\r\n                var actionName = $(this).data('action');\r\n                var selected = {\r\n                    actionName: actionName,\r\n                    rows: []\r\n                };\r\n                var selector = '.repeater-table-wrapper > table .selected';\r\n\r\n                if ( self.options.selectable === 'action' ) {\r\n                    selector = '.repeater-table-wrapper > table tr';\r\n                }\r\n                self.repeater.$element.find(selector).each(function eachSelector (selectorIndex) {\r\n                    selected.rows.push(selectorIndex + 1);\r\n                });\r\n\r\n                self.getActionItems(selected, e);\r\n            }\r\n        });\r\n    },\r\n\r\n    getActionItems : function listGetActionItems (selected, e) {\r\n        var selectedObj = [];\r\n        var actionObj = $.grep(this.options.actions.items, function matchedActions (actions) {\r\n            return actions.name === selected.actionName;\r\n        })[0];\r\n        for (var i = 0, selectedRowsL = selected.rows.length; i < selectedRowsL; i++) {\r\n            var clickedRow = this.repeater.$canvas.find('.repeater-table-wrapper > table tbody tr:nth-child(' + selected.rows[i] + ')');\r\n            selectedObj.push({\r\n                item: clickedRow,\r\n                rowData: clickedRow.data('item_data')\r\n            });\r\n        }\r\n        if (selectedObj.length === 1) {\r\n            selectedObj = selectedObj[0];\r\n        }\r\n\r\n        if (actionObj.clickAction) {\r\n            var callback = function noop () {};// for backwards compatibility. No idea why this was originally here...\r\n            actionObj.clickAction(selectedObj, callback, e);\r\n        }\r\n    },\r\n\r\n    sizeActionsTable : function listSizeActionsTable () {\r\n        var $actionsTable = this.repeater.$element.find('.repeater-table table.table-actions');\r\n        var $actionsTableHeader = $actionsTable.find('thead tr th');\r\n        var $table = this.repeater.$element.find('.repeater-table-wrapper > table');\r\n\r\n        $actionsTableHeader.outerHeight($table.find('thead tr th').outerHeight());\r\n        $actionsTableHeader.find('.repeater-table-heading').outerHeight($actionsTableHeader.outerHeight());\r\n        $actionsTable.find('tbody tr td:first-child').each(function eachFirstChild (i) {\r\n            $(this).outerHeight($table.find('tbody tr:eq(' + i + ') td').outerHeight());\r\n        });\r\n    },\r\n\r\n    sizeFrozenColumns : function listSizeFrozenColumns () {\r\n        var $table = this.repeater.$element.find('.repeater-table .repeater-table-wrapper > table');\r\n\r\n        this.repeater.$element.find('.repeater-table table.table-frozen tr').each(function eachTR (i) {\r\n            $(this).height($table.find('tr:eq(' + i + ')').height());\r\n        });\r\n\r\n        var columnWidth = $table.find('td:eq(0)').outerWidth();\r\n        this.repeater.$element.find('.frozen-column-wrapper, .frozen-thead-wrapper').width(columnWidth);\r\n    },\r\n\r\n    frozenOptionsInitialize : function listFrozenOptionsInitialize () {\r\n        var $checkboxes = this.repeater.$element.find('.frozen-column-wrapper .checkbox-inline');\r\n        var $headerCheckbox = this.repeater.$element.find('.header-checkbox .checkbox-custom');\r\n        var $everyTable = this.repeater.$element.find('.repeater-table table');\r\n        var self = this;\r\n\r\n        // Make sure if row is hovered that it is shown in frozen column as well\r\n        this.repeater.$element.find('tr.selectable').on('mouseover mouseleave', function onMouseEvents (e) {\r\n            var index = $(this).index();\r\n            index = index + 1;\r\n            if (e.type === 'mouseover') {\r\n                $everyTable.find('tbody tr:nth-child(' + index + ')').addClass('hovered');\r\n            } else {\r\n                $everyTable.find('tbody tr:nth-child(' + index + ')').removeClass('hovered');\r\n            }\r\n        });\r\n\r\n        $headerCheckbox.checkbox();\r\n        $checkboxes.checkbox();\r\n\r\n        // Row checkboxes\r\n        var $rowCheckboxes = this.repeater.$element.find('.table-frozen tbody .checkbox-inline');\r\n        var $checkAll = this.repeater.$element.find('.frozen-thead-wrapper thead .checkbox-inline input');\r\n        $rowCheckboxes.on('change', function onChangeRowCheckboxes (e) {\r\n            e.preventDefault();\r\n\r\n            if (!self.revertingCheckbox) {\r\n                if (self.isDisabled) {\r\n                    revertCheckbox($(e.currentTarget));\r\n                } else {\r\n                    var row = $(this).attr('data-row');\r\n                    row = parseInt(row, 10) + 1;\r\n                    self.repeater.$element.find('.repeater-table-wrapper > table tbody tr:nth-child(' + row + ')').click();\r\n\r\n                    var numSelected = self.repeater.$element.find('.table-frozen tbody .checkbox-inline.checked').length;\r\n                    if (numSelected === 0) {\r\n                        $checkAll.prop('checked', false);\r\n                        $checkAll.prop('indeterminate', false);\r\n                    } else if (numSelected === $rowCheckboxes.length) {\r\n                        $checkAll.prop('checked', true);\r\n                        $checkAll.prop('indeterminate', false);\r\n                    } else {\r\n                        $checkAll.prop('checked', false);\r\n                        $checkAll.prop('indeterminate', true);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // \"Check All\" checkbox\r\n        $checkAll.on('change', function onChangeCheckAll (e) {\r\n            if (!self.revertingCheckbox) {\r\n                if (self.isDisabled) {\r\n                    revertCheckbox($(e.currentTarget));\r\n                } else if ($(this).is(':checked')) {\r\n                    self.repeater.$element.find('.repeater-table-wrapper > table tbody tr:not(.selected)').click();\r\n                    self.repeater.$element.trigger('selected.lark.repeaterList', $checkboxes);\r\n                } else {\r\n                    self.repeater.$element.find('.repeater-table-wrapper > table tbody tr.selected').click();\r\n                    self.repeater.$element.trigger('deselected.lark.repeaterList', $checkboxes);\r\n                }\r\n            }\r\n        });\r\n\r\n        function revertCheckbox ($checkbox) {\r\n            self.revertingCheckbox = true;\r\n            $checkbox.checkbox('toggle');\r\n            delete self.revertingCheckbox;\r\n        }\r\n    },\r\n\r\n    cleared: function cleared () {\r\n        if (this.options.columnSyncing) {\r\n            this.sizeHeadings();\r\n        }\r\n    },\r\n    dataOptions: function dataOptions (options) {\r\n        if (this.sortDirection) {\r\n            options.sortDirection = this.sortDirection;\r\n        }\r\n        if (this.sortProperty) {\r\n            options.sortProperty = this.sortProperty;\r\n        }\r\n        return options;\r\n    },\r\n    enabled: function enabled (helpers) {\r\n        if (this.options.actions) {\r\n            if (!helpers.status) {\r\n                this.repeater.$canvas.find('.repeater-actions-button').attr('disabled', 'disabled');\r\n            } else {\r\n                this.repeater.$canvas.find('.repeater-actions-button').removeAttr('disabled');\r\n                toggleActionsHeaderButton.call(this);\r\n            }\r\n        }\r\n    },\r\n    initialize: function initialize (helpers, callback) {\r\n        this.sortDirection = null;\r\n        this.sortProperty = null;\r\n        this.specialBrowserClass = specialBrowserClass();\r\n        this.actions_width = (this.options.actions.width !== undefined) ? this.options.actions.width : 37;\r\n        this.noItems = false;\r\n        callback();\r\n    },\r\n    resize: function resize () {\r\n        sizeColumns.call(this, this.repeater.$element.find('.repeater-table-wrapper > table thead tr'));\r\n        if (this.options.actions) {\r\n            this.sizeActionsTable();\r\n        }\r\n        if (this.options.frozenColumns || this.options.selectable === 'multi') {\r\n            this.sizeFrozenColumns();\r\n        }\r\n        if (this.options.columnSyncing) {\r\n            this.sizeHeadings();\r\n        }\r\n    },\r\n    selected: function selected () {\r\n        var infScroll = this.options.infiniteScroll;\r\n        var opts;\r\n\r\n        this.firstRender = true;\r\n        this.repeater.$loader.addClass('noHeader');\r\n\r\n        if (infScroll) {\r\n            opts = (typeof infScroll === 'object') ? infScroll : {};\r\n            this.repeater.infiniteScrolling(true, opts);\r\n        }\r\n    },\r\n    before: function before (helpers) {\r\n        var $listContainer = helpers.container.find('.repeater-table');\r\n        var self = this;\r\n        var $table;\r\n\r\n        // this is a patch, it was pulled out of `renderThead`\r\n        if (helpers.data.count > 0) {\r\n            this.noItems = false;\r\n        } else {\r\n            this.noItems = true;\r\n        }\r\n\r\n        if ($listContainer.length < 1) {\r\n            $listContainer = $('<div class=\"repeater-table ' + this.specialBrowserClass + '\" data-preserve=\"shallow\"><div class=\"repeater-table-wrapper\" data-infinite=\"true\" data-preserve=\"shallow\"><table aria-readonly=\"true\" class=\"table\" data-preserve=\"shallow\" role=\"grid\"></table></div></div>');\r\n            $listContainer.find('.repeater-table-wrapper').on('scroll.lark.repeaterList', function onScrollRepeaterList () {\r\n                if (self.options.columnSyncing) {\r\n                    self.positionHeadings();\r\n                }\r\n            });\r\n            if (self.options.frozenColumns || self.options.actions || self.options.selectable === 'multi') {\r\n                helpers.container.on('scroll.lark.repeaterList', function onScrollRepeaterList () {\r\n                    self.positionColumns();\r\n                });\r\n            }\r\n\r\n            helpers.container.append($listContainer);\r\n        }\r\n        helpers.container.removeClass('actions-enabled actions-enabled multi-select-enabled');\r\n\r\n        $table = $listContainer.find('table');\r\n        renderThead.call(this, $table, helpers.data);\r\n        renderTbody.call(this, $table, helpers.data);\r\n\r\n        return false;\r\n    },\r\n    renderItem: function renderItem (helpers) {\r\n        renderRow.call(this, helpers.container, helpers.subset, helpers.index);\r\n        return false;\r\n    },\r\n    after: function after () {\r\n        var $sorted;\r\n\r\n        if ((this.options.frozenColumns || this.options.selectable === 'multi') && !this.noItems) {\r\n            this.setFrozenColumns();\r\n        }\r\n\r\n        if (this.options.actions && !this.noItems) {\r\n            this.createItemActions();\r\n            this.sizeActionsTable();\r\n        }\r\n\r\n        if ((this.options.frozenColumns || this.options.actions || this.options.selectable === 'multi') && !this.noItems) {\r\n            this.positionColumns();\r\n            this.frozenOptionsInitialize();\r\n        }\r\n\r\n        if (this.options.columnSyncing) {\r\n            this.sizeHeadings();\r\n            this.positionHeadings();\r\n        }\r\n\r\n        $sorted = this.repeater.$canvas.find('.repeater-table-wrapper > table .repeater-table-heading.sorted');\r\n        if ($sorted.length > 0) {\r\n            this.highlightColumn($sorted.data('fu_item_index'));\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n\r\n    // ADDITIONAL METHODS\r\n    var areDifferentColumns = function areDifferentColumns (oldCols, newCols) {\r\n        if (!newCols) {\r\n            return false;\r\n        }\r\n        if (!oldCols || (newCols.length !== oldCols.length)) {\r\n            return true;\r\n        }\r\n        for (var i = 0, newColsL = newCols.length; i < newColsL; i++) {\r\n            if (!oldCols[i]) {\r\n                return true;\r\n            }\r\n\r\n            for (var j in newCols[i]) {\r\n                if (newCols[i].hasOwnProperty(j) && oldCols[i][j] !== newCols[i][j]) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    var renderColumn = function renderColumn ($row, rows, rowIndex, columns, columnIndex) {\r\n        var className = columns[columnIndex].className;\r\n        var content = rows[rowIndex][columns[columnIndex].property];\r\n        var $col = $('<td></td>');\r\n        var width = columns[columnIndex]._auto_width;\r\n\r\n        var property = columns[columnIndex].property;\r\n        if (this.options.actions !== false && property === '@_ACTIONS_@') {\r\n            content = '<div class=\"repeater-table-actions-placeholder\" style=\"width: ' + this.actions_width  + 'px\"></div>';\r\n        }\r\n\r\n        content = (content !== undefined) ? content : '';\r\n\r\n        $col.addClass(((className !== undefined) ? className : '')).append(content);\r\n        if (width !== undefined) {\r\n            $col.outerWidth(width);\r\n        }\r\n\r\n        $row.append($col);\r\n\r\n        if (this.options.selectable === 'multi' && columns[columnIndex].property === '@_CHECKBOX_@') {\r\n            var checkBoxMarkup = '<label data-row=\"' + rowIndex + '\" class=\"checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox\">' +\r\n                '<input class=\"sr-only\" type=\"checkbox\"></label>';\r\n\r\n            $col.html(checkBoxMarkup);\r\n        }\r\n\r\n        return $col;\r\n    };\r\n\r\n    var renderHeader = function renderHeader ($tr, columns, index) {\r\n        var chevDown = 'glyphicon-chevron-down';\r\n        var chevron = '.glyphicon.rlc:first';\r\n        var chevUp = 'glyphicon-chevron-up';\r\n        var $div = $('<div class=\"repeater-table-heading\"><span class=\"glyphicon rlc\"></span></div>');\r\n        var checkAllID = (this.repeater.$element.attr('id') + '_' || '') + 'checkall';\r\n\r\n        var checkBoxMarkup = '<div class=\"repeater-table-heading header-checkbox\">' +\r\n                '<label id=\"' + checkAllID + '\" class=\"checkbox-custom checkbox-inline\">' +\r\n                    '<input class=\"sr-only\" type=\"checkbox\" value=\"\">' +\r\n                    '<span class=\"checkbox-label\">&nbsp;</span>' +\r\n                '</label>' +\r\n            '</div>';\r\n\r\n        var $header = $('<th></th>');\r\n        var self = this;\r\n        var $both;\r\n        var className;\r\n        var sortable;\r\n        var $span;\r\n        var $spans;\r\n\r\n        $div.data('fu_item_index', index);\r\n        $div.prepend(columns[index].label);\r\n        $header.html($div.html()).find('[id]').removeAttr('id');\r\n\r\n        if (columns[index].property !== '@_CHECKBOX_@') {\r\n            $header.append($div);\r\n        } else {\r\n            $header.append(checkBoxMarkup);\r\n        }\r\n\r\n        $both = $header.add($div);\r\n        $span = $div.find(chevron);\r\n        $spans = $span.add($header.find(chevron));\r\n\r\n        if (this.options.actions && columns[index].property === '@_ACTIONS_@') {\r\n            var width = this.actions_width;\r\n            $header.css('width', width);\r\n            $div.css('width', width);\r\n        }\r\n\r\n        className = columns[index].className;\r\n        if (className !== undefined) {\r\n            $both.addClass(className);\r\n        }\r\n\r\n        sortable = columns[index].sortable;\r\n        if (sortable) {\r\n            $both.addClass('sortable');\r\n            $div.on('click.lark.repeaterList', function onClickRepeaterList () {\r\n                if (!self.isDisabled) {\r\n                    self.sortProperty = (typeof sortable === 'string') ? sortable : columns[index].property;\r\n                    if ($div.hasClass('sorted')) {\r\n                        if ($span.hasClass(chevUp)) {\r\n                            $spans.removeClass(chevUp).addClass(chevDown);\r\n                            self.sortDirection = 'desc';\r\n                        } else if (!self.options.sortClearing) {\r\n                            $spans.removeClass(chevDown).addClass(chevUp);\r\n                            self.sortDirection = 'asc';\r\n                        } else {\r\n                            $both.removeClass('sorted');\r\n                            $spans.removeClass(chevDown);\r\n                            self.sortDirection = null;\r\n                            self.sortProperty = null;\r\n                        }\r\n                    } else {\r\n                        $tr.find('th, .repeater-table-heading').removeClass('sorted');\r\n                        $spans.removeClass(chevDown).addClass(chevUp);\r\n                        self.sortDirection = 'asc';\r\n                        $both.addClass('sorted');\r\n                    }\r\n\r\n                    self.repeater.render({\r\n                        clearInfinite: true,\r\n                        pageIncrement: null\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        if (columns[index].sortDirection === 'asc' || columns[index].sortDirection === 'desc') {\r\n            $tr.find('th, .repeater-table-heading').removeClass('sorted');\r\n            $both.addClass('sortable sorted');\r\n            if (columns[index].sortDirection === 'asc') {\r\n                $spans.addClass(chevUp);\r\n                this.sortDirection = 'asc';\r\n            } else {\r\n                $spans.addClass(chevDown);\r\n                this.sortDirection = 'desc';\r\n            }\r\n\r\n            this.sortProperty = (typeof sortable === 'string') ? sortable : columns[index].property;\r\n        }\r\n\r\n        $tr.append($header);\r\n    };\r\n\r\n    var onClickRowRepeaterList = function onClickRowRepeaterList (repeater) {\r\n        var isMulti = repeater.options.selectable === 'multi';\r\n        var isActions = repeater.options.actions;\r\n        var $repeater = repeater.$element;\r\n\r\n        if (!repeater.isDisabled) {\r\n            var $item = $(this);\r\n            var index = $(this).index() + 1;\r\n            var $frozenRow = $repeater.find('.frozen-column-wrapper tr:nth-child(' + index + ')');\r\n            var $actionsRow = $repeater.find('.actions-column-wrapper tr:nth-child(' + index + ')');\r\n            var $checkBox = $repeater.find('.frozen-column-wrapper tr:nth-child(' + index + ') .checkbox-inline');\r\n\r\n            if ($item.is('.selected')) {\r\n                $item.removeClass('selected');\r\n                if (isMulti) {\r\n                    $checkBox.click();\r\n                    $frozenRow.removeClass('selected');\r\n                    if (isActions) {\r\n                        $actionsRow.removeClass('selected');\r\n                    }\r\n                } else {\r\n                    $item.find('.repeater-table-check').remove();\r\n                }\r\n\r\n                $repeater.trigger('deselected.lark.repeaterList', $item);\r\n            } else {\r\n                if (!isMulti) {\r\n                    repeater.$canvas.find('.repeater-table-check').remove();\r\n                    repeater.$canvas.find('.repeater-table tbody tr.selected').each(function deslectRow () {\r\n                        $(this).removeClass('selected');\r\n                        $repeater.trigger('deselected.lark.repeaterList', $(this));\r\n                    });\r\n                    $item.find('td:first').prepend('<div class=\"repeater-table-check\"><span class=\"glyphicon glyphicon-ok\"></span></div>');\r\n                    $item.addClass('selected');\r\n                    $frozenRow.addClass('selected');\r\n                } else {\r\n                    $checkBox.click();\r\n                    $item.addClass('selected');\r\n                    $frozenRow.addClass('selected');\r\n                    if (isActions) {\r\n                        $actionsRow.addClass('selected');\r\n                    }\r\n                }\r\n                $repeater.trigger('selected.lark.repeaterList', $item);\r\n            }\r\n\r\n            toggleActionsHeaderButton.call(repeater);\r\n        }\r\n    };\r\n\r\n    var renderRow = function renderRow ($tbody, rows, index) {\r\n        var $row = $('<tr></tr>');\r\n\r\n        if (this.options.selectable) {\r\n            $row.data('item_data', rows[index]);\r\n\r\n            if (this.options.selectable !== 'action') {\r\n                $row.addClass('selectable');\r\n                $row.attr('tabindex', 0);   // allow items to be tabbed to / focused on\r\n\r\n                var repeater = this;\r\n                $row.on('click.lark.repeaterList', function callOnClickRowRepeaterList() {\r\n                    onClickRowRepeaterList.call(this, repeater);\r\n                });\r\n\r\n                // allow selection via enter key\r\n                $row.keyup(function onRowKeyup (e) {\r\n                    if (e.keyCode === 13) {\r\n                        // triggering a standard click event to be caught by the row click handler above\r\n                        $row.trigger('click.lark.repeaterList');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        if (this.options.actions && !this.options.selectable) {\r\n            $row.data('item_data', rows[index]);\r\n        }\r\n\r\n        var columns = [];\r\n        for (var i = 0, length = this.columns.length; i < length; i++) {\r\n            columns.push(renderColumn.call(this, $row, rows, index, this.columns, i));\r\n        }\r\n\r\n        $tbody.append($row);\r\n\r\n        if (this.options.columnRendered) {\r\n            for (var columnIndex = 0, colLength = columns.length; columnIndex < colLength; columnIndex++) {\r\n                if (!(this.columns[columnIndex].property === '@_CHECKBOX_@' || this.columns[columnIndex].property === '@_ACTIONS_@')) {\r\n                    this.options.columnRendered({\r\n                        container: $row,\r\n                        columnAttr: this.columns[columnIndex].property,\r\n                        item: columns[columnIndex],\r\n                        rowData: rows[index]\r\n                    }, function noop () {});\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.options.rowRendered) {\r\n            this.options.rowRendered({\r\n                container: $tbody,\r\n                item: $row,\r\n                rowData: rows[index]\r\n            }, function noop () {});\r\n        }\r\n    };\r\n\r\n    var renderTbody = function renderTbody ($table, data) {\r\n        var $tbody = $table.find('tbody');\r\n        var $empty;\r\n\r\n        if ($tbody.length < 1) {\r\n            $tbody = $('<tbody data-container=\"true\"></tbody>');\r\n            $table.append($tbody);\r\n        }\r\n\r\n        if (typeof data.error === 'string' && data.error.length > 0) {\r\n            $empty = $('<tr class=\"empty text-danger\"><td colspan=\"' + this.columns.length + '\"></td></tr>');\r\n            $empty.find('td').append(data.error);\r\n            $tbody.append($empty);\r\n        } else if (data.items && data.items.length < 1) {\r\n            $empty = $('<tr class=\"empty\"><td colspan=\"' + this.columns.length + '\"></td></tr>');\r\n            $empty.find('td').append(this.options.noItemsHTML);\r\n            $tbody.append($empty);\r\n        }\r\n    };\r\n\r\n    var renderThead = function renderThead ($table, data) {\r\n        var columns = data.columns || [];\r\n        var $thead = $table.find('thead');\r\n        var i;\r\n        var length;\r\n        var $tr;\r\n\r\n        if (this.firstRender || areDifferentColumns(this.columns, columns) || $thead.length === 0) {\r\n            $thead.remove();\r\n\r\n            // noItems is set in `before` method\r\n\r\n            if (this.options.selectable === 'multi' && !this.noItems) {\r\n                var checkboxColumn = {\r\n                    label: 'c',\r\n                    property: '@_CHECKBOX_@',\r\n                    sortable: false\r\n                };\r\n                columns.splice(0, 0, checkboxColumn);\r\n            }\r\n\r\n            this.columns = columns;\r\n            this.firstRender = false;\r\n            this.repeater.$loader.removeClass('noHeader');\r\n\r\n            // keep action column header even when empty, you'll need it later....\r\n            if (this.options.actions) {\r\n                var actionsColumn = {\r\n                    label: this.options.actions.label || '<span class=\"actions-hidden\">a</span>',\r\n                    property: '@_ACTIONS_@',\r\n                    sortable: false,\r\n                    width: this.actions_width\r\n                };\r\n                columns.push(actionsColumn);\r\n            }\r\n\r\n\r\n            $thead = $('<thead data-preserve=\"deep\"><tr></tr></thead>');\r\n            $tr = $thead.find('tr');\r\n            for (i = 0, length = columns.length; i < length; i++) {\r\n                renderHeader.call(this, $tr, columns, i);\r\n            }\r\n            $table.prepend($thead);\r\n\r\n            if (this.options.selectable === 'multi' && !this.noItems) {\r\n                // after checkbox column is created need to get width of checkbox column from\r\n                // its css class\r\n                var checkboxWidth = this.repeater.$element.find('.repeater-table-wrapper .header-checkbox').outerWidth();\r\n                var selectColumn = $.grep(columns, function grepColumn (column) {\r\n                    return column.property === '@_CHECKBOX_@';\r\n                })[0];\r\n                selectColumn.width = checkboxWidth;\r\n            }\r\n            sizeColumns.call(this, $tr);\r\n        }\r\n    };\r\n\r\n    var sizeColumns = function sizeColumns ($tr) {\r\n        var automaticallyGeneratedWidths = [];\r\n        var self = this;\r\n        var i;\r\n        var length;\r\n        var newWidth;\r\n        var widthTaken;\r\n\r\n        if (this.options.columnSizing) {\r\n            i = 0;\r\n            widthTaken = 0;\r\n            $tr.find('th').each(function eachTH () {\r\n                var $th = $(this);\r\n                var width;\r\n                if (self.columns[i].width !== undefined) {\r\n                    width = self.columns[i].width;\r\n                    $th.outerWidth(width);\r\n                    widthTaken += $th.outerWidth();\r\n                    self.columns[i]._auto_width = width;\r\n                } else {\r\n                    var outerWidth = $th.find('.repeater-table-heading').outerWidth();\r\n                    automaticallyGeneratedWidths.push({\r\n                        col: $th,\r\n                        index: i,\r\n                        minWidth: outerWidth\r\n                    });\r\n                }\r\n\r\n                i++;\r\n            });\r\n\r\n            length = automaticallyGeneratedWidths.length;\r\n            if (length > 0) {\r\n                var canvasWidth = this.repeater.$canvas.find('.repeater-table-wrapper').outerWidth();\r\n                newWidth = Math.floor((canvasWidth - widthTaken) / length);\r\n                for (i = 0; i < length; i++) {\r\n                    if (automaticallyGeneratedWidths[i].minWidth > newWidth) {\r\n                        newWidth = automaticallyGeneratedWidths[i].minWidth;\r\n                    }\r\n                    automaticallyGeneratedWidths[i].col.outerWidth(newWidth);\r\n                    this.columns[automaticallyGeneratedWidths[i].index]._auto_width = newWidth;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    var specialBrowserClass = function specialBrowserClass () {\r\n        var ua = window.navigator.userAgent;\r\n        var msie = ua.indexOf('MSIE ');\r\n        var firefox = ua.indexOf('Firefox');\r\n\r\n        if (msie > 0 ) {\r\n            return 'ie-' + parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n        } else if (firefox > 0) {\r\n            return 'firefox';\r\n        }\r\n\r\n        return '';\r\n    };\r\n\r\n    var toggleActionsHeaderButton = function toggleActionsHeaderButton () {\r\n        var selectedSelector = '.repeater-table-wrapper > table .selected';\r\n        var $actionsColumn = this.repeater.$element.find('.table-actions');\r\n        var $selected;\r\n\r\n        if (this.options.selectable === 'action') {\r\n            selectedSelector = '.repeater-table-wrapper > table tr';\r\n        }\r\n\r\n        $selected = this.repeater.$canvas.find( selectedSelector );\r\n\r\n        if ($selected.length > 0) {\r\n            $actionsColumn.find('thead .btn').removeAttr('disabled');\r\n        } else {\r\n            $actionsColumn.find('thead .btn').attr('disabled', 'disabled');\r\n        }\r\n    };\r\n\r\n\r\n     views[\"table\"] = {\r\n        name : \"table\",\r\n        ctor : TableView\r\n    }; \r\n\r\n    return TableView;\r\n\r\n});"]}