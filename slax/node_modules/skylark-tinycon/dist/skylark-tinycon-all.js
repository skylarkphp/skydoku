/**
 * skylark-tinycon - A version of tinycon that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylark-integration/skylark-tinycon/
 * @license MIT
 */
!function(t,e){var n=e.define,r=e.require,o="function"==typeof n&&n.amd,i=!o&&"undefined"!=typeof exports;if(!o&&!n){var a={};n=e.define=function(t,e,n){"function"==typeof n?(a[t]={factory:n,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var n=e.split("/"),r=t.split("/");n.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?n.pop():n.push(r[o]));return n.join("/")}(e,t)}),resolved:!1,exports:null},r(t)):a[t]={factory:null,resolved:!0,exports:n}},r=e.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var n=a[t];if(!n.resolved){var o=[];n.deps.forEach(function(t){o.push(r(t))}),n.exports=n.factory.apply(e,o)||null,n.resolved=!0}return n.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,e){t("skylark-langx/_attach",[],function(){return function(t,e,n){"string"==typeof e&&(e=e.split("."));for(var r=e.length,o=t,i=0,a=e[i++];i<r;)o=o[a]=o[a]||{},a=e[i++];return o[a]=n}}),t("skylark-langx/skylark",["./_attach"],function(t){var e={attach:function(n,r){return t(e,n,r)}};return e}),t("skylark-tinycon/tinycon",["skylark-langx/skylark"],function(t){var e,n={},r=null,o=null,i=null,a=null,l={},u=window.devicePixelRatio||1,c=16*u,f={width:7,height:9,font:10*u+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},s=(e=navigator.userAgent.toLowerCase(),function(t){return-1!==e.indexOf(t)}),d={ie:s("trident"),chrome:s("chrome"),webkit:s("chrome")||s("safari"),safari:s("safari")&&!s("chrome"),mozilla:s("mozilla")&&!s("chrome")&&!s("safari")},h=function(){if(!o||!r){var t=function(){for(var t=document.getElementsByTagName("link"),e=0,n=t.length;e<n;e++)if((t[e].getAttribute("rel")||"").match(/\bicon\b/i))return t[e];return!1}();r=t?t.getAttribute("href"):"/favicon.ico",o||(o=r)}return r},g=function(){return a||((a=document.createElement("canvas")).width=c,a.height=c),a},m=function(t){if(t){!function(){for(var t=document.getElementsByTagName("link"),e=document.getElementsByTagName("head")[0],n=0,r=t.length;n<r;n++){var o=void 0!==t[n];o&&(t[n].getAttribute("rel")||"").match(/\bicon\b/i)&&e.removeChild(t[n])}}();var e=document.createElement("link");e.type="image/x-icon",e.rel="icon",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}},k=function(t){if(l.fallback){var e=document.title;"("===e[0]&&(e=e.slice(e.indexOf(" "))),document.title=(t+"").length>0?"("+t+") "+e:e}},y=function(t,e,n){"number"==typeof e&&e>99&&l.abbreviate&&(e=p(e));var r=(e+"").length-1,o=l.width*u+6*u*r,i=l.height*u,a=c-i,f=c-o-u,s=16*u,h=16*u,g=2*u;t.font=(d.webkit?"bold ":"")+l.font,t.fillStyle=l.background,t.strokeStyle=l.background,t.lineWidth=u,t.beginPath(),t.moveTo(f+g,a),t.quadraticCurveTo(f,a,f,a+g),t.lineTo(f,s-g),t.quadraticCurveTo(f,s,f+g,s),t.lineTo(h-g,s),t.quadraticCurveTo(h,s,h,s-g),t.lineTo(h,a+g),t.quadraticCurveTo(h,a,h-g,a),t.closePath(),t.fill(),t.beginPath(),t.strokeStyle="rgba(0,0,0,0.3)",t.moveTo(f+g/2,s),t.lineTo(h-g/2,s),t.stroke(),t.fillStyle=l.color,t.textAlign="right",t.textBaseline="top",t.fillText(e,2===u?29:15,d.mozilla?7*u:6*u)},v=function(){g().getContext&&m(g().toDataURL())},p=function(t){for(var e=[["G",1e9],["M",1e6],["k",1e3]],n=0;n<e.length;++n)if(t>=e[n][1]){t=b(t/e[n][1])+e[n][0];break}return t},b=function(t,e){var n=new Number(t);return n.toFixed(e)};return n.setOptions=function(t){for(var e in l={},t.colour&&(t.color=t.colour),f)l[e]=t.hasOwnProperty(e)?t[e]:f[e];return this},n.setImage=function(t){return r=t,v(),this},n.setBubble=function(t,e){return function(t,e){if(!g().getContext||d.ie||d.safari||"force"===l.fallback)return k(t);var n=g().getContext("2d"),e=e||"#000000",r=h();(i=document.createElement("img")).onload=function(){n.clearRect(0,0,c,c),n.drawImage(i,0,0,i.width,i.height,0,0,c,c),(t+"").length>0&&y(n,t,e),v()},!r.match(/^data/)&&l.crossOrigin&&(i.crossOrigin="anonymous");i.src=r}(t=t||"",e),this},n.reset=function(){r=o,m(o)},n.setOptions(f),t.attach("itg.tinycon",n)}),t("skylark-tinycon/main",["./tinycon"],function(t){return t}),t("skylark-tinycon",["skylark-tinycon/main"],function(t){return t})}(n),!o){var l=r("skylark-langx/skylark");i?module.exports=l:e.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-tinycon-all.js.map
