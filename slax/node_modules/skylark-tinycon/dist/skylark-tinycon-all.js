/**
 * skylark-tinycon - A version of tinycon that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylark-integration/skylark-tinycon/
 * @license MIT
 */
!function(t,n){var e=n.define,r=n.require,o="function"==typeof e&&e.amd,i=!o&&"undefined"!=typeof exports;if(!o&&!e){var a={};e=n.define=function(t,n,e){"function"==typeof e?(a[t]={factory:e,deps:n.map(function(n){return function(t,n){if("."!==t[0])return t;var e=n.split("/"),r=t.split("/");e.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?e.pop():e.push(r[o]));return e.join("/")}(n,t)}),resolved:!1,exports:null},r(t)):a[t]={factory:null,resolved:!0,exports:e}},r=n.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var e=a[t];if(!e.resolved){var o=[];e.deps.forEach(function(t){o.push(r(t))}),e.exports=e.factory.apply(n,o)||null,e.resolved=!0}return e.exports}}if(!e)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,n){t("skylark-langx-ns/_attach",[],function(){return function(t,n,e){"string"==typeof n&&(n=n.split("."));for(var r=n.length,o=t,i=0,a=n[i++];i<r;)o=o[a]=o[a]||{},a=n[i++];return o[a]=e}}),t("skylark-langx-ns/ns",["./_attach"],function(t){var n={attach:function(e,r){return t(n,e,r)}};return n}),t("skylark-langx-ns/main",["./ns"],function(t){return t}),t("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),t("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),t("skylark-tinycon/tinycon",["skylark-langx/skylark"],function(t){var n,e={},r=null,o=null,i=null,a=null,l={},u=window.devicePixelRatio||1,c=16*u,f={width:7,height:9,font:10*u+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},s=(n=navigator.userAgent.toLowerCase(),function(t){return-1!==n.indexOf(t)}),d={ie:s("trident"),chrome:s("chrome"),webkit:s("chrome")||s("safari"),safari:s("safari")&&!s("chrome"),mozilla:s("mozilla")&&!s("chrome")&&!s("safari")},h=function(){if(!o||!r){var t=function(){for(var t=document.getElementsByTagName("link"),n=0,e=t.length;n<e;n++)if((t[n].getAttribute("rel")||"").match(/\bicon\b/i))return t[n];return!1}();r=t?t.getAttribute("href"):"/favicon.ico",o||(o=r)}return r},g=function(){return a||((a=document.createElement("canvas")).width=c,a.height=c),a},k=function(t){if(t){!function(){for(var t=document.getElementsByTagName("link"),n=document.getElementsByTagName("head")[0],e=0,r=t.length;e<r;e++){var o=void 0!==t[e];o&&(t[e].getAttribute("rel")||"").match(/\bicon\b/i)&&n.removeChild(t[e])}}();var n=document.createElement("link");n.type="image/x-icon",n.rel="icon",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}},m=function(t){if(l.fallback){var n=document.title;"("===n[0]&&(n=n.slice(n.indexOf(" "))),document.title=(t+"").length>0?"("+t+") "+n:n}},y=function(t,n,e){"number"==typeof n&&n>99&&l.abbreviate&&(n=p(n));var r=(n+"").length-1,o=l.width*u+6*u*r,i=l.height*u,a=c-i,f=c-o-u,s=16*u,h=16*u,g=2*u;t.font=(d.webkit?"bold ":"")+l.font,t.fillStyle=l.background,t.strokeStyle=l.background,t.lineWidth=u,t.beginPath(),t.moveTo(f+g,a),t.quadraticCurveTo(f,a,f,a+g),t.lineTo(f,s-g),t.quadraticCurveTo(f,s,f+g,s),t.lineTo(h-g,s),t.quadraticCurveTo(h,s,h,s-g),t.lineTo(h,a+g),t.quadraticCurveTo(h,a,h-g,a),t.closePath(),t.fill(),t.beginPath(),t.strokeStyle="rgba(0,0,0,0.3)",t.moveTo(f+g/2,s),t.lineTo(h-g/2,s),t.stroke(),t.fillStyle=l.color,t.textAlign="right",t.textBaseline="top",t.fillText(n,2===u?29:15,d.mozilla?7*u:6*u)},v=function(){g().getContext&&k(g().toDataURL())},p=function(t){for(var n=[["G",1e9],["M",1e6],["k",1e3]],e=0;e<n.length;++e)if(t>=n[e][1]){t=b(t/n[e][1])+n[e][0];break}return t},b=function(t,n){var e=new Number(t);return e.toFixed(n)};return e.setOptions=function(t){for(var n in l={},t.colour&&(t.color=t.colour),f)l[n]=t.hasOwnProperty(n)?t[n]:f[n];return this},e.setImage=function(t){return r=t,v(),this},e.setBubble=function(t,n){return function(t,n){if(!g().getContext||d.ie||d.safari||"force"===l.fallback)return m(t);var e=g().getContext("2d"),n=n||"#000000",r=h();(i=document.createElement("img")).onload=function(){e.clearRect(0,0,c,c),e.drawImage(i,0,0,i.width,i.height,0,0,c,c),(t+"").length>0&&y(e,t,n),v()},!r.match(/^data/)&&l.crossOrigin&&(i.crossOrigin="anonymous");i.src=r}(t=t||"",n),this},e.reset=function(){r=o,k(o)},e.setOptions(f),t.attach("itg.tinycon",e)}),t("skylark-tinycon/main",["./tinycon"],function(t){return t}),t("skylark-tinycon",["skylark-tinycon/main"],function(t){return t})}(e),!o){var l=r("skylark-langx/skylark");i?module.exports=l:n.skylarkjs=l}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-tinycon-all.js.map
