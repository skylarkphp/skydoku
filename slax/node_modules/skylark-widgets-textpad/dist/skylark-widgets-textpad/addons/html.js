/**
 * skylark-widgets-textpad - The skylark text editor widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-textpad/
 * @license MIT
 */
define(["skylark-domx-query","../Editor"],function(e,t){t.addon("base",{init:function(t){n("bold","<strong>$1</strong>"),n("italic","<em>$1</em>"),n("strike","<del>$1</del>"),n("blockquote","<blockquote><p>$1</p></blockquote>","replaceLine"),n("link",'<a href="http://">$1</a>'),n("image",'<img src="http://" alt="$1">');var l=function(e){if("html"==t.getCursorMode()){e=e||"ul";for(var l=t.editor,n=l.getDoc(),i=n.getCursor(!0),o=n.getCursor(!1),r=CodeMirror.innerMode(l.getMode(),l.getTokenAt(l.getCursor()).state),c=r&&r.state&&r.state.context&&-1!=["ul","ol"].indexOf(r.state.context.tagName),s=i.line;s<o.line+1;s++)l.replaceRange("<li>"+l.getLine(s)+"</li>",{line:s,ch:0},{line:s,ch:l.getLine(s).length});c?l.setCursor({line:o.line,ch:l.getLine(o.line).length}):(l.replaceRange("<"+e+">\n"+l.getLine(i.line),{line:i.line,ch:0},{line:i.line,ch:l.getLine(i.line).length}),l.replaceRange(l.getLine(o.line+1)+"\n</"+e+">",{line:o.line+1,ch:0},{line:o.line+1,ch:l.getLine(o.line+1).length}),l.setCursor({line:o.line+1,ch:l.getLine(o.line+1).length})),l.focus()}};function n(e,l,n){t.on("action."+e,function(){"html"==t.getCursorMode()&&t["replaceLine"==n?"replaceLine":"replaceSelection"](l)})}t.on("action.listUl",function(){l("ul")}),t.on("action.listOl",function(){l("ol")}),t.htmleditor.on("click",'a[data-htmleditor-button="fullscreen"]',function(){t.htmleditor.toggleClass("uk-htmleditor-fullscreen");var l=t.editor.getWrapperElement();if(t.htmleditor.hasClass("uk-htmleditor-fullscreen"))t.editor.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:l.style.width,height:l.style.height},l.style.width="",l.style.height=t.content.height()+"px",document.documentElement.style.overflow="hidden";else{document.documentElement.style.overflow="";var n=t.editor.state.fullScreenRestore;l.style.width=n.width,l.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop)}setTimeout(function(){t.fit(),e(window).trigger("resize")},50)}),t.addShortcut(["Ctrl-S","Cmd-S"],function(){t.element.trigger("htmleditor-save",[t])}),t.addShortcutAction("bold",["Ctrl-B","Cmd-B"])}})});
//# sourceMappingURL=../sourcemaps/addons/html.js.map
