{"version":3,"sources":["plugins/explode.js"],"names":["define","langx","$","effects","options","done","i","j","left","top","mx","my","rows","pieces","Math","round","sqrt","cells","element","this","show","mode","offset","css","width","ceil","outerWidth","height","outerHeight","childComplete","push","length","visibility","remove","clone","appendTo","wrap","position","parent","addClass","overflow","opacity","animate","duration","easing"],"mappings":";;;;;;;AAAAA,QACC,sBACA,qBACA,cACE,SAASC,EAAMC,EAAEC,GACpB,OAAOA,EAAQH,OAAQ,UAAW,OAAQ,SAAUI,EAASC,GAE5D,IAAIC,EAAGC,EAAGC,EAAMC,EAAKC,EAAIC,EACxBC,EAAOR,EAAQS,OAASC,KAAKC,MAAOD,KAAKE,KAAMZ,EAAQS,SAAa,EACpEI,EAAQL,EACRM,EAAUhB,EAAGiB,MAEbC,EAAgB,SADThB,EAAQiB,KAIfC,EAASJ,EAAQE,OAAOG,IAAK,aAAc,UAAWD,SAGtDE,EAAQV,KAAKW,KAAMP,EAAQQ,aAAeT,GAC1CU,EAASb,KAAKW,KAAMP,EAAQU,cAAgBhB,GAC5CC,KAGD,SAASgB,IACRhB,EAAOiB,KAAMX,MACRN,EAAOkB,SAAWnB,EAAOK,IAiD9BC,EAAQK,KACPS,WAAY,YAEb9B,EAAGW,GAASoB,SACZ5B,KA/CD,IAAMC,EAAI,EAAGA,EAAIM,EAAMN,IAItB,IAHAG,EAAMa,EAAOb,IAAMH,EAAIqB,EACvBhB,EAAKL,GAAMM,EAAO,GAAM,EAElBL,EAAI,EAAGA,EAAIU,EAAOV,IACvBC,EAAOc,EAAOd,KAAOD,EAAIiB,EACzBd,EAAKH,GAAMU,EAAQ,GAAM,EAIzBC,EACEgB,QACAC,SAAU,QACVC,KAAM,eACNb,KACAc,SAAU,WACVL,WAAY,UACZxB,MAAOD,EAAIiB,EACXf,KAAMH,EAAIqB,IAKVW,SACCC,SAAU,sBACVhB,KACAc,SAAU,WACVG,SAAU,SACVhB,MAAOA,EACPG,OAAQA,EACRnB,KAAMA,GAASY,EAAOV,EAAKc,EAAQ,GACnCf,IAAKA,GAAQW,EAAOT,EAAKgB,EAAS,GAClCc,QAASrB,EAAO,EAAI,IAEpBsB,SACAlC,KAAMA,GAASY,EAAO,EAAIV,EAAKc,GAC/Bf,IAAKA,GAAQW,EAAO,EAAIT,EAAKgB,GAC7Bc,QAASrB,EAAO,EAAI,GAClBhB,EAAQuC,UAAY,IAAKvC,EAAQwC,OAAQf","file":"../../plugins/explode.js","sourcesContent":["define( [\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-domx-query\",\r\n\t\"../effects\"\r\n], function(langx,$,effects) {\r\nreturn effects.define( \"explode\", \"hide\", function( options, done ) {\r\n\r\n\tvar i, j, left, top, mx, my,\r\n\t\trows = options.pieces ? Math.round( Math.sqrt( options.pieces ) ) : 3,\r\n\t\tcells = rows,\r\n\t\telement = $( this ),\r\n\t\tmode = options.mode,\r\n\t\tshow = mode === \"show\",\r\n\r\n\t\t// Show and then visibility:hidden the element before calculating offset\r\n\t\toffset = element.show().css( \"visibility\", \"hidden\" ).offset(),\r\n\r\n\t\t// Width and height of a piece\r\n\t\twidth = Math.ceil( element.outerWidth() / cells ),\r\n\t\theight = Math.ceil( element.outerHeight() / rows ),\r\n\t\tpieces = [];\r\n\r\n\t// Children animate complete:\r\n\tfunction childComplete() {\r\n\t\tpieces.push( this );\r\n\t\tif ( pieces.length === rows * cells ) {\r\n\t\t\tanimComplete();\r\n\t\t}\r\n\t}\r\n\r\n\t// Clone the element for each row and cell.\r\n\tfor ( i = 0; i < rows; i++ ) { // ===>\r\n\t\ttop = offset.top + i * height;\r\n\t\tmy = i - ( rows - 1 ) / 2;\r\n\r\n\t\tfor ( j = 0; j < cells; j++ ) { // |||\r\n\t\t\tleft = offset.left + j * width;\r\n\t\t\tmx = j - ( cells - 1 ) / 2;\r\n\r\n\t\t\t// Create a clone of the now hidden main element that will be absolute positioned\r\n\t\t\t// within a wrapper div off the -left and -top equal to size of our pieces\r\n\t\t\telement\r\n\t\t\t\t.clone()\r\n\t\t\t\t.appendTo( \"body\" )\r\n\t\t\t\t.wrap( \"<div></div>\" )\r\n\t\t\t\t.css( {\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tvisibility: \"visible\",\r\n\t\t\t\t\tleft: -j * width,\r\n\t\t\t\t\ttop: -i * height\r\n\t\t\t\t} )\r\n\r\n\t\t\t\t// Select the wrapper - make it overflow: hidden and absolute positioned based on\r\n\t\t\t\t// where the original was located +left and +top equal to the size of pieces\r\n\t\t\t\t.parent()\r\n\t\t\t\t\t.addClass( \"ui-effects-explode\" )\r\n\t\t\t\t\t.css( {\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\theight: height,\r\n\t\t\t\t\t\tleft: left + ( show ? mx * width : 0 ),\r\n\t\t\t\t\t\ttop: top + ( show ? my * height : 0 ),\r\n\t\t\t\t\t\topacity: show ? 0 : 1\r\n\t\t\t\t\t} )\r\n\t\t\t\t\t.animate( {\r\n\t\t\t\t\t\tleft: left + ( show ? 0 : mx * width ),\r\n\t\t\t\t\t\ttop: top + ( show ? 0 : my * height ),\r\n\t\t\t\t\t\topacity: show ? 1 : 0\r\n\t\t\t\t\t}, options.duration || 500, options.easing, childComplete );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction animComplete() {\r\n\t\telement.css( {\r\n\t\t\tvisibility: \"visible\"\r\n\t\t} );\r\n\t\t$( pieces ).remove();\r\n\t\tdone();\r\n\t}\r\n} );\r\n\r\n});\r\n"]}