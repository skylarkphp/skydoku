{"version":3,"sources":["sync.js"],"names":["define","langx","entities","registry","sync","method","model","options","backend","Error","setting","get","syncMethod","options2","mixin","apply","this"],"mappings":";;;;;;;AAAAA,QACC,sBACA,aACE,uBACD,SAASC,EAAMC,EAASC,GAsBvB,OAAOD,EAASE,KAlBlB,SAAcC,EAAQC,EAAOC,GAC5B,IAAKA,EAAQC,QACZ,MAAM,IAAIC,MAAM,gCAEjB,IAAIC,EAAUP,EAASQ,IAAIJ,EAAQC,SACnC,IAAKE,EACJ,MAAM,IAAID,MAAM,8BAAgCF,EAAQC,SAEzD,IAAII,EAAaF,EAAQN,KACzB,IAAKQ,EACJ,MAAM,IAAIH,MAAM,0CAA4CF,EAAQC,SAGrE,IAAIK,EAAWZ,EAAMa,SAASJ,EAAQH,QAAQA,GAC5C,OAAOK,EAAWG,MAAMC,MAAOX,EAAQC,EAAOO","file":"../sync.js","sourcesContent":["define([\r\n\t\"skylark-langx/langx\",\r\n\t\"./entities\",\r\n  \t\"./backends/registry\"\r\n],function(langx,entities,registry){\r\n\r\n\t// Override 'Backbone.sync' to default to localSync,\r\n\t// the original 'Backbone.sync' is still available in 'Backbone.ajaxSync'\r\n\tfunction sync(method, model, options) {\r\n\t\tif (!options.backend) {\r\n\t\t\tthrow new Error(\"The backend is not specified\")\r\n\t\t}\r\n\t\tvar setting = registry.get(options.backend);\r\n\t\tif (!setting) {\r\n\t\t\tthrow new Error(\"The backend is not defined:\" + options.backend);\r\n\t\t}\r\n\t\tvar syncMethod = setting.sync;\r\n\t\tif (!syncMethod) {\r\n\t\t\tthrow new Error(\"The backend sync method is not defined:\" + options.backend);\r\n\t\t}\r\n\r\n\t\tvar options2 = langx.mixin({},setting.options,options);\r\n\t  \treturn syncMethod.apply(this, [method, model, options2]);\r\n\t};\r\n\r\n  \r\n   return entities.sync = sync;\r\n\r\n});"]}