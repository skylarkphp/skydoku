{"version":3,"sources":["browser.js"],"names":["define","skylark","langx","vendorPrefix","vendorPrefixRE","browser","hoster","transEndEventNames","WebkitTransition","MozTransition","OTransition","transition","transEndEventName","css3PropPrefix","css3EventPrefix","cssStyles","cssProps","vendorPrefixesRE","document","window","testEl","createElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","requestFullScreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","testStyle","exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","style","name","matched","match","RegExp","toLowerCase","lowerFirst","cssPropName","dasherize","undefined","mixin","isIE","exec","navigator","userAgent","normalizeStyleProperty","normalizeCssProperty","normalizeCssEvent","location","support","end","attach"],"mappings":";;;;;;;AAAAA,QACI,wBACA,uBACD,SAASC,EAAQC,GAChB,aAEA,IAqBIC,EACAC,EAtBAC,EAAUH,EAAMI,OAAOD,QAKvBE,GACEC,iBAAmB,sBACnBC,cAAmB,gBACnBC,YAAmB,gCACnBC,WAAmB,iBAErBC,EAAoB,KAGpBC,EAAiB,GAEjBC,EAAkB,GAElBC,KACAC,KAIAC,EAAmB,qCAEnBC,EAAWC,OAAOD,SAClBE,EAASF,EAASG,cAAc,OAEhCC,EAAkBF,EAAOG,uBACPH,EAAOI,oBACPJ,EAAOK,kBACPL,EAAOE,gBAEzBI,EAAoBN,EAAOO,mBACPP,EAAOQ,yBACPR,EAAOS,sBACPT,EAAOU,oBAO3BC,GALkBb,EAASc,gBACTd,EAASe,wBACTf,EAASgB,qBACThB,EAASiB,iBAEff,EAAOgB,OAEvB,IAAK,IAAIC,KAAQN,EAAW,CACxB,IAAIO,EAAUD,EAAKE,MAAMnC,GAAkBa,GAC3C,GAAIqB,EAAS,CACJlC,IACDD,EAAemC,EAAQ,GACvBlC,EAAiB,IAAIoC,OAAO,KAAOrC,EAAe,UAEhCA,EAClBU,EAAiB,IAAMV,EAAasC,cAAgB,IACpD3B,EAAkBX,EAAasC,eAGnC1B,EAAUb,EAAMwC,WAAWJ,EAAQ,KAAOD,EAC1C,IAAIM,EAAczC,EAAM0C,UAAUN,EAAQ,IAC1CtB,EAAS2B,GAAe9B,EAAiB8B,EAErCpC,EAAmB8B,KACrBzB,EAAoBL,EAAmB8B,KA0DjD,OArDKzB,QAC+BiC,IAA5Bd,EAAsB,aACtBnB,EAAoBL,EAA+B,YAgB3DL,EAAM4C,MAAMzC,GACRQ,eAAgBA,EAEhBkC,OAAS,QAAQC,KAAM7B,OAAO8B,UAAUC,WAExCC,uBATJ,SAAgCd,GAC5B,OAAOtB,EAAUsB,IAASA,GAU1Be,qBAfJ,SAA8Bf,GAC1B,OAAOrB,EAASqB,IAASA,GAgBzBgB,kBArBJ,SAA2BhB,GACvB,OAAOvB,EAAkBA,EAAkBuB,EAAOA,EAAKI,eAsBvDnB,gBAAiBA,EAEjBI,kBAAoBA,EAEpBM,eAAiBN,EAEjB4B,SAAU,WACN,OAAOnC,OAAOmC,UAGlBC,aAMC3C,IACDP,EAAQkD,QAAQ5C,YACZ6C,IAAM5C,IAIdQ,EAAS,KAEFnB,EAAQwD,OAAO,eAAepD","file":"../browser.js","sourcesContent":["define([\r\n    \"skylark-langx/skylark\",\r\n    \"skylark-langx/langx\"\r\n], function(skylark,langx) {\r\n    \"use strict\";\r\n\r\n    var browser = langx.hoster.browser;\r\n \r\n    var checkedCssProperties = {\r\n            \"transitionproperty\": \"TransitionProperty\",\r\n        },\r\n        transEndEventNames = {\r\n          WebkitTransition : 'webkitTransitionEnd',\r\n          MozTransition    : 'transitionend',\r\n          OTransition      : 'oTransitionEnd otransitionend',\r\n          transition       : 'transitionend'\r\n        },\r\n        transEndEventName = null;\r\n\r\n\r\n    var css3PropPrefix = \"\",\r\n        css3StylePrefix = \"\",\r\n        css3EventPrefix = \"\",\r\n\r\n        cssStyles = {},\r\n        cssProps = {},\r\n\r\n        vendorPrefix,\r\n        vendorPrefixRE,\r\n        vendorPrefixesRE = /^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,\r\n\r\n        document = window.document,\r\n        testEl = document.createElement(\"div\"),\r\n\r\n        matchesSelector = testEl.webkitMatchesSelector ||\r\n                          testEl.mozMatchesSelector ||\r\n                          testEl.oMatchesSelector ||\r\n                          testEl.matchesSelector,\r\n\r\n        requestFullScreen = testEl.requestFullscreen || \r\n                            testEl.webkitRequestFullscreen || \r\n                            testEl.mozRequestFullScreen || \r\n                            testEl.msRequestFullscreen,\r\n\r\n        exitFullScreen =  document.exitFullscreen ||\r\n                          document.webkitCancelFullScreen ||\r\n                          document.mozCancelFullScreen ||\r\n                          document.msExitFullscreen,\r\n\r\n        testStyle = testEl.style;\r\n\r\n    for (var name in testStyle) {\r\n        var matched = name.match(vendorPrefixRE || vendorPrefixesRE);\r\n        if (matched) {\r\n            if (!vendorPrefixRE) {\r\n                vendorPrefix = matched[1];\r\n                vendorPrefixRE = new RegExp(\"^(\" + vendorPrefix + \")(.*)$\");\r\n\r\n                css3StylePrefix = vendorPrefix;\r\n                css3PropPrefix = '-' + vendorPrefix.toLowerCase() + '-';\r\n                css3EventPrefix = vendorPrefix.toLowerCase();\r\n            }\r\n\r\n            cssStyles[langx.lowerFirst(matched[2])] = name;\r\n            var cssPropName = langx.dasherize(matched[2]);\r\n            cssProps[cssPropName] = css3PropPrefix + cssPropName;\r\n\r\n            if (transEndEventNames[name]) {\r\n              transEndEventName = transEndEventNames[name];\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!transEndEventName) {\r\n        if (testStyle[\"transition\"] !== undefined) {\r\n            transEndEventName = transEndEventNames[\"transition\"];\r\n        }\r\n    }\r\n\r\n    function normalizeCssEvent(name) {\r\n        return css3EventPrefix ? css3EventPrefix + name : name.toLowerCase();\r\n    }\r\n\r\n    function normalizeCssProperty(name) {\r\n        return cssProps[name] || name;\r\n    }\r\n\r\n    function normalizeStyleProperty(name) {\r\n        return cssStyles[name] || name;\r\n    }\r\n\r\n    langx.mixin(browser, {\r\n        css3PropPrefix: css3PropPrefix,\r\n\r\n        isIE : !!/msie/i.exec( window.navigator.userAgent ),\r\n\r\n        normalizeStyleProperty: normalizeStyleProperty,\r\n\r\n        normalizeCssProperty: normalizeCssProperty,\r\n\r\n        normalizeCssEvent: normalizeCssEvent,\r\n\r\n        matchesSelector: matchesSelector,\r\n\r\n        requestFullScreen : requestFullScreen,\r\n\r\n        exitFullscreen : requestFullScreen,\r\n\r\n        location: function() {\r\n            return window.location;\r\n        },\r\n\r\n        support : {\r\n\r\n        }\r\n\r\n    });\r\n\r\n    if  (transEndEventName) {\r\n        browser.support.transition = {\r\n            end : transEndEventName\r\n        };\r\n    }\r\n\r\n    testEl = null;\r\n\r\n    return skylark.attach(\"domx.browser\",browser);\r\n});\r\n"]}