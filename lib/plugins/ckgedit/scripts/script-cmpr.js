var HTMLParser;var HTMLParserInstalled=true;var HTMLParser_Elements=new Array();(function(){var k=/^<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,c=/^<\/(\w+)[^>]*>/,f=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;var e=b("br,col,hr,img");var a=b("blockquote,center,del,div,dl,dt,hr,iframe,ins,li,ol,p,pre,table,tbody,td,tfoot,th,thead,tr,ul");var h=b("a,abbr,acronym,b,big,br,cite,code,del,em,font,h1,h2,h3,h4,h5,h6,i,img,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var");var d=b("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var j=b("checked,disabled,ismap,noresize,nowrap,readonly,selected");var g=b("script,style");var l="http://"+location.host+DOKU_BASE+"/lib/plugins/ckgedit/fckeditor/userfiles/blink.jpg?nolink&33x34";HTMLParser=this.HTMLParser=function(n,v){var q,r,o,s=[],t=n;n=n.replace(/(<img.*?src="data:image\/\w+;base64,\s*)(.*?)(\/>)/gm,function(w,z,y){var x=false;if(z.match(/msword/)){x=true;w=w.replace(/msword/,"")}if(y.length>2500000&&!x){jQuery("#dw__editform").append('<input type="hidden" id="broken_image" name="broken_image" value="'+y.length+'" />');return"{{"+l+"}}"}return w});n=n.replace(/~~OPEN_HTML_BLOCK~~/gm,"~~START_HTML_BLOCK~~");n=n.replace(/~~END_HTML_BLOCK~~/gm,"~~CLOSE_HTML_BLOCK~~");if(n.match(/~~START_HTML_BLOCK~~/gm)){if(!JSINFO.htmlok){n=n.replace(/~~START_HTML_BLOCK~~|~~CLOSE_HTML_BLOCK~~/gm,"")}n=n.replace(/(<p>)*\s*~~START_HTML_BLOCK~~\s*(<\/p>)*([\s\S]+)~~CLOSE_HTML_BLOCK~~\s*(<\/p>)*/gm,function(w,y,A,z,x){z=z.replace(/<\/?div.*?>/gm,"");z=z.replace(/<code>/gm,"");z=z.replace(/<\/code>/gm,"");z=z.replace(/</gm,"&lt;");z=z.replace(/<\//gm,"&gt;");return"~~START_HTML_BLOCK~~\n\n"+z+"\n\n~~CLOSE_HTML_BLOCK~~\n\n"})}n=n.replace(/(<sup\s+class=\"dwfcknote fckgL\d+\"\>fckgL\d+\s*\<\/sup\>)\<\/a\>/gm,function(y,x,w){return("</a>"+x)});s.last=function(){return this[this.length-1]};while(n){r=true;if(!s.last()||!g[s.last()]){if(n.indexOf("<!--")==0){q=n.indexOf("-->");if(q>=0){if(v.comment){v.comment(n.substring(4,q))}n=n.substring(q+3);r=false}}else{if(n.indexOf("</")==0){o=n.match(c);if(o){n=n.substring(o[0].length);o[0].replace(c,p);r=false}}else{if(n.indexOf("<")==0){o=n.match(k);if(o){n=n.substring(o[0].length);o[0].replace(k,m);r=false}}}}if(r){q=n.indexOf("<");var u=q<0?n:n.substring(0,q);n=q<0?"":n.substring(q);if(v.chars){v.chars(u)}}}else{n=n.replace(new RegExp("(.*)</"+s.last()+"[^>]*>"),function(w,x){x=x.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1");if(v.chars){v.chars(x)}return""});p("",s.last())}if(n==t){throw"Parse Error: "+n}t=n}p();function m(w,z,A,x){if(a[z]){while(s.last()&&h[s.last()]){p("",s.last())}}if(d[z]&&s.last()==z){p("",z)}x=e[z]||!!x;if(!x){s.push(z)}if(v.start){var y=[];A.replace(f,function(C,B){var D=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:j[B]?B:"";y.push({name:B,value:D,escaped:D.replace(/(^|[^\\])"/g,'$1\\"')})});if(v.start){v.start(z,y,x)}}}function p(w,y){if(!y){var z=0}else{for(var z=s.length-1;z>=0;z--){if(s[z]==y){break}}}if(z>=0){for(var x=s.length-1;x>=z;x--){if(v.end){v.end(s[x])}}s.length=z}}};function b(p){var o={},m=p.split(",");for(var n=0;n<m.length;n++){o[m[n]]=true}return o}})();function HTMLParser_test_result(a){var d="";for(i=0;i<a.length;i++){var c=a.charAt(i);if(a.charCodeAt(i)==10){c="\\n"}if(a.charCodeAt(i)==32){c="SP"}var b=c+" ";d+=b;if(a.charCodeAt(i)==10){d+="\n"}}if(!confirm(d)){return false}return true}function hide_backup_msg(){document.getElementById("backup_msg").style.display="none";return false}function show_backup_msg(a){document.getElementById("backup_msg").style.display="block";document.getElementById("backup_msg_area").innerHTML="Backed up to: "+a;return false}function remove_draft(){}function dwedit_draft_delete(){}function setEdHeight(a){a=parseInt(a);document.cookie="ckgEdht="+a+';expires="";path='+JSINFO.doku_base}function ckgd_setImgPaste(b){var a=JSINFO.ckgEdPaste?JSINFO.ckgEdPaste:"";if(a=="on"){b="off"}else{b="on"}JSINFO.ckgEdPaste=b;document.cookie="ckgEdPaste="+b+';expires="Thu, 18 Dec 2575 12:00:00 UTC";path='+JSINFO.doku_base;alert(LANG.plugins.ckgedit.ckg_paste_restart+" "+LANG.plugins.ckgedit[b])}function ckg_RawImgMsg(){return LANG.plugins.ckgedit.broken_image_1+"\n"+LANG.plugins.ckgedit.broken_image_2}function GetE(a){return document.getElementById(a)}var dokuBase=location.host+DOKU_BASE;if(window.getSelection!=undefined){var doku_ckg_getSelection=window.getSelection;window.getSelection=function(a){if(!a){a=GetE("wiki__text")}return doku_ckg_getSelection(a)}}function ckgedit_seteditor_priority(a,c,b){var e={Y:"Dokuwiki",N:"CKEditor"};if(typeof a==="undefined"){if(b[0].checked){a=b[0].value}else{if(b[1].checked){a=b[1].value}}}var d="dw_val="+a;d+="&call=cked_selector";d+="&dwp_client="+c;jQuery.post(DOKU_BASE+"lib/exe/ajax.php",d,function(f){if(f=="done"){if(!a){alert(LANG.plugins.ckgedit.dwp_not_sel)}else{alert(LANG.plugins.ckgedit.dwp_updated+e[a])}}else{alert(LANG.plugins.ckgedit.dwp_save_err+f)}},"html")}function ckged_get_unlink_size(b){var a="call=cked_deletedsize";a+="&cked_delid="+b;jQuery.post(DOKU_BASE+"lib/exe/ajax.php",a,function(c){if(c){JSINFO.ckg_del_sz=c}else{}},"html")}function ckged_setmedia(d,a,b){var c="call=cked_upload";c+="&ckedupl_id="+d;if(a){c+="&ckedupl_del=D&delsize="+JSINFO.ckg_del_sz}jQuery.post(DOKU_BASE+"lib/exe/ajax.php",c,function(e){if(e){if(b){b.postMessage(JSINFO.doku_url,JSINFO.doku_url)}}else{}},"html")}jQuery(document).ready(function(){if(JSINFO.hide_captcha_error=="hide"){jQuery("div.error").hide()}});jQuery(document).ready(function(){jQuery("#editor_height").keydown(function(a){if(a.which==13){a.preventDefault()}});$dokuWiki=jQuery(".dokuwiki");jQuery(".editbutton_table button").click(function(){var a=this.form;jQuery("<input />").attr("type","hidden").attr("name","mode").attr("value","dwiki").appendTo(jQuery(a));jQuery("<input />").attr("type","hidden").attr("name","fck_preview_mode").attr("value","nil").appendTo(jQuery(a))});if(typeof(JSINFO.dbl_click_auth!=="undefined")&&JSINFO.dbl_click_auth==""){return}if(!JSINFO.ckg_dbl_click){return}if(jQuery(".editbutton_section",$dokuWiki).length>0){jQuery('[class^="sectionedit"], div[class^="level"]',$dokuWiki).dblclick(function(){var a=jQuery(this).nextAll(".editbutton_section:eq(0)").children("form:eq(0)");jQuery("<input />").attr("type","hidden").attr("name","mode").attr("value","dwiki").appendTo(jQuery(a));jQuery("<input />").attr("type","hidden").attr("name","fck_preview_mode").attr("value","nil").appendTo(jQuery(a));a.submit()})}if(JSINFO.ckg_template.match(/bootstrap/)&&jQuery("div.editButtons").length>0){jQuery("div.editButtons input").each(function(a){if(jQuery(this).hasClass("btn-success")){jQuery(this).removeClass("btn-success")}if(jQuery(this).hasClass("btn-danger")){jQuery(this).removeClass("btn-danger")}})}});function ckg_edit_mediaman_insert(h,c,a,f){var k,d,n,j;var m=a.substring(1).split("&");k="detail";for(var g in m){var b=m[g];if(b.match(/^\d+$/)){d=b}else{if(b.match(/^\w+$/)){k=b}}}switch(f){case"2":j="medialeft";break;case"3":j="mediacenter";break;case"4":j="mediaright";break;default:j="";break}var e=CKEDITOR.instances.wiki__text._.filebrowserFn;var l=DOKU_BASE+"lib/exe/fetch.php?media="+c;CKEDITOR.tools.callFunction(e,l,function(){var o=this.getDialog();if(o.getName()=="image"){if(j!=null){o.getContentElement("info","cmbAlign").setValue(j)}if(k!=null){o.getContentElement("info","cmbLinkType").setValue(k)}if(d!=null){o.getContentElement("info","txtWidth").setValue(d);o.dontResetSize=true}}})}function ckg_edit_mediaman_insertlink(a,e,c,b){var d=CKEDITOR.instances.wiki__text._.filebrowserFn;CKEDITOR.tools.callFunction(d,e,function(){var f=this.getDialog();if(f.getName()=="link"){f.getContentElement("info","media").setValue(e)}})}function getCookie(a){var b=new RegExp(a+"=([^;]+)");var c=b.exec(document.cookie);return(c!=null)?decodeURIComponent(c[1]):null};